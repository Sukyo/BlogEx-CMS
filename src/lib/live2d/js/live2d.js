!function(T){function L(e){if(O[e])return O[e].exports;var l=O[e]={i:e,l:!1,exports:{}};return T[e].call(l.exports,l,l.exports,L),l.l=!0,l.exports}var O={};L.m=T;L.c=O;L.d=function(e,l,t){L.o(e,l)||Object.defineProperty(e,l,{configurable:!1,enumerable:!0,get:t})};L.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return L.d(l,"a",l),l};L.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)};L.p="";L(L.s=4)}([function(T,L,O){function e(){this.pose=this.physics=this.eyeBlink=this.modelMatrix=this.live2DModel=null;this.updating=this.initialized=this.debugMode=!1;this.alpha=1;this.accAlpha=0;this.lipSync=!1;this.dragY=this.dragX=this.accelZ=this.accelY=this.accelX=this.lipSyncValue=0;this.startTimeMSec=null;this.mainMotionManager=new d;this.expressionManager=new d;this.motions={};this.expressions={};this.isTexLoaded=!1}function l(){AMotion.prototype.constructor.call(this);this.paramList=[]}function t(){this.id="";this.type=-1;this.value=null}function K(){this.stateStartTime=this.nextBlinkTime=null;this.eyeState=ha.STATE_FIRST;this.blinkIntervalMsec=4E3;this.closingMotionMsec=100;this.closedMotionMsec=50;this.openingMotionMsec=150;this.closeIfZero=!0;this.eyeID_L="PARAM_EYE_L_OPEN";this.eyeID_R="PARAM_EYE_R_OPEN"}function v(){this.tr=new Float32Array(16);this.identity()}function C(h,p){v.prototype.constructor.call(this);this.width=h;this.height=p}function d(){MotionQueueManager.prototype.constructor.call(this);this.reservePriority=this.currentPriority=null;this["super"]=MotionQueueManager.prototype}function k(){this.physicsList=[];this.startTimeMSec=UtSystem.getUserTimeMSec()}function u(){this.lastTime=0;this.lastModel=null;this.partsGroups=[]}function B(h){this.partsIndex=this.paramIndex=-1;this.link=null;this.id=h}function H(){this.EPSILON=.01;this.lastTimeSec=this.faceVY=this.faceVX=this.faceY=this.faceX=this.faceTargetY=this.faceTargetX=0}function D(){v.prototype.constructor.call(this);this.maxBottom=this.maxTop=this.maxRight=this.maxLeft=this.screenBottom=this.screenTop=this.screenRight=this.screenLeft=null;this.max=Number.MAX_VALUE;this.min=0}function G(){}var w=0;e.prototype.getModelMatrix=function(){return this.modelMatrix};e.prototype.setAlpha=function(h){.999<h&&(h=1);.001>h&&(h=0);this.alpha=h};e.prototype.getAlpha=function(){return this.alpha};e.prototype.isInitialized=function(){return this.initialized};e.prototype.setInitialized=function(h){this.initialized=h};e.prototype.isUpdating=function(){return this.updating};e.prototype.setUpdating=function(h){this.updating=h};e.prototype.getLive2DModel=function(){return this.live2DModel};e.prototype.setLipSync=function(h){this.lipSync=h};e.prototype.setLipSyncValue=function(h){this.lipSyncValue=h};e.prototype.setAccel=function(h,p,l){this.accelX=h;this.accelY=p;this.accelZ=l};e.prototype.setDrag=function(h,p){this.dragX=h;this.dragY=p};e.prototype.getMainMotionManager=function(){return this.mainMotionManager};e.prototype.getExpressionManager=function(){return this.expressionManager};e.prototype.loadModelData=function(h,p){var l=G.getPlatformManager();this.debugMode&&l.log("Load model : "+h);var d=this;l.loadLive2DModel(h,function(h){if(d.live2DModel=h,d.live2DModel.saveParam(),0!=Live2D.getError())return void console.error("Error : Failed to loadModelData().");d.modelMatrix=new C(d.live2DModel.getCanvasWidth(),d.live2DModel.getCanvasHeight());d.modelMatrix.setWidth(2);d.modelMatrix.setCenterPosition(0,0);p(d.live2DModel)})};e.prototype.loadTexture=function(h,p,d){w++;var l=G.getPlatformManager();this.debugMode&&l.log("Load Texture : "+p);var k=this;l.loadTexture(this.live2DModel,h,p,function(){w--;0==w&&(k.isTexLoaded=!0);"function"==typeof d&&d()})};e.prototype.loadMotion=function(h,p,d){var l=G.getPlatformManager();this.debugMode&&l.log("Load Motion : "+p);var k=null,t=this;l.loadBytes(p,function(p){k=Live2DMotion.loadMotion(p);null!=h&&(t.motions[h]=k);d(k)})};e.prototype.loadExpression=function(h,p,d){var k=G.getPlatformManager();this.debugMode&&k.log("Load Expression : "+p);var t=this;k.loadBytes(p,function(p){null!=h&&(t.expressions[h]=l.loadJson(p));"function"==typeof d&&d()})};e.prototype.loadPose=function(h,p){var d=G.getPlatformManager();this.debugMode&&d.log("Load Pose : "+h);var l=this;try{d.loadBytes(h,function(h){l.pose=u.load(h);"function"==typeof p&&p()})}catch(ma){console.warn(ma)}};e.prototype.loadPhysics=function(h){var p=G.getPlatformManager();this.debugMode&&p.log("Load Physics : "+h);var d=this;try{p.loadBytes(h,function(h){d.physics=k.load(h)})}catch(ya){console.warn(ya)}};e.prototype.hitTestSimple=function(h,p,d){if(null===this.live2DModel)return!1;h=this.live2DModel.getDrawDataIndex(h);if(0>h)return!1;var l=this.live2DModel.getTransformedPoints(h);h=this.live2DModel.getCanvasWidth();for(var k=0,t=this.live2DModel.getCanvasHeight(),e=0,B=0;B<l.length;B+=2){var ta=l[B],u=l[B+1];ta<h&&(h=ta);ta>k&&(k=ta);u<t&&(t=u);u>e&&(e=u)}p=this.modelMatrix.invertTransformX(p);d=this.modelMatrix.invertTransformY(d);return h<=p&&p<=k&&t<=d&&d<=e};e.prototype.hitTestSimpleCustom=function(h,p,d,l){return null!==this.live2DModel&&d>=h[0]&&d<=p[0]&&l<=h[1]&&l>=p[1]};l.prototype=new AMotion;l.EXPRESSION_DEFAULT="DEFAULT";l.TYPE_SET=0;l.TYPE_ADD=1;l.TYPE_MULT=2;l.loadJson=function(h){var p=new l;h=G.getPlatformManager().jsonParseFromBytes(h);if(p.setFadeIn(0<parseInt(h.fade_in)?parseInt(h.fade_in):1E3),p.setFadeOut(0<parseInt(h.fade_out)?parseInt(h.fade_out):1E3),null==h.params)return p;h=h.params;var d=h.length;p.paramList=[];for(var k=0;k<d;k++){var e=h[k],B=e.id.toString(),u=parseFloat(e.val),w;w=null!=e.calc?e.calc.toString():"add";(w="add"===w?l.TYPE_ADD:"mult"===w?l.TYPE_MULT:"set"===w?l.TYPE_SET:l.TYPE_ADD)==l.TYPE_ADD?(e=null==e.def?0:parseFloat(e.def),u-=e):w==l.TYPE_MULT&&(e=null==e.def?1:parseFloat(e.def),0==e&&(e=1),u/=e);e=new t;e.id=B;e.type=w;e.value=u;p.paramList.push(e)}return p};l.prototype.updateParamExe=function(h,p,d,k){for(p=this.paramList.length-1;0<=p;--p)k=this.paramList[p],k.type==l.TYPE_ADD?h.addToParamFloat(k.id,k.value,d):k.type==l.TYPE_MULT?h.multParamFloat(k.id,k.value,d):k.type==l.TYPE_SET&&h.setParamFloat(k.id,k.value,d)};K.prototype.calcNextBlink=function(){return UtSystem.getUserTimeMSec()+Math.random()*(2*this.blinkIntervalMsec-1)};K.prototype.setInterval=function(h){this.blinkIntervalMsec=h};K.prototype.setEyeMotion=function(h,p,d){this.closingMotionMsec=h;this.closedMotionMsec=p;this.openingMotionMsec=d};K.prototype.updateParam=function(h){var p;p=UtSystem.getUserTimeMSec();var d;switch(this.eyeState){case ha.STATE_CLOSING:d=(p-this.stateStartTime)/this.closingMotionMsec;1<=d&&(d=1,this.eyeState=ha.STATE_CLOSED,this.stateStartTime=p);p=1-d;break;case ha.STATE_CLOSED:d=(p-this.stateStartTime)/this.closedMotionMsec;1<=d&&(this.eyeState=ha.STATE_OPENING,this.stateStartTime=p);p=0;break;case ha.STATE_OPENING:d=(p-this.stateStartTime)/this.openingMotionMsec;1<=d&&(d=1,this.eyeState=ha.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink());p=d;break;case ha.STATE_INTERVAL:this.nextBlinkTime<p&&(this.eyeState=ha.STATE_CLOSING,this.stateStartTime=p);p=1;break;default:this.eyeState=ha.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink(),p=1}this.closeIfZero||(p=-p);h.setParamFloat(this.eyeID_L,p);h.setParamFloat(this.eyeID_R,p)};var ha=function(){};ha.STATE_FIRST="STATE_FIRST";ha.STATE_INTERVAL="STATE_INTERVAL";ha.STATE_CLOSING="STATE_CLOSING";ha.STATE_CLOSED="STATE_CLOSED";ha.STATE_OPENING="STATE_OPENING";v.mul=function(h,d,k){var p,l,e,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=0;4>p;p++)for(l=0;4>l;l++)for(e=0;4>e;e++)t[p+4*l]+=h[p+4*e]*d[e+4*l];for(p=0;16>p;p++)k[p]=t[p]};v.prototype.identity=function(){for(var h=0;16>h;h++)this.tr[h]=0==h%5?1:0};v.prototype.getArray=function(){return this.tr};v.prototype.getCopyMatrix=function(){return new Float32Array(this.tr)};v.prototype.setMatrix=function(h){if(null!=this.tr&&this.tr.length==this.tr.length)for(var p=0;16>p;p++)this.tr[p]=h[p]};v.prototype.getScaleX=function(){return this.tr[0]};v.prototype.getScaleY=function(){return this.tr[5]};v.prototype.transformX=function(h){return this.tr[0]*h+this.tr[12]};v.prototype.transformY=function(h){return this.tr[5]*h+this.tr[13]};v.prototype.invertTransformX=function(h){return(h-this.tr[12])/this.tr[0]};v.prototype.invertTransformY=function(h){return(h-this.tr[13])/this.tr[5]};v.prototype.multTranslate=function(h,p){v.mul([1,0,0,0,0,1,0,0,0,0,1,0,h,p,0,1],this.tr,this.tr)};v.prototype.translate=function(h,p){this.tr[12]=h;this.tr[13]=p};v.prototype.translateX=function(h){this.tr[12]=h};v.prototype.translateY=function(h){this.tr[13]=h};v.prototype.multScale=function(h,p){v.mul([h,0,0,0,0,p,0,0,0,0,1,0,0,0,0,1],this.tr,this.tr)};v.prototype.scale=function(h,p){this.tr[0]=h;this.tr[5]=p};C.prototype=new v;C.prototype.setPosition=function(h,p){this.translate(h,p)};C.prototype.setCenterPosition=function(h,p){var d=this.width*this.getScaleX(),l=this.height*this.getScaleY();this.translate(h-d/2,p-l/2)};C.prototype.top=function(h){this.setY(h)};C.prototype.bottom=function(h){var d=this.height*this.getScaleY();this.translateY(h-d)};C.prototype.left=function(h){this.setX(h)};C.prototype.right=function(h){var d=this.width*this.getScaleX();this.translateX(h-d)};C.prototype.centerX=function(h){var d=this.width*this.getScaleX();this.translateX(h-d/2)};C.prototype.centerY=function(h){var d=this.height*this.getScaleY();this.translateY(h-d/2)};C.prototype.setX=function(h){this.translateX(h)};C.prototype.setY=function(h){this.translateY(h)};C.prototype.setHeight=function(h){h/=this.height;this.scale(h,-h)};C.prototype.setWidth=function(h){h/=this.width;this.scale(h,-h)};d.prototype=new MotionQueueManager;d.prototype.getCurrentPriority=function(){return this.currentPriority};d.prototype.getReservePriority=function(){return this.reservePriority};d.prototype.reserveMotion=function(h){return!(this.reservePriority>=h)&&!(this.currentPriority>=h)&&(this.reservePriority=h,!0)};d.prototype.setReservePriority=function(h){this.reservePriority=h};d.prototype.updateParam=function(h){h=MotionQueueManager.prototype.updateParam.call(this,h);return this.isFinished()&&(this.currentPriority=0),h};d.prototype.startMotionPrio=function(h,d){return d==this.reservePriority&&(this.reservePriority=0),this.currentPriority=d,this.startMotion(h,!1)};k.load=function(h){var d=new k;h=G.getPlatformManager().jsonParseFromBytes(h).physics_hair;for(var l=h.length,e=0;e<l;e++){var t=h[e],B=new PhysicsHair,u=t.setup,w=parseFloat(u.length),v=parseFloat(u.regist),u=parseFloat(u.mass);B.setup(w,v,u);for(var C=t.src,va=C.length,w=0;w<va;w++){var E=C[w],v=E.id,u=PhysicsHair.Src.SRC_TO_X,F=E.ptype;"x"===F?u=PhysicsHair.Src.SRC_TO_X:"y"===F?u=PhysicsHair.Src.SRC_TO_Y:"angle"===F?u=PhysicsHair.Src.SRC_TO_G_ANGLE:UtDebug.error("live2d","Invalid parameter:PhysicsHair.Src");F=parseFloat(E.scale);E=parseFloat(E.weight);B.addSrcParam(u,v,F,E)}t=t.targets;C=t.length;for(w=0;w<C;w++)va=t[w],v=va.id,u=PhysicsHair.Target.TARGET_FROM_ANGLE,F=va.ptype,"angle"===F?u=PhysicsHair.Target.TARGET_FROM_ANGLE:"angle_v"===F?u=PhysicsHair.Target.TARGET_FROM_ANGLE_V:UtDebug.error("live2d","Invalid parameter:PhysicsHair.Target"),F=parseFloat(va.scale),E=parseFloat(va.weight),B.addTargetParam(u,v,F,E);d.physicsList.push(B)}return d};k.prototype.updateParam=function(h){for(var d=UtSystem.getUserTimeMSec()-this.startTimeMSec,l=0;l<this.physicsList.length;l++)this.physicsList[l].update(h,d)};u.load=function(h){var d=new u;h=G.getPlatformManager().jsonParseFromBytes(h).parts_visible;for(var l=h.length,k=0;k<l;k++){for(var e=h[k].group,t=e.length,w=[],v=0;v<t;v++){var C=e[v],K=new B(C.id);if(w[v]=K,null!=C.link){var C=C.link,va=C.length;K.link=[];for(var E=0;E<va;E++){var F=new B(C[E]);K.link.push(F)}}}d.partsGroups.push(w)}return d};u.prototype.updateParam=function(h){if(null!=h){h!=this.lastModel&&this.initParam(h);this.lastModel=h;var d=UtSystem.getUserTimeMSec(),l=0==this.lastTime?0:(d-this.lastTime)/1E3;this.lastTime=d;0>l&&(l=0);for(d=0;d<this.partsGroups.length;d++)this.normalizePartsOpacityGroup(h,this.partsGroups[d],l),this.copyOpacityOtherParts(h,this.partsGroups[d])}};u.prototype.initParam=function(h){if(null!=h)for(var d=0;d<this.partsGroups.length;d++)for(var l=this.partsGroups[d],k=0;k<l.length;k++){l[k].initIndex(h);var e=l[k].partsIndex,t=l[k].paramIndex;if(!(0>e)){var u=0!=h.getParamFloat(t);if(h.setPartsOpacity(e,u?1:0),h.setParamFloat(t,u?1:0),null!=l[k].link)for(e=0;e<l[k].link.length;e++)l[k].link[e].initIndex(h)}}};u.prototype.normalizePartsOpacityGroup=function(h,d,l){for(var k=-1,e=1,p=0;p<d.length;p++){var t=d[p].partsIndex,u=d[p].paramIndex;if(!(0>t)&&0!=h.getParamFloat(u)){if(0<=k)break;k=p;e=h.getPartsOpacity(t);e+=l/.5;1<e&&(e=1)}}0>k&&(k=0,e=1);for(p=0;p<d.length;p++)t=d[p].partsIndex,0>t||(k==p?h.setPartsOpacity(t,e):(u=h.getPartsOpacity(t),l=.5>e?-.5*e/.5+1:.5*(1-e)/.5,.15<(1-l)*(1-e)&&(l=1-.15/(1-e)),u>l&&(u=l),h.setPartsOpacity(t,u)))};u.prototype.copyOpacityOtherParts=function(h,d){for(var l=0;l<d.length;l++){var k=d[l];if(null!=k.link&&!(0>k.partsIndex))for(var e=h.getPartsOpacity(k.partsIndex),p=0;p<k.link.length;p++){var t=k.link[p];0>t.partsIndex||h.setPartsOpacity(t.partsIndex,e)}}};B.prototype.initIndex=function(h){this.paramIndex=h.getParamIndex("VISIBLE:"+this.id);this.partsIndex=h.getPartsDataIndex(PartsDataID.getID(this.id));h.setParamFloat(this.paramIndex,1)};H.FRAME_RATE=30;H.prototype.setPoint=function(h,d){this.faceTargetX=h;this.faceTargetY=d};H.prototype.getX=function(){return this.faceX};H.prototype.getY=function(){return this.faceY};H.prototype.update=function(){var h=40/7.5/H.FRAME_RATE;if(0==this.lastTimeSec)return void(this.lastTimeSec=UtSystem.getUserTimeMSec());var d=UtSystem.getUserTimeMSec(),l=(d-this.lastTimeSec)*H.FRAME_RATE/1E3;this.lastTimeSec=d;var d=l*h/(.15*H.FRAME_RATE),k=this.faceTargetX-this.faceX,e=this.faceTargetY-this.faceY;Math.abs(k)<=this.EPSILON&&Math.abs(e)<=this.EPSILON||(l=Math.sqrt(k*k+e*e),k=h*k/l-this.faceVX,h=h*e/l-this.faceVY,e=Math.sqrt(k*k+h*h),(e<-d||e>d)&&(k*=d/e,h*=d/e),this.faceVX+=k,this.faceVY+=h,h=.5*(Math.sqrt(d*d+16*d*l-8*d*l)-d),d=Math.sqrt(this.faceVX*this.faceVX+this.faceVY*this.faceVY),d>h&&(this.faceVX*=h/d,this.faceVY*=h/d),this.faceX+=this.faceVX,this.faceY+=this.faceVY)};D.prototype=new v;D.prototype.getMaxScale=function(){return this.max};D.prototype.getMinScale=function(){return this.min};D.prototype.setMaxScale=function(h){this.max=h};D.prototype.setMinScale=function(h){this.min=h};D.prototype.isMaxScale=function(){return this.getScaleX()==this.max};D.prototype.isMinScale=function(){return this.getScaleX()==this.min};D.prototype.adjustTranslate=function(h,d){this.tr[0]*this.maxLeft+(this.tr[12]+h)>this.screenLeft&&(h=this.screenLeft-this.tr[0]*this.maxLeft-this.tr[12]);this.tr[0]*this.maxRight+(this.tr[12]+h)<this.screenRight&&(h=this.screenRight-this.tr[0]*this.maxRight-this.tr[12]);this.tr[5]*this.maxTop+(this.tr[13]+d)<this.screenTop&&(d=this.screenTop-this.tr[5]*this.maxTop-this.tr[13]);this.tr[5]*this.maxBottom+(this.tr[13]+d)>this.screenBottom&&(d=this.screenBottom-this.tr[5]*this.maxBottom-this.tr[13]);v.mul([1,0,0,0,0,1,0,0,0,0,1,0,h,d,0,1],this.tr,this.tr)};D.prototype.adjustScale=function(d,l,k){var h=k*this.tr[0];h<this.min?0<this.tr[0]&&(k=this.min/this.tr[0]):h>this.max&&0<this.tr[0]&&(k=this.max/this.tr[0]);h=[1,0,0,0,0,1,0,0,0,0,1,0,d,l,0,1];k=[k,0,0,0,0,k,0,0,0,0,1,0,0,0,0,1];v.mul([1,0,0,0,0,1,0,0,0,0,1,0,-d,-l,0,1],this.tr,this.tr);v.mul(k,this.tr,this.tr);v.mul(h,this.tr,this.tr)};D.prototype.setScreenRect=function(d,l,k,e){this.screenLeft=d;this.screenRight=l;this.screenTop=e;this.screenBottom=k};D.prototype.setMaxScreenRect=function(d,l,k,e){this.maxLeft=d;this.maxRight=l;this.maxTop=e;this.maxBottom=k};D.prototype.getScreenLeft=function(){return this.screenLeft};D.prototype.getScreenRight=function(){return this.screenRight};D.prototype.getScreenBottom=function(){return this.screenBottom};D.prototype.getScreenTop=function(){return this.screenTop};D.prototype.getMaxLeft=function(){return this.maxLeft};D.prototype.getMaxRight=function(){return this.maxRight};D.prototype.getMaxBottom=function(){return this.maxBottom};D.prototype.getMaxTop=function(){return this.maxTop};G.platformManager=null;G.getPlatformManager=function(){return G.platformManager};G.setPlatformManager=function(d){G.platformManager=d};T.exports={L2DTargetPoint:H,Live2DFramework:G,L2DViewMatrix:D,L2DPose:u,L2DPartsParam:B,L2DPhysics:k,L2DMotionManager:d,L2DModelMatrix:C,L2DMatrix44:v,EYE_STATE:ha,L2DEyeBlink:K,L2DExpressionParam:t,L2DExpressionMotion:l,L2DBaseModel:e}},function(T,L,O){T.exports={DEBUG_LOG:!1,DEBUG_MOUSE_LOG:!1,DEBUG_DRAW_HIT_AREA:!1,DEBUG_DRAW_ALPHA_MODEL:!1,VIEW_MAX_SCALE:2,VIEW_MIN_SCALE:.8,VIEW_LOGICAL_LEFT:-1,VIEW_LOGICAL_RIGHT:1,VIEW_LOGICAL_MAX_LEFT:-2,VIEW_LOGICAL_MAX_RIGHT:2,VIEW_LOGICAL_MAX_BOTTOM:-2,VIEW_LOGICAL_MAX_TOP:2,PRIORITY_NONE:0,PRIORITY_IDLE:1,PRIORITY_SLEEPY:2,PRIORITY_NORMAL:3,PRIORITY_FORCE:4,MOTION_GROUP_IDLE:"idle",MOTION_GROUP_SLEEPY:"sleepy",MOTION_GROUP_TAP_BODY:"tap_body",MOTION_GROUP_FLICK_HEAD:"flick_head",MOTION_GROUP_PINCH_IN:"pinch_in",MOTION_GROUP_PINCH_OUT:"pinch_out",MOTION_GROUP_SHAKE:"shake",HIT_AREA_HEAD:"head",HIT_AREA_BODY:"body"}},function(T,L,O){Object.defineProperty(L,"__esModule",{value:!0});L.setContext=function(l){e=l};L.getContext=function(){return e};var e=void 0},function(T,L,O){function e(){}e.matrixStack=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];e.depth=0;e.currentMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];e.tmp=Array(16);e.reset=function(){this.depth=0};e.loadIdentity=function(){for(var l=0;16>l;l++)this.currentMatrix[l]=0==l%5?1:0};e.push=function(){var l=(this.depth,16*(this.depth+1));this.matrixStack.length<l+16&&(this.matrixStack.length=l+16);for(var e=0;16>e;e++)this.matrixStack[l+e]=this.currentMatrix[e];this.depth++};e.pop=function(){0>--this.depth&&(myError("Invalid matrix stack."),this.depth=0);for(var l=16*this.depth,e=0;16>e;e++)this.currentMatrix[e]=this.matrixStack[l+e]};e.getMatrix=function(){return this.currentMatrix};e.multMatrix=function(l){var e,K,v;for(e=0;16>e;e++)this.tmp[e]=0;for(e=0;4>e;e++)for(K=0;4>K;K++)for(v=0;4>v;v++)this.tmp[e+4*K]+=this.currentMatrix[e+4*v]*l[v+4*K];for(e=0;16>e;e++)this.currentMatrix[e]=this.tmp[e]};T.exports=e},function(T,L,O){T.exports=O(5)},function(T,L,O){function e(d){return d&&d.__esModule?d:{"default":d}}function l(){p||(p=!0,function E(){a:{w["default"].reset();w["default"].loadIdentity();ma.update();h.setDrag(ma.getX(),ma.getY());ta.clear(ta.COLOR_BUFFER_BIT);w["default"].multMatrix(ua.getArray());w["default"].multMatrix(ea.getArray());w["default"].push();for(var d=0;d<h.numModels();d++){var e=h.getModel(d);if(null==e)break a;e.initialized&&!e.updating&&(e.update(),e.draw(ta))}w["default"].pop()}d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.Live2D.captureFrame&&(window.Live2D.captureFrame=!1,e=document.createElement("a"),document.body.appendChild(e),e.setAttribute("type","hidden"),e.href=ya.toDataURL(),e.download=window.Live2D.captureName||"live2d.png",e.click());d(E,ya)}())}function t(d,h){return d.x*h.x+d.y*h.y}function K(d,h){var e=Math.sqrt(d*d+h*h);return{x:d/e,y:h/e}}function v(d,h,e){function l(d,e){return 180*Math.acos(t({x:0,y:1},K(d,e)))/Math.PI}if(h.x<e.left+e.width&&h.y<e.top+e.height&&h.x>e.left&&h.y>e.top)return h;var k=d.x-h.x,p=d.y-h.y,u=l(k,p);h.x<d.x&&(u=360-u);h=360-l(e.left-d.x,-1*(e.top-d.y));var B=360-l(e.left-d.x,-1*(e.top+e.height-d.y)),w=l(e.left+e.width-d.x,-1*(e.top-d.y)),v=l(e.left+e.width-d.x,-1*(e.top+e.height-d.y)),k=p/k,p={};u<w?(e=e.top-d.y,p={y:d.y+e,x:d.x+e/k}):u<v?(e=e.left+e.width-d.x,p={y:d.y+e*k,x:d.x+e}):u<B?(e=e.top+e.height-d.y,p={y:d.y+e,x:d.x+e/k}):u<h?(e=d.x-e.left,p={y:d.y-e*k,x:d.x-e}):(e=e.top-d.y,p={y:d.y+e,x:d.x+e/k});return p}function C(d){I=!0;var e=ya.getBoundingClientRect();oa.transformX(d.clientX-e.left);oa.transformY(d.clientY-e.top);var h=v({x:e.left+e.width/2,y:e.top+e.height*Q},{x:d.clientX,y:d.clientY},e),k=B(h.x-e.left),e=H(h.y-e.top);G["default"].DEBUG_MOUSE_LOG&&console.log("onMouseMove device( x:"+d.clientX+" y:"+d.clientY+" ) view( x:"+k+" y:"+e+")");ma.setPoint(k,e)}function d(){G["default"].DEBUG_LOG&&console.log("Set Session Storage.");sessionStorage.setItem("Sleepy","1")}function k(e){if("mousewheel"!=e.type)if("mousedown"==e.type){I=!0;var k=ya.getBoundingClientRect();oa.transformX(e.clientX-k.left);oa.transformY(e.clientY-k.top);var l=v({x:k.left+k.width/2,y:k.top+k.height*Q},{x:e.clientX,y:e.clientY},k),p=B(l.x-k.left),k=H(l.y-k.top);G["default"].DEBUG_MOUSE_LOG&&console.log("onMouseDown device( x:"+e.clientX+" y:"+e.clientY+" ) view( x:"+p+" y:"+k+")");h.tapEvent(p,k)}else"mousemove"==e.type?("1"===sessionStorage.getItem("Sleepy")&&sessionStorage.setItem("Sleepy","0"),C(e)):"mouseup"!=e.type&&"mouseout"==e.type&&(G["default"].DEBUG_LOG&&console.log("Mouse out Window."),I&&(I=!1),ma.setPoint(0,0),e=sessionStorage.getItem("SleepyTimer"),window.clearTimeout(e),e=window.setTimeout(d,5E4),sessionStorage.setItem("SleepyTimer",e))}function u(d){var e=d.touches[0];if("touchstart"==d.type)1==d.touches.length&&C(e);else if("touchmove"==d.type){var h=ya.getBoundingClientRect();oa.transformX(e.clientX-h.left);oa.transformY(e.clientY-h.top);var k=v({x:h.left+h.width/2,y:h.top+h.height*Q},{x:e.clientX,y:e.clientY},h);d=B(k.x-h.left);h=H(k.y-h.top);G["default"].DEBUG_MOUSE_LOG&&console.log("onMouseMove device( x:"+e.clientX+" y:"+e.clientY+" ) view( x:"+d+" y:"+h+")");I&&ma.setPoint(d,h)}else"touchend"==d.type&&(I&&(I=!1),ma.setPoint(0,0))}function B(d){d=oa.transformX(d);return ea.invertTransformX(d)}function H(d){d=oa.transformY(d);return ea.invertTransformY(d)}O(6);var D=O(0);T=O(8);T=e(T);L=O(1);var G=e(L);L=O(3);var w=e(L),ha=O(2),h=(window.navigator.platform.toLowerCase(),new T["default"]),p=!1,ta=null,ya=null,ma=null,ea=null,ua=null,oa=null,I=!1,Q=.5;window.loadlive2d=function(d,e,p){Q=void 0===p?.5:p;ya=document.getElementById(d);ya.addEventListener&&(window.addEventListener("click",k),window.addEventListener("mousedown",k),window.addEventListener("mousemove",k),window.addEventListener("mouseup",k),document.addEventListener("mouseout",k),window.addEventListener("touchstart",u),window.addEventListener("touchend",u),window.addEventListener("touchmove",u));d=ya.width;p=ya.height;ma=new D.L2DTargetPoint;var t=p/d,B=G["default"].VIEW_LOGICAL_LEFT,w=G["default"].VIEW_LOGICAL_RIGHT,v=-t;window.Live2D.captureFrame=!1;ea=new D.L2DViewMatrix;ea.setScreenRect(B,w,v,t);ea.setMaxScreenRect(G["default"].VIEW_LOGICAL_MAX_LEFT,G["default"].VIEW_LOGICAL_MAX_RIGHT,G["default"].VIEW_LOGICAL_MAX_BOTTOM,G["default"].VIEW_LOGICAL_MAX_TOP);ea.setMaxScale(G["default"].VIEW_MAX_SCALE);ea.setMinScale(G["default"].VIEW_MIN_SCALE);ua=new D.L2DMatrix44;ua.multScale(1,d/p);oa=new D.L2DMatrix44;oa.multTranslate(-d/2,-p/2);oa.multScale(2/d,-2/d);var C;b:{d=["webgl","experimental-webgl","webkit-3d","moz-webgl"];for(p=0;p<d.length;p++)try{var K=ya.getContext(d[p],{premultipliedAlpha:!0});if(K){C=K;break b}}catch(ga){}C=null}(ta=C,(0,ha.setContext)(ta),ta)?(window.Live2D.setGL(ta),ta.clearColor(0,0,0,0),h.reloadFlg=!0,h.count++,h.changeModel(ta,e),l()):(console.error("Failed to create WebGL context."),window.WebGLRenderingContext&&console.error("Your browser don't support WebGL, check https://get.webgl.org/ for futher information."))}},function(T,L,O){(function(e){!function(){function l(){z||(this._$MT=null,this._$5S=null,this._$NP=0,l._$42++,this._$5S=new y(this))}function t(a){if(!z)for(this.clipContextList=[],this.glcontext=a.gl,this.dp_webgl=a,this.curFrameNo=0,this.firstError_clipInNotUpdate=!0,this.colorBuffer=0,this.isInitGLFBFunc=!1,this.tmpBoundsOnModel=new ea,r.glContext.length>r.frameBuffers.length&&(this.curFrameNo=this.getMaskRenderTexture()),this.tmpModelToViewMatrix=new pa,this.tmpMatrix2=new pa,this.tmpMatrixForMask=new pa,this.tmpMatrixForDraw=new pa,this.CHANNEL_COLORS=[],new va,a=new va,a.r=0,a.g=0,a.b=0,a.a=1,this.CHANNEL_COLORS.push(a),a=new va,a.r=1,a.g=0,a.b=0,a.a=0,this.CHANNEL_COLORS.push(a),a=new va,a.r=0,a.g=1,a.b=0,a.a=0,this.CHANNEL_COLORS.push(a),a=new va,a.r=0,a.g=0,a.b=1,a.a=0,this.CHANNEL_COLORS.push(a),a=0;a<this.CHANNEL_COLORS.length;a++)this.dp_webgl.setChannelFlagAsColor(a,this.CHANNEL_COLORS[a])}function K(a,b,c){this.clipIDList=c;this.clippingMaskDrawIndexList=[];for(var g=0;g<c.length;g++)this.clippingMaskDrawIndexList.push(b.getDrawDataIndex(c[g]));this.clippedDrawContextList=[];this.isUsing=!0;this.layoutChannelNo=0;this.layoutBounds=new ea;this.allClippedDrawRect=new ea;this.matrixForMask=new Float32Array(16);this.matrixForDraw=new Float32Array(16);this.owner=a}function v(a,b){this._$gP=a;this.drawDataIndex=b}function C(){z||(this.color=null)}function d(){z||(this._$dP=null,this._$eo=null,this._$V0=null,this._$dP=1E3,this._$eo=1E3,this._$V0=1,this._$a0())}function k(){}function u(){this._$0S=this._$r=null}function B(){z||(this.x=null,this.y=null,this.width=null,this.height=null)}function H(a){z||Ca.prototype.constructor.call(this,a)}function D(a){z||Ca.prototype.constructor.call(this,a)}function G(){z||(this._$vo=null,this._$F2=null,this._$ao=400,this._$1S=400,G._$42++)}function w(){z||(this.p1=new L,this.p2=new L,this._$Fo=0,this._$Db=0,this._$L2=0,this._$M2=0,this._$ks=0,this._$9b=0,this._$iP=0,this._$iT=0,this._$lL=[],this._$qP=[],this.setup(.3,.5,.1))}function L(){this._$p=1;this._$HL=this._$7L=this._$70=this._$s0=this.fy=this.fx=this.ay=this.ax=this.vy=this.vx=this.y=this.x=0}function h(a,b,c){this._$V0=this.scale=this._$wL=null;this._$wL=a;this.scale=b;this._$V0=c}function p(a,b,c,g){h.prototype.constructor.call(this,b,c,g);this._$tL=a}function O(a,b,c){this._$V0=this.scale=this._$wL=null;this._$wL=a;this.scale=b;this._$V0=c}function T(a,b,c,g){O.prototype.constructor.call(this,b,c,g);this._$YP=a}function ma(){z||(this._$fL=0,this._$gL=0,this._$B0=1,this._$z0=1,this._$qT=0,this.reflectX=!1,this.reflectY=!1)}function ea(){z||(this.x=null,this.y=null,this.width=null,this.height=null)}function ua(){}function oa(){z||(this.x=null,this.y=null)}function I(){z||(this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null,this.clipID=null,this.clipIDList=[])}function Q(){z||(this._$Eb=Q._$ps,this._$lT=1,this._$C0=1,this._$tT=1,this._$WL=1,this.culling=!1,this.matrix4x4=new Float32Array(16),this.premultipliedAlpha=!1,this.anisotropy=0,this.clippingProcess=Q.CLIPPING_PROCESS_NONE,this.clipBufPre_clipContextMask=null,this.clipBufPre_clipContextDraw=null,this.CHANNEL_COLORS=[])}function va(){z||(this.a=1,this.r=1,this.g=1,this.b=1,this.scale=1,this._$ho=1,this.blendMode=r.L2D_COLOR_BLEND_MODE_MULT)}function E(){z||(this._$kP=null,this._$dr=null,this._$Ai=!0,this._$mS=null)}function F(){}function ia(){z||(this._$VP=0,this._$wL=null,this._$GP=null,this._$8o=ia._$ds,this._$2r=-1,this._$O2=0,this._$ri=0)}function U(){}function wa(){z||(this._$Ob=null)}function pa(){this.m=new Float32Array(16);this.identity()}function ra(a){z||Ca.prototype.constructor.call(this,a)}function J(){z||(this._$7=1,this._$f=0,this._$H=0,this._$g=1,this._$k=0,this._$w=0,this._$hi=STATE_IDENTITY,this._$Z=_$pS)}function ga(){z||(d.prototype.constructor.call(this),this.motions=[],this._$7r=null,this._$7r=ga._$Co++,this._$D0=30,this._$yT=0,this._$E=!0,this.loopFadeIn=!0,this._$AS=-1,_$a0())}function Fa(){this._$P=new Float32Array(100);this.size=0}function P(){this._$RP=this._$I0=this._$4P=null}function R(){}function aa(){}function y(a){z||(this._$QT=!0,this._$co=-1,this._$qo=0,this._$pb=Array(y._$is),this._$_2=new Float32Array(y._$is),this._$vr=new Float32Array(y._$is),this._$Rr=new Float32Array(y._$is),this._$Or=new Float32Array(y._$is),this._$fs=new Float32Array(y._$is),this._$Js=Array(y._$is),this._$3S=[],this._$aS=[],this._$Bo=null,this._$F2=[],this._$db=[],this._$8b=[],this._$Hr=[],this._$Ws=null,this._$Vs=null,this._$Er=null,this._$Es=new Int16Array(R._$Qb),this._$ZP=new Float32Array(2*R._$1r),this._$Ri=a,this._$b0=y._$HP++,this.clipManager=null,this.dp_webgl=null)}function La(){}function Oa(){z||(this._$12=null,this._$bb=null,this._$_L=null,this._$jo=null,this._$iL=null,this._$0L=null,this._$Br=null,this._$Dr=null,this._$Cb=null,this._$mr=null,this._$_L=Aa.STATE_FIRST,this._$Br=4E3,this._$Dr=100,this._$Cb=50,this._$mr=150,this._$jo=!0,this._$iL="PARAM_EYE_L_OPEN",this._$0L="PARAM_EYE_R_OPEN")}function V(){z||(Q.prototype.constructor.call(this),this._$sb=new Int32Array(V._$As),this._$U2=[],this.transform=null,this.gl=null,null==V._$NT&&(V._$NT=V._$9r(256),V._$vS=V._$9r(256),V._$no=V._$vb(256)))}function ca(){z||(E.prototype.constructor.call(this),this._$GS=null,this._$Y0=null)}function Va(a){na.prototype.constructor.call(this,a);this._$8r=E._$ur;this._$Wr=this._$Yr=null}function M(){z||(I.prototype.constructor.call(this),this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null)}function Ga(){z||(this._$NL=null,this._$3S=null,this._$aS=null,Ga._$42++)}function la(){z||(l.prototype.constructor.call(this),this._$zo=new V)}function X(){z||(d.prototype.constructor.call(this),this.motions=[],this._$o2=null,this._$7r=X._$Co++,this._$D0=30,this._$yT=0,this._$E=!1,this.loopFadeIn=!0,this._$rr=-1,this._$eP=0)}function za(a,b){return String.fromCharCode(a.getUint8(b))}function Fa(){this._$P=new Float32Array(100);this.size=0}function P(){this._$RP=this._$I0=this._$4P=null}function sa(){z||(E.prototype.constructor.call(this),this._$o=0,this._$A=0,this._$GS=null,this._$Eo=null)}function Wa(a){na.prototype.constructor.call(this,a);this._$8r=E._$ur;this._$hr=this._$Cr=null}function ka(){z||(this.visible=!0,this._$g0=!1,this._$NL=null,this._$3S=null,this._$aS=null,ka._$42++)}function Pa(a){this._$VS=null;this._$e0=a}function Ca(a){z||(this.id=a)}function Ha(){z||(this._$4S=null)}function fa(a,b){this.canvas=a;this.context=b;this.viewport=[0,0,a.width,a.height];this._$6r=1;this._$xP=0;this._$3r=1;this._$uP=0;this._$Qo=-1;this.cacheImages={}}function Ia(){z||(this._$TT=null,this._$LT=null,this._$FS=null,this._$wL=null)}function na(a){z||(this._$e0=null,this._$IP=null,this._$JS=!1,this._$AT=!0,this._$e0=a,this.totalScale=1,this._$7s=1,this.totalOpacity=1)}function r(){}function Ra(){}function Ba(a){z||(this._$ib=a)}function S(){z||(M.prototype.constructor.call(this),this._$LP=-1,this._$d0=0,this._$Yo=0,this._$JP=null,this._$5P=null,this._$BP=null,this._$Eo=null,this._$Qi=null,this._$6s=S._$ms,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=S._$42++)}function Qa(a){Ma.prototype.constructor.call(this,a);this._$8r=M._$ur;this._$hr=this._$Cr=null}function Sa(){z||(this.x=null,this.y=null)}function Z(a){z||(l.prototype.constructor.call(this),this.drawParamWebGL=new Y(a),this.drawParamWebGL.setGL(r.getGL(a)))}function Ea(){z||(this.motions=null,this._$eb=!1,this.motions=[])}function Ja(){this._$w0=null;this._$AT=!0;this._$9L=!1;this._$Do=this._$bs=this._$z2=-1;this._$sr=Ja._$Gs++}function qa(){this.m=[1,0,0,0,1,0,0,0,1]}function ba(a){z||Ca.prototype.constructor.call(this,a)}function Y(a){z||(Q.prototype.constructor.call(this),this.textures=[],this.transform=null,this.gl=null,this.glno=a,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$As=32,this._$Gr=!1,this._$NT=null,this._$vS=null,this._$no=null,this.vertShader=null,this.fragShader=null,this.vertShaderOff=null,this.fragShaderOff=null)}function Ka(a,b,c){return null==b&&(b=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,c,a.DYNAMIC_DRAW),b}function Ta(a,b,c){return null==b&&(b=a.createBuffer()),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b),a.bufferData(a.ELEMENT_ARRAY_BUFFER,c,a.DYNAMIC_DRAW),b}function ja(a){z||(this._$P=new Int8Array(8),this._$R0=new DataView(this._$P.buffer),this._$3i=new Int8Array(1E3),this._$hL=0,this._$v0=0,this._$S2=0,this._$Ko=[],this._$T=a,this._$F=0)}function da(){}function Ma(a){z||(this._$e0=null,this._$IP=null,this._$Us=null,this._$7s=null,this._$IS=[!1],this._$VS=null,this._$AT=!0,this.baseOpacity=1,this.clipBufPre_clipContext=null,this._$e0=a)}function W(){}var z=!0;l._$0s=1;l._$4s=2;l._$42=0;l._$62=function(a,b){try{if(b instanceof ArrayBuffer&&(b=new DataView(b)),!(b instanceof DataView))throw new Ba("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var c,g=new ja(b),f=g._$ST(),q=g._$ST(),A=g._$ST();if(109!=f||111!=q||99!=A)throw new Ba("_$gi _$C _$li , _$Q0 _$P0.");if(c=g._$ST(),g._$gr(c),c>aa._$T7)throw a._$NP|=l._$4s,new Ba("_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+aa._$T7+" \x3c _$f0 : "+c+" )@_$SS#loadModel()\n");var n=g._$nP();if(c>=aa._$s7){var x=g._$9T(),d=g._$9T();if(-30584!=x||-30584!=d)throw a._$NP|=l._$0s,new Ba("_$gi _$C _$li , _$0 _$6 _$Ui.");}a._$KS(n);var e=a.getModelContext();e.setDrawParam(a.getDrawParam());e.init()}catch(Ya){k._$Rb(Ya)}};l.prototype._$KS=function(a){this._$MT=a};l.prototype.getModelImpl=function(){return null==this._$MT&&(this._$MT=new G,this._$MT._$zP()),this._$MT};l.prototype.getCanvasWidth=function(){return null==this._$MT?0:this._$MT.getCanvasWidth()};l.prototype.getCanvasHeight=function(){return null==this._$MT?0:this._$MT.getCanvasHeight()};l.prototype.getParamFloat=function(a){return"number"!=typeof a&&(a=this._$5S.getParamIndex(D.getID(a))),this._$5S.getParamFloat(a)};l.prototype.setParamFloat=function(a,b,c){"number"!=typeof a&&(a=this._$5S.getParamIndex(D.getID(a)));3>arguments.length&&(c=1);this._$5S.setParamFloat(a,this._$5S.getParamFloat(a)*(1-c)+b*c)};l.prototype.addToParamFloat=function(a,b,c){"number"!=typeof a&&(a=this._$5S.getParamIndex(D.getID(a)));3>arguments.length&&(c=1);this._$5S.setParamFloat(a,this._$5S.getParamFloat(a)+b*c)};l.prototype.multParamFloat=function(a,b,c){"number"!=typeof a&&(a=this._$5S.getParamIndex(D.getID(a)));3>arguments.length&&(c=1);this._$5S.setParamFloat(a,this._$5S.getParamFloat(a)*(1+(b-1)*c))};l.prototype.getParamIndex=function(a){return this._$5S.getParamIndex(D.getID(a))};l.prototype.loadParam=function(){this._$5S.loadParam()};l.prototype.saveParam=function(){this._$5S.saveParam()};l.prototype.init=function(){this._$5S.init()};l.prototype.update=function(){this._$5S.update()};l.prototype._$Rs=function(){return k._$li("_$60 _$PT _$Rs()"),-1};l.prototype._$Ds=function(a){k._$li("_$60 _$PT _$SS#_$Ds() \n")};l.prototype._$K2=function(){};l.prototype.draw=function(){};l.prototype.getModelContext=function(){return this._$5S};l.prototype._$s2=function(){return this._$NP};l.prototype._$P7=function(a,b,c,g){var f=-1,q=0;if(0!=c)if(1==a.length){var A=a[0];a=0!=this.getParamFloat(A);var n=b[0];b=this.getPartsOpacity(n);c/=g;a?1<(b+=c)&&(b=1):0>(b-=c)&&(b=0);this.setPartsOpacity(n,b)}else{for(var x=0;x<a.length;x++)if(A=a[x],A=0!=this.getParamFloat(A)){if(0<=f)break;f=x;n=b[x];q=this.getPartsOpacity(n);q+=c/g;1<q&&(q=1)}0>f&&(console.log("No _$wi _$q0/ _$U default[%s]",a[0]),f=0,q=1,this.loadParam(),this.setParamFloat(a[f],q),this.saveParam());for(x=0;x<a.length;x++)n=b[x],f==x?this.setPartsOpacity(n,q):(g=this.getPartsOpacity(n),c=.5>q?-.5*q/.5+1:.5*(1-q)/.5,.15<(1-c)*(1-q)&&(c=1-.15/(1-q)),g>c&&(g=c),this.setPartsOpacity(n,g))}else for(x=0;x<a.length;x++)A=a[x],n=b[x],A=0!=this.getParamFloat(A),this.setPartsOpacity(n,A?1:0)};l.prototype.setPartsOpacity=function(a,b){"number"!=typeof a&&(a=this._$5S.getPartsDataIndex(H.getID(a)));this._$5S.setPartsOpacity(a,b)};l.prototype.getPartsDataIndex=function(a){return a instanceof H||(a=H.getID(a)),this._$5S.getPartsDataIndex(a)};l.prototype.getPartsOpacity=function(a){return"number"!=typeof a&&(a=this._$5S.getPartsDataIndex(H.getID(a))),0>a?0:this._$5S.getPartsOpacity(a)};l.prototype.getDrawParam=function(){};l.prototype.getDrawDataIndex=function(a){return this._$5S.getDrawDataIndex(ra.getID(a))};l.prototype.getDrawData=function(a){return this._$5S.getDrawData(a)};l.prototype.getTransformedPoints=function(a){a=this._$5S._$C2(a);return a instanceof Qa?a.getTransformedPoints():null};l.prototype.getIndexArray=function(a){if(0>a||a>=this._$5S._$aS.length)return null;a=this._$5S._$aS[a];return null!=a&&a.getType()==M._$wb&&a instanceof S?a.getIndexArray():null};t.CHANNEL_COUNT=4;t.RENDER_TEXTURE_USE_MIPMAP=!1;t.NOT_USED_FRAME=-100;t.prototype._$L7=function(){if(this.tmpModelToViewMatrix&&(this.tmpModelToViewMatrix=null),this.tmpMatrix2&&(this.tmpMatrix2=null),this.tmpMatrixForMask&&(this.tmpMatrixForMask=null),this.tmpMatrixForDraw&&(this.tmpMatrixForDraw=null),this.tmpBoundsOnModel&&(this.tmpBoundsOnModel=null),this.CHANNEL_COLORS){for(var a=this.CHANNEL_COLORS.length-1;0<=a;--a)this.CHANNEL_COLORS.splice(a,1);this.CHANNEL_COLORS=[]}this.releaseShader()};t.prototype.releaseShader=function(){for(var a=r.frameBuffers.length,b=0;b<a;b++)this.gl.deleteFramebuffer(r.frameBuffers[b].framebuffer);r.frameBuffers=[];r.glContext=[]};t.prototype.init=function(a,b,c){for(var g=0;g<b.length;g++){var f=b[g].getClipIDList();if(null!=f){var q=this.findSameClip(f);null==q&&(q=new K(this,a,f),this.clipContextList.push(q));var f=b[g].getDrawDataID(),A=a.getDrawDataIndex(f);q.addClippedDrawData(f,A);c[g].clipBufPre_clipContext=q}}};t.prototype.getMaskRenderTexture=function(){var a=null;return a=this.dp_webgl.createFramebuffer(),r.frameBuffers[this.dp_webgl.glno]=a,this.dp_webgl.glno};t.prototype.setupClip=function(a,b){for(var c=0,g=0;g<this.clipContextList.length;g++){var f=this.clipContextList[g];this.calcClippedDrawTotalBounds(a,f);f.isUsing&&c++}if(0<c){var q=b.gl.getParameter(b.gl.FRAMEBUFFER_BINDING),A=Array(4);A[0]=0;A[1]=0;A[2]=b.gl.canvas.width;A[3]=b.gl.canvas.height;b.gl.viewport(0,0,r.clippingMaskBufferSize,r.clippingMaskBufferSize);this.setupLayoutBounds(c);b.gl.bindFramebuffer(b.gl.FRAMEBUFFER,r.frameBuffers[this.curFrameNo].framebuffer);b.gl.clearColor(0,0,0,0);b.gl.clear(b.gl.COLOR_BUFFER_BIT);for(g=0;g<this.clipContextList.length;g++){var f=this.clipContextList[g],n=f.allClippedDrawRect,c=(f.layoutChannelNo,f.layoutBounds);this.tmpBoundsOnModel._$jL(n);this.tmpBoundsOnModel.expand(.05*n.width,.05*n.height);var n=c.width/this.tmpBoundsOnModel.width,x=c.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity();this.tmpMatrix2.translate(-1,-1,0);this.tmpMatrix2.scale(2,2,1);this.tmpMatrix2.translate(c.x,c.y,0);this.tmpMatrix2.scale(n,x,1);this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0);this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m);this.tmpMatrix2.identity();this.tmpMatrix2.translate(c.x,c.y,0);this.tmpMatrix2.scale(n,x,1);this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0);this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);n=this.tmpMatrixForMask.getArray();for(c=0;16>c;c++)f.matrixForMask[c]=n[c];n=this.tmpMatrixForDraw.getArray();for(c=0;16>c;c++)f.matrixForDraw[c]=n[c];c=f.clippingMaskDrawIndexList.length;for(n=0;n<c;n++){var d=f.clippingMaskDrawIndexList[n],x=a.getDrawData(d),d=a._$C2(d);b.setClipBufPre_clipContextForMask(f);x.draw(b,a,d)}}b.gl.bindFramebuffer(b.gl.FRAMEBUFFER,q);b.setClipBufPre_clipContextForMask(null);b.gl.viewport(A[0],A[1],A[2],A[3])}};t.prototype.getColorBuffer=function(){return this.colorBuffer};t.prototype.findSameClip=function(a){for(var b=0;b<this.clipContextList.length;b++){var c=this.clipContextList[b],g=c.clipIDList.length;if(g==a.length){for(var f=0,q=0;q<g;q++)for(var A=c.clipIDList[q],n=0;n<g;n++)if(a[n]==A){f++;break}if(f==g)return c}}return null};t.prototype.calcClippedDrawTotalBounds=function(a,b){for(var c=a._$Ri.getModelImpl().getCanvasWidth(),g=a._$Ri.getModelImpl().getCanvasHeight(),f=g=c=c>g?c:g,q=0,A=0,n=b.clippedDrawContextList.length,x=0;x<n;x++){var d=a._$C2(b.clippedDrawContextList[x].drawDataIndex);if(d._$yo()){for(var e=d.getTransformedPoints(),h=e.length,k=[],d=[],l=0,p=R._$i2;p<h;p+=R._$No)k[l]=e[p],d[l]=e[p+1],l++;e=Math.min.apply(null,k);h=Math.min.apply(null,d);k=Math.max.apply(null,k);d=Math.max.apply(null,d);e<g&&(g=e);h<f&&(f=h);k>q&&(q=k);d>A&&(A=d)}}g==c?(b.allClippedDrawRect.x=0,b.allClippedDrawRect.y=0,b.allClippedDrawRect.width=0,b.allClippedDrawRect.height=0,b.isUsing=!1):(b.allClippedDrawRect.x=g,b.allClippedDrawRect.y=f,b.allClippedDrawRect.width=q-g,b.allClippedDrawRect.height=A-f,b.isUsing=!0)};t.prototype.setupLayoutBounds=function(a){var b=a/t.CHANNEL_COUNT;a%=t.CHANNEL_COUNT;b=~~b;a=~~a;for(var c=0,g=0;g<t.CHANNEL_COUNT;g++){var f=b+(g<a?1:0);if(0!=f)if(1==f){var q=this.clipContextList[c++];q.layoutChannelNo=g;q.layoutBounds.x=0;q.layoutBounds.y=0;q.layoutBounds.width=1;q.layoutBounds.height=1}else if(2==f)for(var A=0;A<f;A++){var n=A%2,x,n=~~n,q=this.clipContextList[c++];q.layoutChannelNo=g;q.layoutBounds.x=.5*n;q.layoutBounds.y=0;q.layoutBounds.width=.5;q.layoutBounds.height=1}else if(4>=f)for(A=0;A<f;A++)n=A%2,x=A/2,n=~~n,x=~~x,q=this.clipContextList[c++],q.layoutChannelNo=g,q.layoutBounds.x=.5*n,q.layoutBounds.y=.5*x,q.layoutBounds.width=.5,q.layoutBounds.height=.5;else if(9>=f)for(A=0;A<f;A++)n=A%3,x=A/3,n=~~n,x=~~x,q=this.clipContextList[c++],q.layoutChannelNo=g,q.layoutBounds.x=n/3,q.layoutBounds.y=x/3,q.layoutBounds.width=1/3,q.layoutBounds.height=1/3;else k._$li("_$6 _$0P mask count : %d",f)}};K.prototype.addClippedDrawData=function(a,b){var c=new v(a,b);this.clippedDrawContextList.push(c)};d._$JT=function(a,b,c){a/=b;c/=b;b=1-(1-c)*(1-c);var g=1-(1-c)*(1-c);b=1/3*(1-c)*b+(2/3*c+1/3*(1-c))*(1-b);c=(c+2/3*(1-c))*g+(1/3*c+2/3*(1-c))*(1-g);if(0>=a)return 0;if(1<=a)return 1;g=a*a;return(1-3*c+3*b-0)*a*g+(3*c-6*b+0)*g+(3*b-0)*a+0};d.prototype._$a0=function(){};d.prototype.setFadeIn=function(a){this._$dP=a};d.prototype.setFadeOut=function(a){this._$eo=a};d.prototype._$pT=function(a){this._$V0=a};d.prototype.getFadeOut=function(){return this._$eo};d.prototype._$4T=function(){return this._$eo};d.prototype._$mT=function(){return this._$V0};d.prototype.getDurationMSec=function(){return-1};d.prototype.getLoopDurationMSec=function(){return-1};d.prototype.updateParam=function(a,b){if(b._$AT&&!b._$9L){var c=F.getUserTimeMSec();if(0>b._$z2){b._$z2=c;b._$bs=c;var g=this.getDurationMSec();0>b._$Do&&(b._$Do=0>=g?-1:b._$z2+g)}g=this._$V0;g=g*(0==this._$dP?1:Ra._$r2((c-b._$bs)/this._$dP))*(0==this._$eo||0>b._$Do?1:Ra._$r2((b._$Do-c)/this._$eo));0<=g&&1>=g||console.log("### assert!! ### ");this.updateParamExe(a,c,g,b);0<b._$Do&&b._$Do<c&&(b._$9L=!0)}};d.prototype.updateParamExe=function(a,b,c,g){};k._$8s=0;k._$fT={};k.start=function(a){var b=k._$fT[a];null==b&&(b=new u,b._$r=a,k._$fT[a]=b);b._$0S=F.getSystemTimeMSec()};k.dump=function(a){var b=k._$fT[a];return null!=b?(b=F.getSystemTimeMSec()-b._$0S,console.log(a+" : "+b+"ms"),b):-1};k.end=function(a){a=k._$fT[a];return null!=a?F.getSystemTimeMSec()-a._$0S:-1};k._$li=function(a,b){console.log("_$li : "+a+"\n",b)};k._$Ji=function(a,b){console.log(a,b)};k._$dL=function(a,b){console.log(a,b);console.log("\n")};k._$KL=function(a,b){for(var c=0;c<b;c++)0==c%16&&0<c?console.log("\n"):0==c%8&&0<c&&console.log("  "),console.log("%02X ",255&a[c]);console.log("\n")};k._$nr=function(a,b,c){console.log("%s\n",a);a=b.length;for(var g=0;g<a;++g)console.log("%5d",b[g]),console.log("%s\n",c),console.log(",");console.log("\n")};k._$Rb=function(a){console.log("dump exception : "+a);console.log("stack :: "+a.stack)};B.prototype._$8P=function(){return.5*(this.x+this.x+this.width)};B.prototype._$6P=function(){return.5*(this.y+this.y+this.height)};B.prototype._$EL=function(){return this.x+this.width};B.prototype._$5T=function(){return this.y+this.height};B.prototype._$jL=function(a,b,c,g){this.x=a;this.y=b;this.width=c;this.height=g};B.prototype._$jL=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};H.prototype=new Ca;H._$tP={};H._$27=function(){H._$tP.clear()};H.getID=function(a){var b=H._$tP[a];return null==b&&(b=new H(a),H._$tP[a]=b),b};H.prototype._$3s=function(){return new H};D.prototype=new Ca;D._$tP={};D._$27=function(){D._$tP.clear()};D.getID=function(a){var b=D._$tP[a];return null==b&&(b=new D(a),D._$tP[a]=b),b};D.prototype._$3s=function(){return new D};G._$42=0;G.prototype._$zP=function(){null==this._$vo&&(this._$vo=new Ha);null==this._$F2&&(this._$F2=[])};G.prototype.getCanvasWidth=function(){return this._$ao};G.prototype.getCanvasHeight=function(){return this._$1S};G.prototype._$F0=function(a){this._$vo=a._$nP();this._$F2=a._$nP();this._$ao=a._$6L();this._$1S=a._$6L()};G.prototype._$6S=function(a){this._$F2.push(a)};G.prototype._$Xr=function(){return this._$F2};G.prototype._$E2=function(){return this._$vo};w.prototype.setup=function(a,b,c){this._$ks=this._$Yb();this.p2._$xT();3==arguments.length&&(this._$Fo=a,this._$L2=b,this.p1._$p=c,this.p2._$p=c,this.p2.y=a,this.setup())};w.prototype.getPhysicsPoint1=function(){return this.p1};w.prototype.getPhysicsPoint2=function(){return this.p2};w.prototype._$qr=function(){return this._$Db};w.prototype._$pr=function(a){this._$Db=a};w.prototype._$5r=function(){return this._$M2};w.prototype._$Cs=function(){return this._$9b};w.prototype._$Yb=function(){return-180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI};w.prototype.addSrcParam=function(a,b,c,g){a=new p(a,b,c,g);this._$lL.push(a)};w.prototype.addTargetParam=function(a,b,c,g){a=new T(a,b,c,g);this._$qP.push(a)};w.prototype.update=function(a,b){if(0==this._$iP)return this._$iP=this._$iT=b,void(this._$Fo=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));var c=(b-this._$iT)/1E3;if(0!=c){for(var g=this._$lL.length-1;0<=g;--g)this._$lL[g]._$oP(a,this);this._$oo(a,c);this._$M2=this._$Yb();this._$9b=(this._$M2-this._$ks)/c;this._$ks=this._$M2}for(g=this._$qP.length-1;0<=g;--g)this._$qP[g]._$YS(a,this);this._$iT=b};w.prototype._$oo=function(a,b){.033>b&&(b=.033);var c=1/b;this.p1.vx=(this.p1.x-this.p1._$s0)*c;this.p1.vy=(this.p1.y-this.p1._$70)*c;this.p1.ax=(this.p1.vx-this.p1._$7L)*c;this.p1.ay=(this.p1.vy-this.p1._$HL)*c;this.p1.fx=this.p1.ax*this.p1._$p;this.p1.fy=this.p1.ay*this.p1._$p;this.p1._$xT();var g=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),f=Math.cos(g),q=Math.sin(g),g=9.8*this.p2._$p*Math.cos(g-this._$Db*da._$bS),A=-this.p1.fy*q*f,n=-this.p2.vy*this._$L2;this.p2.fx=g*q+-this.p1.fx*q*q+-this.p2.vx*this._$L2;this.p2.fy=g*f+A+n;this.p2.ax=this.p2.fx/this.p2._$p;this.p2.ay=this.p2.fy/this.p2._$p;this.p2.vx+=this.p2.ax*b;this.p2.vy+=this.p2.ay*b;this.p2.x+=this.p2.vx*b;this.p2.y+=this.p2.vy*b;f=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/f;this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/f;this.p2.vx=(this.p2.x-this.p2._$s0)*c;this.p2.vy=(this.p2.y-this.p2._$70)*c;this.p2._$xT()};L.prototype._$xT=function(){this._$s0=this.x;this._$70=this.y;this._$7L=this.vx;this._$HL=this.vy};h.prototype._$oP=function(a,b){};p.prototype=new h;p.prototype._$oP=function(a,b){var c=this.scale*a.getParamFloat(this._$wL),g=b.getPhysicsPoint1();switch(this._$tL){default:case w.Src.SRC_TO_X:g.x+=(c-g.x)*this._$V0;break;case w.Src.SRC_TO_Y:g.y+=(c-g.y)*this._$V0;break;case w.Src.SRC_TO_G_ANGLE:g=b._$qr(),g+=(c-g)*this._$V0,b._$pr(g)}};O.prototype._$YS=function(a,b){};T.prototype=new O;T.prototype._$YS=function(a,b){switch(this._$YP){default:case w.Target.TARGET_FROM_ANGLE:a.setParamFloat(this._$wL,this.scale*b._$5r(),this._$V0);break;case w.Target.TARGET_FROM_ANGLE_V:a.setParamFloat(this._$wL,this.scale*b._$Cs(),this._$V0)}};w.Src=function(){};w.Src.SRC_TO_X="SRC_TO_X";w.Src.SRC_TO_Y="SRC_TO_Y";w.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE";w.Target=function(){};w.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE";w.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V";ma.prototype.init=function(a){this._$fL=a._$fL;this._$gL=a._$gL;this._$B0=a._$B0;this._$z0=a._$z0;this._$qT=a._$qT;this.reflectX=a.reflectX;this.reflectY=a.reflectY};ma.prototype._$F0=function(a){this._$fL=a._$_T();this._$gL=a._$_T();this._$B0=a._$_T();this._$z0=a._$_T();this._$qT=a._$_T();a.getFormatVersion()>=aa.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=a._$po(),this.reflectY=a._$po())};ma.prototype._$e=function(){};var Ua=function(){};Ua._$ni=function(a,b,c,g,f,q,A,n,x){var d=A*q-n*f;if(0==d)return null;var e,d=((a-c)*q-(b-g)*f)/d;return e=0!=f?(a-c-d*A)/f:(b-g-d*n)/q,isNaN(e)&&(e=(a-c-d*A)/f,isNaN(e)&&(e=(b-g-d*n)/q),isNaN(e)&&(console.log("a is NaN @UtVector#_$ni() "),console.log("v1x : "+f),console.log("v1x !\x3d 0 ? "+(0!=f)))),null==x?[e,d]:(x[0]=e,x[1]=d,x)};ea.prototype._$8P=function(){return this.x+.5*this.width};ea.prototype._$6P=function(){return this.y+.5*this.height};ea.prototype._$EL=function(){return this.x+this.width};ea.prototype._$5T=function(){return this.y+this.height};ea.prototype._$jL=function(a,b,c,g){this.x=a;this.y=b;this.width=c;this.height=g};ea.prototype._$jL=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};ea.prototype.contains=function(a,b){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height};ea.prototype.expand=function(a,b){this.x-=a;this.y-=b;this.width+=2*a;this.height+=2*b};ua._$Z2=function(a,b,c,g){var f=b._$Q2(a,c);c=a._$vs();a=a._$Tr();if(b._$zr(c,a,f),0>=f)return g[c[0]];if(1==f)return f=g[c[0]],b=g[c[1]],g=a[0],f+(b-f)*g|0;if(2==f){f=g[c[0]];b=g[c[1]];var q=g[c[2]],A=g[c[3]];g=a[0];c=a[1];f=f+(b-f)*g|0;return f+((q+(A-q)*g|0)-f)*c|0}if(3==f){var f=g[c[0]],q=g[c[1]],n=g[c[2]],A=g[c[3]],x=g[c[4]],d=g[c[5]],e=g[c[6]],h=g[c[7]];g=a[0];c=a[1];b=a[2];f=f+(q-f)*g|0;q=x+(d-x)*g|0;f=f+((n+(A-n)*g|0)-f)*c|0;return f+((q+((e+(h-e)*g|0)-q)*c|0)-f)*b|0}if(4==f){var f=g[c[0]],k=g[c[1]],l=g[c[2]],p=g[c[3]],n=g[c[4]],r=g[c[5]],d=g[c[6]],h=g[c[7]],x=g[c[8]],u=g[c[9]],q=g[c[10]],t=g[c[11]],e=g[c[12]],B=g[c[13]],A=g[c[14]],w=g[c[15]];g=a[0];c=a[1];b=a[2];a=a[3];f=f+(k-f)*g|0;n=n+(r-n)*g|0;x=x+(u-x)*g|0;e=e+(B-e)*g|0;f=f+((l+(p-l)*g|0)-f)*c|0;q=x+((q+(t-q)*g|0)-x)*c|0;f=f+((n+((d+(h-d)*g|0)-n)*c|0)-f)*b|0;g=q+((e+((A+(w-A)*g|0)-e)*c|0)-q)*b|0;return f+(g-f)*a|0}b=1<<f;A=new Float32Array(b);for(n=0;n<b;n++){d=n;h=1;for(q=0;q<f;q++)h*=0==d%2?1-a[q]:a[q],d/=2;A[n]=h}a=new Float32Array(b);for(f=0;f<b;f++)a[f]=g[c[f]];for(f=g=0;f<b;f++)g+=A[f]*a[f];return g+.5|0};ua._$br=function(a,b,c,g){var f=b._$Q2(a,c);c=a._$vs();a=a._$Tr();if(b._$zr(c,a,f),0>=f)return g[c[0]];if(1==f){b=g[c[0]];var q=g[c[1]];g=a[0];return b+(q-b)*g}if(2==f){b=g[c[0]];var q=g[c[1]],f=g[c[2]],A=g[c[3]];g=a[0];c=a[1];return(1-c)*(b+(q-b)*g)+c*(f+(A-f)*g)}if(3==f){var q=g[c[0]],f=g[c[1]],A=g[c[2]],n=g[c[3]],d=g[c[4]],e=g[c[5]],h=g[c[6]],k=g[c[7]];g=a[0];c=a[1];b=a[2];return(1-b)*((1-c)*(q+(f-q)*g)+c*(A+(n-A)*g))+b*((1-c)*(d+(e-d)*g)+c*(h+(k-h)*g))}if(4==f){var q=g[c[0]],f=g[c[1]],A=g[c[2]],n=g[c[3]],d=g[c[4]],e=g[c[5]],h=g[c[6]],k=g[c[7]],l=g[c[8]],p=g[c[9]],r=g[c[10]],u=g[c[11]],t=g[c[12]],B=g[c[13]],w=g[c[14]],v=g[c[15]];g=a[0];c=a[1];b=a[2];a=a[3];return(1-a)*((1-b)*((1-c)*(q+(f-q)*g)+c*(A+(n-A)*g))+b*((1-c)*(d+(e-d)*g)+c*(h+(k-h)*g)))+a*((1-b)*((1-c)*(l+(p-l)*g)+c*(r+(u-r)*g))+b*((1-c)*(t+(B-t)*g)+c*(w+(v-w)*g)))}b=1<<f;q=new Float32Array(b);for(A=0;A<b;A++){n=A;d=1;for(e=0;e<f;e++)d*=0==n%2?1-a[e]:a[e],n/=2;q[A]=d}a=new Float32Array(b);for(f=0;f<b;f++)a[f]=g[c[f]];for(f=g=0;f<b;f++)g+=q[f]*a[f];return g};ua._$Vr=function(a,b,c,g,f,q,d,n){var x=b._$Q2(a,c);c=a._$vs();a=a._$Tr();b._$zr(c,a,x);b=2*g;g=d;if(0>=x){var e=f[c[0]];if(2==n&&0==d)F._$jT(e,0,q,0,b);else for(f=0;f<b;)q[g]=e[f++],q[g+1]=e[f++],g+=n}else if(1==x)for(e=f[c[0]],x=f[c[1]],c=a[0],a=1-c,f=0;f<b;)q[g]=e[f]*a+x[f]*c,++f,q[g+1]=e[f]*a+x[f]*c,++f,g+=n;else if(2==x){var e=f[c[0]],x=f[c[1]],A=f[c[2]],h=f[c[3]];c=a[0];f=a[1];a=1-c;d=1-f;var k=d*a;d*=c;a*=f;c*=f;for(f=0;f<b;)q[g]=k*e[f]+d*x[f]+a*A[f]+c*h[f],++f,q[g+1]=k*e[f]+d*x[f]+a*A[f]+c*h[f],++f,g+=n}else if(3==x){var A=f[c[0]],h=f[c[1]],k=f[c[2]],l=f[c[3]],p=f[c[4]],r=f[c[5]],u=f[c[6]],t=f[c[7]];c=a[0];f=a[1];e=a[2];a=1-c;d=1-f;var x=1-e,B=x*d*a,w=x*d*c,v=x*f*a,x=x*f*c,C=e*d*a;d=e*d*c;a*=e*f;c*=e*f;for(f=0;f<b;)q[g]=B*A[f]+w*h[f]+v*k[f]+x*l[f]+C*p[f]+d*r[f]+a*u[f]+c*t[f],++f,q[g+1]=B*A[f]+w*h[f]+v*k[f]+x*l[f]+C*p[f]+d*r[f]+a*u[f]+c*t[f],++f,g+=n}else if(4==x){var A=f[c[0]],h=f[c[1]],k=f[c[2]],l=f[c[3]],p=f[c[4]],r=f[c[5]],u=f[c[6]],t=f[c[7]],B=f[c[8]],w=f[c[9]],v=f[c[10]],C=f[c[11]],y=f[c[12]],K=f[c[13]],xa=f[c[14]],D=f[c[15]];c=a[0];f=a[1];var e=a[2],Da=a[3];a=1-c;d=1-f;var x=1-e,N=1-Da,H=N*x*d*a,J=N*x*d*c,E=N*x*f*a,G=N*x*f*c,z=N*e*d*a,I=N*e*d*c,L=N*e*f*a,N=N*e*f*c,M=Da*x*d*a,O=Da*x*d*c,P=Da*x*f*a,x=Da*x*f*c,Q=Da*e*d*a;d=Da*e*d*c;a*=Da*e*f;c*=Da*e*f;for(f=0;f<b;)q[g]=H*A[f]+J*h[f]+E*k[f]+G*l[f]+z*p[f]+I*r[f]+L*u[f]+N*t[f]+M*B[f]+O*w[f]+P*v[f]+x*C[f]+Q*y[f]+d*K[f]+a*xa[f]+c*D[f],++f,q[g+1]=H*A[f]+J*h[f]+E*k[f]+G*l[f]+z*p[f]+I*r[f]+L*u[f]+N*t[f]+M*B[f]+O*w[f]+P*v[f]+x*C[f]+Q*y[f]+d*K[f]+a*xa[f]+c*D[f],++f,g+=n}else{d=1<<x;e=new Float32Array(d);for(A=0;A<d;A++){h=A;k=1;for(l=0;l<x;l++)k*=0==h%2?1-a[l]:a[l],h/=2;e[A]=k}a=new Float32Array(d);for(x=0;x<d;x++)a[x]=f[c[x]];for(f=0;f<b;){A=c=0;h=f+1;for(x=0;x<d;x++)c+=e[x]*a[x][f],A+=e[x]*a[x][h];f+=2;q[g]=c;q[g+1]=A;g+=n}}};oa.prototype._$HT=function(a,b){this.x=a;this.y=b};oa.prototype._$HT=function(a){this.x=a.x;this.y=a.y};I._$ur=-2;I._$ES=500;I._$wb=2;I._$8S=3;I._$52=I._$ES;I._$R2=I._$ES;I._$or=function(){return I._$52};I._$Pr=function(){return I._$R2};I.prototype.convertClipIDForV2_11=function(a){var b=[];return null==a?null:0==a.length?null:/,/.test(a)?a.id.split(","):(b.push(a.id),b)};I.prototype._$F0=function(a){this._$gP=a._$nP();this._$dr=a._$nP();this._$GS=a._$nP();this._$qb=a._$6L();this._$Lb=a._$cS();this._$mS=a._$Tb();a.getFormatVersion()>=aa._$T7?(this.clipID=a._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=[];this._$MS(this._$Lb)};I.prototype.getClipIDList=function(){return this.clipIDList};I.prototype.init=function(a){};I.prototype._$Nr=function(a,b){if((b._$IS[0]=!1,b._$Us=ua._$Z2(a,this._$GS,b._$IS,this._$Lb),r._$Zs)||!b._$IS[0])b._$7s=ua._$br(a,this._$GS,b._$IS,this._$mS)};I.prototype._$2b=function(a,b){};I.prototype.getDrawDataID=function(){return this._$gP};I.prototype._$j2=function(a){this._$gP=a};I.prototype.getOpacity=function(a,b){return b._$7s};I.prototype._$zS=function(a,b){return b._$Us};I.prototype._$MS=function(a){for(var b=a.length-1;0<=b;--b){var c=a[b];c<I._$52?I._$52=c:c>I._$R2&&(I._$R2=c)}};I.prototype.getTargetBaseDataID=function(){return this._$dr};I.prototype._$gs=function(a){this._$dr=a};I.prototype._$32=function(){return null!=this._$dr&&this._$dr!=ba._$2o()};I.prototype.preDraw=function(a,b,c){};I.prototype.draw=function(a,b,c){};I.prototype.getType=function(){};I.prototype._$B2=function(a,b,c){};Q._$ps=32;Q.CLIPPING_PROCESS_NONE=0;Q.CLIPPING_PROCESS_OVERWRITE_ALPHA=1;Q.CLIPPING_PROCESS_MULTIPLY_ALPHA=2;Q.CLIPPING_PROCESS_DRAW=3;Q.CLIPPING_PROCESS_CLEAR_ALPHA=4;Q.prototype.setChannelFlagAsColor=function(a,b){this.CHANNEL_COLORS[a]=b};Q.prototype.getChannelFlagAsColor=function(a){return this.CHANNEL_COLORS[a]};Q.prototype._$ZT=function(){};Q.prototype._$Uo=function(a,b,c,g,f,q,d){};Q.prototype._$Rs=function(){return-1};Q.prototype._$Ds=function(a){};Q.prototype.setBaseColor=function(a,b,c,g){0>a?a=0:1<a&&(a=1);0>b?b=0:1<b&&(b=1);0>c?c=0:1<c&&(c=1);0>g?g=0:1<g&&(g=1);this._$lT=a;this._$C0=b;this._$tT=c;this._$WL=g};Q.prototype._$WP=function(a){this.culling=a};Q.prototype.setMatrix=function(a){for(var b=0;16>b;b++)this.matrix4x4[b]=a[b]};Q.prototype._$IT=function(){return this.matrix4x4};Q.prototype.setPremultipliedAlpha=function(a){this.premultipliedAlpha=a};Q.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha};Q.prototype.setAnisotropy=function(a){this.anisotropy=a};Q.prototype.getAnisotropy=function(){return this.anisotropy};Q.prototype.getClippingProcess=function(){return this.clippingProcess};Q.prototype.setClippingProcess=function(a){this.clippingProcess=a};Q.prototype.setClipBufPre_clipContextForMask=function(a){this.clipBufPre_clipContextMask=a};Q.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask};Q.prototype.setClipBufPre_clipContextForDraw=function(a){this.clipBufPre_clipContextDraw=a};Q.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw};E._$ur=-2;E._$c2=1;E._$_b=2;E.prototype._$F0=function(a){this._$kP=a._$nP();this._$dr=a._$nP()};E.prototype.readV2_opacity=function(a){a.getFormatVersion()>=aa.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$mS=a._$Tb())};E.prototype.init=function(a){};E.prototype._$Nr=function(a,b){};E.prototype.interpolateOpacity=function(a,b,c,g){null==this._$mS?c.setInterpolatedOpacity(1):c.setInterpolatedOpacity(ua._$br(a,b,g,this._$mS))};E.prototype._$2b=function(a,b){};E.prototype._$nb=function(a,b,c,g,f,q,d){};E.prototype.getType=function(){};E.prototype._$gs=function(a){this._$dr=a};E.prototype._$a2=function(a){this._$kP=a};E.prototype.getTargetBaseDataID=function(){return this._$dr};E.prototype.getBaseDataID=function(){return this._$kP};E.prototype._$32=function(){return null!=this._$dr&&this._$dr!=ba._$2o()};F._$W2=0;F._$CS=F._$W2;F._$Mo=function(){return!0};F._$XP=function(a){try{for(var b=getTimeMSec();getTimeMSec()-b<a;);}catch(c){c._$Rb()}};F.getUserTimeMSec=function(){return F._$CS==F._$W2?F.getSystemTimeMSec():F._$CS};F.setUserTimeMSec=function(a){F._$CS=a};F.updateUserTimeMSec=function(){return F._$CS=F.getSystemTimeMSec()};F.getTimeMSec=function(){return(new Date).getTime()};F.getSystemTimeMSec=function(){return(new Date).getTime()};F._$Q=function(a){};F._$jT=function(a,b,c,g,f){for(var q=0;q<f;q++)c[g+q]=a[b+q]};ia._$ds=-2;ia.prototype._$F0=function(a){this._$wL=a._$nP();this._$VP=a._$6L();this._$GP=a._$nP()};ia.prototype.getParamIndex=function(a){return this._$2r!=a&&(this._$8o=ia._$ds),this._$8o};ia.prototype._$Pb=function(a,b){this._$8o=a;this._$2r=b};ia.prototype.getParamID=function(){return this._$wL};ia.prototype._$yP=function(a){this._$wL=a};ia.prototype._$N2=function(){return this._$VP};ia.prototype._$d2=function(){return this._$GP};ia.prototype._$t2=function(a,b){this._$VP=a;this._$GP=b};ia.prototype._$Lr=function(){return this._$O2};ia.prototype._$wr=function(a){this._$O2=a};ia.prototype._$SL=function(){return this._$ri};ia.prototype._$AL=function(a){this._$ri=a};U.startsWith=function(a,b,c){var g=b+c.length;if(g>=a.length)return!1;for(var f=b;f<g;f++)if(U.getChar(a,f)!=c.charAt(f-b))return!1;return!0};U.getChar=function(a,b){return String.fromCharCode(a.getUint8(b))};U.createString=function(a,b,c){for(var g=new ArrayBuffer(2*c),g=new Uint16Array(g),f=0;f<c;f++)g[f]=a.getUint8(b+f);return String.fromCharCode.apply(null,g)};U._$LS=function(a,b,c,g){a instanceof ArrayBuffer&&(a=new DataView(a));var f=!1,q=!1,d=0;"-"==U.getChar(a,c)&&(f=!0,c++);for(var n=!1;c<b;c++){switch(U.getChar(a,c)){case "0":d*=10;break;case "1":d=10*d+1;break;case "2":d=10*d+2;break;case "3":d=10*d+3;break;case "4":d=10*d+4;break;case "5":d=10*d+5;break;case "6":d=10*d+6;break;case "7":d=10*d+7;break;case "8":d=10*d+8;break;case "9":d=10*d+9;break;case ".":q=!0;c++;n=!0;break;default:n=!0}if(n)break}if(q)for(q=.1,n=!1;c<b;c++){switch(U.getChar(a,c)){case "0":break;case "1":d+=1*q;break;case "2":d+=2*q;break;case "3":d+=3*q;break;case "4":d+=4*q;break;case "5":d+=5*q;break;case "6":d+=6*q;break;case "7":d+=7*q;break;case "8":d+=8*q;break;case "9":d+=9*q;break;default:n=!0}if(q*=.1,n)break}return f&&(d=-d),g[0]=c,d};wa.prototype._$zP=function(){this._$Ob=[]};wa.prototype._$F0=function(a){this._$Ob=a._$nP()};wa.prototype._$Ur=function(a){if(a._$WS())return!0;for(var b=a._$v2(),c=this._$Ob.length-1;0<=c;--c){var g=this._$Ob[c].getParamIndex(b);if(g==ia._$ds&&(g=a.getParamIndex(this._$Ob[c].getParamID())),a._$Xb(g))return!0}return!1};wa.prototype._$Q2=function(a,b){for(var c,g,f=this._$Ob.length,q=a._$v2(),d=0,n=0;n<f;n++){var e=this._$Ob[n];if(c=e.getParamIndex(q),c==ia._$ds&&(c=a.getParamIndex(e.getParamID()),e._$Pb(c,q)),0>c)throw new Exception("err 23242 : "+e.getParamID());var h=0>c?0:a.getParamFloat(c);g=e._$N2();var k,l,p=e._$d2(),r=-1,u=0;if(!(1>g))if(1==g)k=p[0],k-R._$J<h&&h<k+R._$J?(r=0,u=0):(r=0,b[0]=!0);else if(k=p[0],h<k-R._$J)r=0,b[0]=!0;else if(h<k+R._$J)r=0;else{for(var t=!1,B=1;B<g;++B){if(l=p[B],h<l+R._$J){l-R._$J<h?r=B:(r=B-1,u=(h-k)/(l-k),d++);t=!0;break}k=l}t||(r=g-1,u=0,b[0]=!0)}e._$wr(r);e._$AL(u)}return d};wa.prototype._$zr=function(a,b,c){c=1<<c;c+1>R._$Qb&&console.log("err 23245\n");for(var g=this._$Ob.length,f=1,q=1,d=0,n=0;n<c;++n)a[n]=0;for(var e=0;e<g;++e){var h=this._$Ob[e];if(0==h._$SL()){var k=h._$Lr()*f;if(0>k&&r._$3T)throw new Exception("err 23246");for(n=0;n<c;++n)a[n]+=k}else{for(var k=f*h._$Lr(),l=f*(h._$Lr()+1),n=0;n<c;++n)a[n]+=0==(n/q|0)%2?k:l;b[d++]=h._$SL();q*=2}f*=h._$N2()}a[c]=65535;b[d]=-1};wa.prototype._$h2=function(a,b,c){for(var g=new Float32Array(b),f=0;f<b;++f)g[f]=c[f];c=new ia;c._$yP(a);c._$t2(b,g);this._$Ob.push(c)};wa.prototype._$J2=function(a){for(var b=this._$Ob.length,c=0;c<b;++c){var g=this._$Ob[c],f=g._$N2(),q=a%g._$N2(),d=g._$d2()[q];console.log("%s[%d]\x3d%7.2f / ",g.getParamID(),q,d);a/=f}console.log("\n")};wa.prototype.getParamCount=function(){return this._$Ob.length};wa.prototype._$zs=function(){return this._$Ob};pa.prototype.identity=function(){for(var a=0;16>a;a++)this.m[a]=0==a%5?1:0};pa.prototype.getArray=function(){return this.m};pa.prototype.getCopyMatrix=function(){return new Float32Array(this.m)};pa.prototype.setMatrix=function(a){if(null!=a&&16==a.length)for(var b=0;16>b;b++)this.m[b]=a[b]};pa.prototype.mult=function(a,b,c){return null==b?null:(this==b?this.mult_safe(this.m,a.m,b.m,c):this.mult_fast(this.m,a.m,b.m,c),b)};pa.prototype.mult_safe=function(a,b,c,g){if(a==c){var f=Array(16);this.mult_fast(a,b,f,g);for(a=15;0<=a;--a)c[a]=f[a]}else this.mult_fast(a,b,c,g)};pa.prototype.mult_fast=function(a,b,c,g){g?(c[0]=a[0]*b[0]+a[4]*b[1]+a[8]*b[2],c[4]=a[0]*b[4]+a[4]*b[5]+a[8]*b[6],c[8]=a[0]*b[8]+a[4]*b[9]+a[8]*b[10],c[12]=a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12],c[1]=a[1]*b[0]+a[5]*b[1]+a[9]*b[2],c[5]=a[1]*b[4]+a[5]*b[5]+a[9]*b[6],c[9]=a[1]*b[8]+a[5]*b[9]+a[9]*b[10],c[13]=a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13],c[2]=a[2]*b[0]+a[6]*b[1]+a[10]*b[2],c[6]=a[2]*b[4]+a[6]*b[5]+a[10]*b[6],c[10]=a[2]*b[8]+a[6]*b[9]+a[10]*b[10],c[14]=a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14],c[3]=c[7]=c[11]=0,c[15]=1):(c[0]=a[0]*b[0]+a[4]*b[1]+a[8]*b[2]+a[12]*b[3],c[4]=a[0]*b[4]+a[4]*b[5]+a[8]*b[6]+a[12]*b[7],c[8]=a[0]*b[8]+a[4]*b[9]+a[8]*b[10]+a[12]*b[11],c[12]=a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12]*b[15],c[1]=a[1]*b[0]+a[5]*b[1]+a[9]*b[2]+a[13]*b[3],c[5]=a[1]*b[4]+a[5]*b[5]+a[9]*b[6]+a[13]*b[7],c[9]=a[1]*b[8]+a[5]*b[9]+a[9]*b[10]+a[13]*b[11],c[13]=a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13]*b[15],c[2]=a[2]*b[0]+a[6]*b[1]+a[10]*b[2]+a[14]*b[3],c[6]=a[2]*b[4]+a[6]*b[5]+a[10]*b[6]+a[14]*b[7],c[10]=a[2]*b[8]+a[6]*b[9]+a[10]*b[10]+a[14]*b[11],c[14]=a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14]*b[15],c[3]=a[3]*b[0]+a[7]*b[1]+a[11]*b[2]+a[15]*b[3],c[7]=a[3]*b[4]+a[7]*b[5]+a[11]*b[6]+a[15]*b[7],c[11]=a[3]*b[8]+a[7]*b[9]+a[11]*b[10]+a[15]*b[11],c[15]=a[3]*b[12]+a[7]*b[13]+a[11]*b[14]+a[15]*b[15])};pa.prototype.translate=function(a,b,c){this.m[12]=this.m[0]*a+this.m[4]*b+this.m[8]*c+this.m[12];this.m[13]=this.m[1]*a+this.m[5]*b+this.m[9]*c+this.m[13];this.m[14]=this.m[2]*a+this.m[6]*b+this.m[10]*c+this.m[14];this.m[15]=this.m[3]*a+this.m[7]*b+this.m[11]*c+this.m[15]};pa.prototype.scale=function(a,b,c){this.m[0]*=a;this.m[4]*=b;this.m[8]*=c;this.m[1]*=a;this.m[5]*=b;this.m[9]*=c;this.m[2]*=a;this.m[6]*=b;this.m[10]*=c;this.m[3]*=a;this.m[7]*=b;this.m[11]*=c};pa.prototype.rotateX=function(a){var b=da.fcos(a);a=da._$9(a);var c=this.m[4];this.m[4]=c*b+this.m[8]*a;this.m[8]=c*-a+this.m[8]*b;c=this.m[5];this.m[5]=c*b+this.m[9]*a;this.m[9]=c*-a+this.m[9]*b;c=this.m[6];this.m[6]=c*b+this.m[10]*a;this.m[10]=c*-a+this.m[10]*b;c=this.m[7];this.m[7]=c*b+this.m[11]*a;this.m[11]=c*-a+this.m[11]*b};pa.prototype.rotateY=function(a){var b=da.fcos(a);a=da._$9(a);var c=this.m[0];this.m[0]=c*b+this.m[8]*-a;this.m[8]=c*a+this.m[8]*b;c=this.m[1];this.m[1]=c*b+this.m[9]*-a;this.m[9]=c*a+this.m[9]*b;c=m[2];this.m[2]=c*b+this.m[10]*-a;this.m[10]=c*a+this.m[10]*b;c=m[3];this.m[3]=c*b+this.m[11]*-a;this.m[11]=c*a+this.m[11]*b};pa.prototype.rotateZ=function(a){var b=da.fcos(a);a=da._$9(a);var c=this.m[0];this.m[0]=c*b+this.m[4]*a;this.m[4]=c*-a+this.m[4]*b;c=this.m[1];this.m[1]=c*b+this.m[5]*a;this.m[5]=c*-a+this.m[5]*b;c=this.m[2];this.m[2]=c*b+this.m[6]*a;this.m[6]=c*-a+this.m[6]*b;c=this.m[3];this.m[3]=c*b+this.m[7]*a;this.m[7]=c*-a+this.m[7]*b};ra.prototype=new Ca;ra._$tP={};ra._$27=function(){ra._$tP.clear()};ra.getID=function(a){var b=ra._$tP[a];return null==b&&(b=new ra(a),ra._$tP[a]=b),b};ra.prototype._$3s=function(){return new ra};J._$kS=-1;J._$pS=0;J._$hb=1;J.STATE_IDENTITY=0;J._$gb=1;J._$fo=2;J._$go=4;J.prototype.transform=function(a,b,c){var g,f,q,d,n,e,h=0,k=0;switch(this._$hi){case J._$go|J._$fo|J._$gb:g=this._$7;f=this._$H;q=this._$k;d=this._$f;n=this._$g;for(e=this._$w;0<=--c;){var l=a[h++],p=a[h++];b[k++]=g*l+f*p+q;b[k++]=d*l+n*p+e}break;case J._$go|J._$fo:g=this._$7;f=this._$H;d=this._$f;for(n=this._$g;0<=--c;)l=a[h++],p=a[h++],b[k++]=g*l+f*p,b[k++]=d*l+n*p;break;case J._$go|J._$gb:f=this._$H;q=this._$k;d=this._$f;for(e=this._$w;0<=--c;)l=a[h++],b[k++]=f*a[h++]+q,b[k++]=d*l+e;break;case J._$go:f=this._$H;for(d=this._$f;0<=--c;)l=a[h++],b[k++]=f*a[h++],b[k++]=d*l;break;case J._$fo|J._$gb:g=this._$7;q=this._$k;n=this._$g;for(e=this._$w;0<=--c;)b[k++]=g*a[h++]+q,b[k++]=n*a[h++]+e;break;case J._$fo:g=this._$7;for(n=this._$g;0<=--c;)b[k++]=g*a[h++],b[k++]=n*a[h++];break;case J._$gb:q=this._$k;for(e=this._$w;0<=--c;)b[k++]=a[h++]+q,b[k++]=a[h++]+e;break;case J.STATE_IDENTITY:return void(a==b&&h==k||F._$jT(a,h,b,k,2*c))}};J.prototype.update=function(){0==this._$H&&0==this._$f?1==this._$7&&1==this._$g?0==this._$k&&0==this._$w?(this._$hi=J.STATE_IDENTITY,this._$Z=J._$pS):(this._$hi=J._$gb,this._$Z=J._$hb):0==this._$k&&0==this._$w?(this._$hi=J._$fo,this._$Z=J._$kS):(this._$hi=J._$fo|J._$gb,this._$Z=J._$kS):0==this._$7&&0==this._$g?0==this._$k&&0==this._$w?(this._$hi=J._$go,this._$Z=J._$kS):(this._$hi=J._$go|J._$gb,this._$Z=J._$kS):0==this._$k&&0==this._$w?(this._$hi=J._$go|J._$fo,this._$Z=J._$kS):(this._$hi=J._$go|J._$fo|J._$gb,this._$Z=J._$kS)};J.prototype._$RT=function(a){this._$IT(a);var b=a[0],c=a[2],g=a[1],f=a[3],q=Math.sqrt(b*b+g*g),d=b*f-c*g;0==q?r._$so&&console.log("affine._$RT() / rt\x3d\x3d0"):(a[0]=q,a[1]=d/q,a[2]=(g*f+b*c)/d,a[3]=Math.atan2(g,b))};J.prototype._$ho=function(a,b,c,g){var f=new Float32Array(6),q=new Float32Array(6);a._$RT(f);b._$RT(q);a=new Float32Array(6);a[0]=f[0]+(q[0]-f[0])*c;a[1]=f[1]+(q[1]-f[1])*c;a[2]=f[2]+(q[2]-f[2])*c;a[3]=f[3]+(q[3]-f[3])*c;a[4]=f[4]+(q[4]-f[4])*c;a[5]=f[5]+(q[5]-f[5])*c;g._$CT(a)};J.prototype._$CT=function(a){var b=Math.cos(a[3]),c=Math.sin(a[3]);this._$7=a[0]*b;this._$f=a[0]*c;this._$H=a[1]*(a[2]*b-c);this._$g=a[1]*(a[2]*c+b);this._$k=a[4];this._$w=a[5];this.update()};J.prototype._$IT=function(a){a[0]=this._$7;a[1]=this._$f;a[2]=this._$H;a[3]=this._$g;a[4]=this._$k;a[5]=this._$w};ga.prototype=new d;ga._$cs="VISIBLE:";ga._$ar="LAYOUT:";ga._$Co=0;ga._$D2=[];ga._$1T=1;ga.loadMotion=function(a){for(var b=new ga,c=[0],g=a.length,f=b._$yT=0;f<g;++f){var q=255&a[f];if("\n"!=q&&"\r"!=q)if("#"!=q)if("$"!=q){if("a"<=q&&"z">=q||"A"<=q&&"Z">=q||"_"==q){for(var d=f,e=-1;f<g&&"\r"!=(q=255&a[f])&&"\n"!=q;++f)if("\x3d"==q){e=f;break}if(0<=e){var x=new P;U.startsWith(a,d,ga._$cs)?(x._$RP=P._$hs,x._$4P=new String(a,d,e-d)):U.startsWith(a,d,ga._$ar)?(x._$4P=new String(a,d+7,e-d-7),U.startsWith(a,d+7,"ANCHOR_X")?x._$RP=P._$xs:U.startsWith(a,d+7,"ANCHOR_Y")?x._$RP=P._$us:U.startsWith(a,d+7,"SCALE_X")?x._$RP=P._$qs:U.startsWith(a,d+7,"SCALE_Y")?x._$RP=P._$Ys:U.startsWith(a,d+7,"X")?x._$RP=P._$ws:U.startsWith(a,d+7,"Y")&&(x._$RP=P._$Ns)):(x._$RP=P._$Fr,x._$4P=new String(a,d,e-d));b.motions.push(x);d=0;ga._$D2.clear();for(f=e+1;f<g&&"\r"!=(q=255&a[f])&&"\n"!=q;++f)if(","!=q&&" "!=q&&"\t"!=q&&(e=U._$LS(a,g,f,c),0<c[0])){ga._$D2.push(e);d++;e=c[0];if(e<f){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\n");break}f=e}x._$I0=ga._$D2._$BL();d>b._$yT&&(b._$yT=d)}}}else{d=f;for(e=-1;f<g&&"\r"!=(q=255&a[f])&&"\n"!=q;++f)if("\x3d"==q){e=f;break}x=!1;if(0<=e)for(e==d+4&&"f"==a[d+1]&&"p"==a[d+2]&&"s"==a[d+3]&&(x=!0),f=e+1;f<g&&"\r"!=(q=255&a[f])&&"\n"!=q;++f)","!=q&&" "!=q&&"\t"!=q&&(e=U._$LS(a,g,f,c),0<c[0]&&x&&5<e&&121>e&&(b._$D0=e),f=c[0]);for(;f<g&&"\n"!=a[f]&&"\r"!=a[f];++f);}else for(;f<g&&"\n"!=a[f]&&"\r"!=a[f];++f);}return b._$AS=1E3*b._$yT/b._$D0|0,b};ga.prototype.getDurationMSec=function(){return this._$AS};ga.prototype.dump=function(){for(var a=0;a<this.motions.length;a++){var b=this.motions[a];console.log("_$wL[%s] [%d]. ",b._$4P,b._$I0.length);for(var c=0;c<b._$I0.length&&10>c;c++)console.log("%5.2f ,",b._$I0[c]);console.log("\n")}};ga.prototype.updateParamExe=function(a,b,c,g){for(var f=(b-g._$z2)*this._$D0/1E3,d=0|f,f=f-d,e=0;e<this.motions.length;e++){var n=this.motions[e],x=n._$I0.length,h=n._$4P;if(n._$RP==P._$hs)a.setParamFloat(h,n._$I0[d>=x?x-1:d]);else if(!(P._$ws<=n._$RP&&n._$RP<=P._$Ys)){var k=a.getParamFloat(h),l=n._$I0[d>=x?x-1:d];a.setParamFloat(h,k+(l+(n._$I0[d+1>=x?x-1:d+1]-l)*f-k)*c)}}d>=this._$yT&&(this._$E?(g._$z2=b,this.loopFadeIn&&(g._$bs=b)):g._$9L=!0)};ga.prototype._$r0=function(){return this._$E};ga.prototype._$aL=function(a){this._$E=a};ga.prototype.isLoopFadeIn=function(){return this.loopFadeIn};ga.prototype.setLoopFadeIn=function(a){this.loopFadeIn=a};Fa.prototype.clear=function(){this.size=0};Fa.prototype.add=function(a){if(this._$P.length<=this.size){var b=new Float32Array(2*this.size);F._$jT(this._$P,0,b,0,this.size);this._$P=b}this._$P[this.size++]=a};Fa.prototype._$BL=function(){var a=new Float32Array(this.size);return F._$jT(this._$P,0,a,0,this.size),a};P._$Fr=0;P._$hs=1;P._$ws=100;P._$Ns=101;P._$xs=102;P._$us=103;P._$qs=104;P._$Ys=105;R._$Ms=1;R._$Qs=2;R._$i2=0;R._$No=2;R._$do=R._$Ms;R._$Ls=!0;R._$1r=5;R._$Qb=65;R._$J=1E-4;R._$FT=.001;R._$Ss=3;aa._$o7=6;aa._$S7=7;aa._$s7=8;aa._$77=9;aa.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10;aa.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11;aa._$T7=aa.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1;aa._$Is=-2004318072;aa._$h0=0;aa._$4L=23;aa._$7P=33;aa._$uT=function(a){console.log("_$bo :: _$6 _$mo _$E0 : %d\n",a)};aa._$9o=function(a){if(40>a||50>a||60>a)return aa._$uT(a),null;if(100>a)switch(a){case 65:return new sa;case 66:return new wa;case 67:return new ia;case 68:return new ca;case 69:return new ma;case 70:return new S}else if(150>a)switch(a){case 131:return new Ia;case 133:return new ka;case 136:return new G;case 137:return new Ha;case 142:return new Ga}return aa._$uT(a),null};y._$HP=0;y._$_0=!0;y._$V2=-1;y._$W0=-1;y._$jr=!1;y._$ZS=!0;y._$tr=-1E6;y._$lr=1E6;y._$is=32;y._$e=!1;y.prototype.getDrawDataIndex=function(a){for(var b=this._$aS.length-1;0<=b;--b)if(null!=this._$aS[b]&&this._$aS[b].getDrawDataID()==a)return b;return-1};y.prototype.getDrawData=function(a){if(a instanceof ra){if(null==this._$Bo){this._$Bo={};a=this._$aS.length;for(var b=0;b<a;b++){var c=this._$aS[b],g=c.getDrawDataID();null!=g&&(this._$Bo[g]=c)}}return this._$Bo[id]}return a<this._$aS.length?this._$aS[a]:null};y.prototype.release=function(){this._$3S.clear();this._$aS.clear();this._$F2.clear();null!=this._$Bo&&this._$Bo.clear();this._$db.clear();this._$8b.clear();this._$Hr.clear()};y.prototype.init=function(){this._$co++;0<this._$F2.length&&this.release();for(var a=this._$Ri.getModelImpl(),b=a._$Xr(),c=b.length,g=[],f=[],d=0;d<c;++d){var e=b[d];this._$F2.push(e);this._$Hr.push(e.init(this));for(var n=e.getBaseData(),x=n.length,h=0;h<x;++h)g.push(n[h]);for(h=0;h<x;++h){var k=n[h].init(this);k._$l2(d);f.push(k)}e=e.getDrawData();n=e.length;for(h=0;h<n;++h)x=e[h],k=x.init(this),k._$IP=d,this._$aS.push(x),this._$8b.push(k)}b=g.length;for(c=ba._$2o();;){h=!1;for(d=0;d<b;++d)e=g[d],null!=e&&(n=e.getTargetBaseDataID(),(null==n||n==c||0<=this.getBaseDataIndex(n))&&(this._$3S.push(e),this._$db.push(f[d]),g[d]=null,h=!0));if(!h)break}d=a._$E2();if(null!=d&&(a=d._$1s(),null!=a))for(g=a.length,d=0;d<g;++d)f=a[d],null!=f&&this._$02(f.getParamID(),f.getDefaultValue(),f.getMinValue(),f.getMaxValue());this.clipManager=new t(this.dp_webgl);this.clipManager.init(this,this._$aS,this._$8b);this._$QT=!0};y.prototype.update=function(){y._$e&&k.start("_$zL");for(var a=this._$_2.length,b=0;b<a;b++)this._$_2[b]!=this._$vr[b]&&(this._$Js[b]=y._$ZS,this._$vr[b]=this._$_2[b]);var c=this._$3S.length,a=this._$aS.length,g=M._$or(),f=M._$Pr()-g+1;(null==this._$Ws||this._$Ws.length<f)&&(this._$Ws=new Int16Array(f),this._$Vs=new Int16Array(f));for(b=0;b<f;b++)this._$Ws[b]=y._$V2,this._$Vs[b]=y._$V2;(null==this._$Er||this._$Er.length<a)&&(this._$Er=new Int16Array(a));for(b=0;b<a;b++)this._$Er[b]=y._$W0;y._$e&&k.dump("_$zL");y._$e&&k.start("_$UL");b=null;for(f=0;f<c;++f){var d=this._$3S[f],e=this._$db[f];try{d._$Nr(this,e),d._$2b(this,e)}catch(Na){null==b&&(b=Na)}}null!=b&&y._$_0&&k._$Rb(b);y._$e&&k.dump("_$UL");y._$e&&k.start("_$DL");c=null;for(b=0;b<a;++b){f=this._$aS[b];d=this._$8b[b];try{if(f._$Nr(this,d),!d._$u2()){f._$2b(this,d);var n,h=Math.floor(f._$zS(this,d)-g);try{n=this._$Vs[h]}catch(Na){console.log("_$li :: %s / %s \t\t\t\t@@_$fS\n",Na.toString(),f.getDrawDataID().toString());h=Math.floor(f._$zS(this,d)-g);continue}n==y._$V2?this._$Ws[h]=b:this._$Er[n]=b;this._$Vs[h]=b}}catch(Na){null==c&&(c=Na,r._$sT(r._$H7))}}null!=c&&y._$_0&&k._$Rb(c);y._$e&&k.dump("_$DL");y._$e&&k.start("_$eL");for(b=this._$Js.length-1;0<=b;b--)this._$Js[b]=y._$jr;return this._$QT=!1,y._$e&&k.dump("_$eL"),!1};y.prototype.preDraw=function(a){null!=this.clipManager&&(a._$ZT(),this.clipManager.setupClip(this,a))};y.prototype.draw=function(a){if(null==this._$Ws)return void k._$li("call _$Ri.update() before _$Ri.draw() ");var b=this._$Ws.length;a._$ZT();for(var c=0;c<b;++c){var g=this._$Ws[c];if(g!=y._$V2)for(;;){var f=this._$aS[g],d=this._$8b[g];d._$yo()&&(d._$VS=this._$Hr[d._$IP].getPartsOpacity(),f.draw(a,this,d));f=this._$Er[g];if(f<=g||f==y._$W0)break;g=f}}};y.prototype.getParamIndex=function(a){for(var b=this._$pb.length-1;0<=b;--b)if(this._$pb[b]==a)return b;return this._$02(a,0,y._$tr,y._$lr)};y.prototype._$BS=function(a){return this.getBaseDataIndex(a)};y.prototype.getBaseDataIndex=function(a){for(var b=this._$3S.length-1;0<=b;--b)if(null!=this._$3S[b]&&this._$3S[b].getBaseDataID()==a)return b;return-1};y.prototype._$UT=function(a,b){var c=new Float32Array(b);return F._$jT(a,0,c,0,a.length),c};y.prototype._$02=function(a,b,c,g){if(this._$qo>=this._$pb.length){var f=this._$pb.length,d=Array(2*f);F._$jT(this._$pb,0,d,0,f);this._$pb=d;this._$_2=this._$UT(this._$_2,2*f);this._$vr=this._$UT(this._$vr,2*f);this._$Rr=this._$UT(this._$Rr,2*f);this._$Or=this._$UT(this._$Or,2*f);d=[];F._$jT(this._$Js,0,d,0,f);this._$Js=d}return this._$pb[this._$qo]=a,this._$_2[this._$qo]=b,this._$vr[this._$qo]=b,this._$Rr[this._$qo]=c,this._$Or[this._$qo]=g,this._$Js[this._$qo]=y._$ZS,this._$qo++};y.prototype._$Zo=function(a,b){this._$3S[a]=b};y.prototype.setParamFloat=function(a,b){b<this._$Rr[a]&&(b=this._$Rr[a]);b>this._$Or[a]&&(b=this._$Or[a]);this._$_2[a]=b};y.prototype.loadParam=function(){var a=this._$_2.length;a>this._$fs.length&&(a=this._$fs.length);F._$jT(this._$fs,0,this._$_2,0,a)};y.prototype.saveParam=function(){var a=this._$_2.length;a>this._$fs.length&&(this._$fs=new Float32Array(a));F._$jT(this._$_2,0,this._$fs,0,a)};y.prototype._$v2=function(){return this._$co};y.prototype._$WS=function(){return this._$QT};y.prototype._$Xb=function(a){return this._$Js[a]==y._$ZS};y.prototype._$vs=function(){return this._$Es};y.prototype._$Tr=function(){return this._$ZP};y.prototype.getBaseData=function(a){return this._$3S[a]};y.prototype.getParamFloat=function(a){return this._$_2[a]};y.prototype.getParamMax=function(a){return this._$Or[a]};y.prototype.getParamMin=function(a){return this._$Rr[a]};y.prototype.setPartsOpacity=function(a,b){this._$Hr[a].setPartsOpacity(b)};y.prototype.getPartsOpacity=function(a){return this._$Hr[a].getPartsOpacity()};y.prototype.getPartsDataIndex=function(a){for(var b=this._$F2.length-1;0<=b;--b)if(null!=this._$F2[b]&&this._$F2[b]._$p2()==a)return b;return-1};y.prototype._$q2=function(a){return this._$db[a]};y.prototype._$C2=function(a){return this._$8b[a]};y.prototype._$Bb=function(a){return this._$Hr[a]};y.prototype._$5s=function(a,b){for(var c=this._$Ws.length,g=a,f=0;f<c;++f){var d=this._$Ws[f];if(d!=y._$V2)for(;;){var e=this._$8b[d];e._$yo()&&(e._$GT()._$B2(this,e,g),g+=b);e=this._$Er[d];if(e<=d||e==y._$W0)break;d=e}}};y.prototype.setDrawParam=function(a){this.dp_webgl=a};y.prototype.getDrawParam=function(){return this.dp_webgl};La._$0T=function(a){return La._$0T(new _$5(a))};La._$0T=function(a){if(!a.exists())throw new _$ls(a._$3b());for(var b=a.length(),c=new Int8Array(b),g=new _$Xs(new _$kb(a),8192),f=0;0<(a=g.read(c,f,b-f));)f+=a;return c};La._$C=function(a){var b=null,c=null;try{for(var b=a instanceof Array?a:new _$Xs(a,8192),c=new _$js,g,f=new Int8Array(1E3);0<(g=b.read(f));)c.write(f,0,g);return c._$TS()}finally{null!=a&&a.close(),null!=c&&(c.flush(),c.close())}};Oa.prototype._$T2=function(){return F.getUserTimeMSec()+Math._$10()*(2*this._$Br-1)};Oa.prototype._$uo=function(a){this._$Br=a};Oa.prototype._$QS=function(a,b,c){this._$Dr=a;this._$Cb=b;this._$mr=c};Oa.prototype._$7T=function(a){var b;b=F.getUserTimeMSec();var c;switch(this._$_L){case STATE_CLOSING:c=(b-this._$bb)/this._$Dr;1<=c&&(c=1,this._$_L=Aa.STATE_CLOSED,this._$bb=b);b=1-c;break;case STATE_CLOSED:c=(b-this._$bb)/this._$Cb;1<=c&&(this._$_L=Aa.STATE_OPENING,this._$bb=b);b=0;break;case STATE_OPENING:c=(b-this._$bb)/this._$mr;1<=c&&(c=1,this._$_L=Aa.STATE_INTERVAL,this._$12=this._$T2());b=c;break;case STATE_INTERVAL:this._$12<b&&(this._$_L=Aa.STATE_CLOSING,this._$bb=b);b=1;break;default:this._$_L=Aa.STATE_INTERVAL,this._$12=this._$T2(),b=1}this._$jo||(b=-b);a.setParamFloat(this._$iL,b);a.setParamFloat(this._$0L,b)};var Aa=function(){};Aa.STATE_FIRST="STATE_FIRST";Aa.STATE_INTERVAL="STATE_INTERVAL";Aa.STATE_CLOSING="STATE_CLOSING";Aa.STATE_CLOSED="STATE_CLOSED";Aa.STATE_OPENING="STATE_OPENING";V.prototype=new Q;V._$As=32;V._$Gr=!1;V._$NT=null;V._$vS=null;V._$no=null;V._$9r=function(a){return new Float32Array(a)};V._$vb=function(a){return new Int16Array(a)};V._$cr=function(a,b){return null==a||a._$yL()<b.length?(a=V._$9r(2*b.length),a.put(b),a._$oT(0)):(a.clear(),a.put(b),a._$oT(0)),a};V._$mb=function(a,b){return null==a||a._$yL()<b.length?(a=V._$vb(2*b.length),a.put(b),a._$oT(0)):(a.clear(),a.put(b),a._$oT(0)),a};V._$Hs=function(){return V._$Gr};V._$as=function(a){V._$Gr=a};V.prototype.setGL=function(a){this.gl=a};V.prototype.setTransform=function(a){this.transform=a};V.prototype._$ZT=function(){};V.prototype._$Uo=function(a,b,c,g,f,d,e,n){.01>d||this.gl.drawElements(this._$U2[a],c,g,f,d,.9<d?r.EXPAND_W:0,this.transform,n)};V.prototype._$Rs=function(){throw Error("_$Rs");};V.prototype._$Ds=function(a){throw Error("_$Ds");};V.prototype._$K2=function(){for(var a=0;a<this._$sb.length;a++)0!=this._$sb[a]&&(this.gl._$Sr(1,this._$sb,a),this._$sb[a]=0)};V.prototype.setTexture=function(a,b){this._$sb.length<a+1&&this._$nS(a);this._$sb[a]=b};V.prototype.setTexture=function(a,b){this._$sb.length<a+1&&this._$nS(a);this._$U2[a]=b};V.prototype._$nS=function(a){a=new Int32Array(Math.max(2*this._$sb.length,a+1+10));F._$jT(this._$sb,0,a,0,this._$sb.length);this._$sb=a;a=[];F._$jT(this._$U2,0,a,0,this._$U2.length);this._$U2=a};ca.prototype=new E;ca._$Xo=new Float32Array(2);ca._$io=new Float32Array(2);ca._$0o=new Float32Array(2);ca._$Lo=new Float32Array(2);ca._$To=new Float32Array(2);ca._$Po=new Float32Array(2);ca._$gT=[];ca.prototype._$zP=function(){this._$GS=new wa;this._$GS._$zP();this._$Y0=[]};ca.prototype.getType=function(){return E._$c2};ca.prototype._$F0=function(a){E.prototype._$F0.call(this,a);this._$GS=a._$nP();this._$Y0=a._$nP();E.prototype.readV2_opacity.call(this,a)};ca.prototype.init=function(a){a=new Va(this);return a._$Yr=new ma,this._$32()&&(a._$Wr=new ma),a};ca.prototype._$Nr=function(a,b){this!=b._$GT()&&console.log("### assert!! ### ");if(this._$GS._$Ur(a)){var c=ca._$gT;c[0]=!1;var g=this._$GS._$Q2(a,c);b._$Ib(c[0]);this.interpolateOpacity(a,this._$GS,b,c);var c=a._$vs(),f=a._$Tr();if(this._$GS._$zr(c,f,g),0>=g){var d=this._$Y0[c[0]];b._$Yr.init(d)}else if(1==g){var d=this._$Y0[c[0]],e=this._$Y0[c[1]],n=f[0];b._$Yr._$fL=d._$fL+(e._$fL-d._$fL)*n;b._$Yr._$gL=d._$gL+(e._$gL-d._$gL)*n;b._$Yr._$B0=d._$B0+(e._$B0-d._$B0)*n;b._$Yr._$z0=d._$z0+(e._$z0-d._$z0)*n;b._$Yr._$qT=d._$qT+(e._$qT-d._$qT)*n}else if(2==g){var d=this._$Y0[c[0]],e=this._$Y0[c[1]],h=this._$Y0[c[2]],k=this._$Y0[c[3]],n=f[0],l=f[1],f=d._$fL+(e._$fL-d._$fL)*n,g=h._$fL+(k._$fL-h._$fL)*n;b._$Yr._$fL=f+(g-f)*l;f=d._$gL+(e._$gL-d._$gL)*n;g=h._$gL+(k._$gL-h._$gL)*n;b._$Yr._$gL=f+(g-f)*l;f=d._$B0+(e._$B0-d._$B0)*n;g=h._$B0+(k._$B0-h._$B0)*n;b._$Yr._$B0=f+(g-f)*l;f=d._$z0+(e._$z0-d._$z0)*n;g=h._$z0+(k._$z0-h._$z0)*n;b._$Yr._$z0=f+(g-f)*l;f=d._$qT+(e._$qT-d._$qT)*n;g=h._$qT+(k._$qT-h._$qT)*n;b._$Yr._$qT=f+(g-f)*l}else if(3==g){var k=this._$Y0[c[0]],p=this._$Y0[c[1]],r=this._$Y0[c[2]],u=this._$Y0[c[3]],t=this._$Y0[c[4]],B=this._$Y0[c[5]],w=this._$Y0[c[6]],v=this._$Y0[c[7]],n=f[0],l=f[1],d=f[2],f=k._$fL+(p._$fL-k._$fL)*n,g=r._$fL+(u._$fL-r._$fL)*n,e=t._$fL+(B._$fL-t._$fL)*n,h=w._$fL+(v._$fL-w._$fL)*n;b._$Yr._$fL=(1-d)*(f+(g-f)*l)+d*(e+(h-e)*l);f=k._$gL+(p._$gL-k._$gL)*n;g=r._$gL+(u._$gL-r._$gL)*n;e=t._$gL+(B._$gL-t._$gL)*n;h=w._$gL+(v._$gL-w._$gL)*n;b._$Yr._$gL=(1-d)*(f+(g-f)*l)+d*(e+(h-e)*l);f=k._$B0+(p._$B0-k._$B0)*n;g=r._$B0+(u._$B0-r._$B0)*n;e=t._$B0+(B._$B0-t._$B0)*n;h=w._$B0+(v._$B0-w._$B0)*n;b._$Yr._$B0=(1-d)*(f+(g-f)*l)+d*(e+(h-e)*l);f=k._$z0+(p._$z0-k._$z0)*n;g=r._$z0+(u._$z0-r._$z0)*n;e=t._$z0+(B._$z0-t._$z0)*n;h=w._$z0+(v._$z0-w._$z0)*n;b._$Yr._$z0=(1-d)*(f+(g-f)*l)+d*(e+(h-e)*l);f=k._$qT+(p._$qT-k._$qT)*n;g=r._$qT+(u._$qT-r._$qT)*n;e=t._$qT+(B._$qT-t._$qT)*n;h=w._$qT+(v._$qT-w._$qT)*n;b._$Yr._$qT=(1-d)*(f+(g-f)*l)+d*(e+(h-e)*l)}else if(4==g){var k=this._$Y0[c[0]],p=this._$Y0[c[1]],r=this._$Y0[c[2]],u=this._$Y0[c[3]],t=this._$Y0[c[4]],B=this._$Y0[c[5]],w=this._$Y0[c[6]],v=this._$Y0[c[7]],C=this._$Y0[c[8]],y=this._$Y0[c[9]],K=this._$Y0[c[10]],D=this._$Y0[c[11]],F=this._$Y0[c[12]],H=this._$Y0[c[13]],xa=this._$Y0[c[14]],J=this._$Y0[c[15]],n=f[0],l=f[1],d=f[2],E=f[3],f=k._$fL+(p._$fL-k._$fL)*n,g=r._$fL+(u._$fL-r._$fL)*n,e=t._$fL+(B._$fL-t._$fL)*n,h=w._$fL+(v._$fL-w._$fL)*n,N=C._$fL+(y._$fL-C._$fL)*n,G=K._$fL+(D._$fL-K._$fL)*n,z=F._$fL+(H._$fL-F._$fL)*n,I=xa._$fL+(J._$fL-xa._$fL)*n;b._$Yr._$fL=(1-E)*((1-d)*(f+(g-f)*l)+d*(e+(h-e)*l))+E*((1-d)*(N+(G-N)*l)+d*(z+(I-z)*l));f=k._$gL+(p._$gL-k._$gL)*n;g=r._$gL+(u._$gL-r._$gL)*n;e=t._$gL+(B._$gL-t._$gL)*n;h=w._$gL+(v._$gL-w._$gL)*n;N=C._$gL+(y._$gL-C._$gL)*n;G=K._$gL+(D._$gL-K._$gL)*n;z=F._$gL+(H._$gL-F._$gL)*n;I=xa._$gL+(J._$gL-xa._$gL)*n;b._$Yr._$gL=(1-E)*((1-d)*(f+(g-f)*l)+d*(e+(h-e)*l))+E*((1-d)*(N+(G-N)*l)+d*(z+(I-z)*l));f=k._$B0+(p._$B0-k._$B0)*n;g=r._$B0+(u._$B0-r._$B0)*n;e=t._$B0+(B._$B0-t._$B0)*n;h=w._$B0+(v._$B0-w._$B0)*n;N=C._$B0+(y._$B0-C._$B0)*n;G=K._$B0+(D._$B0-K._$B0)*n;z=F._$B0+(H._$B0-F._$B0)*n;I=xa._$B0+(J._$B0-xa._$B0)*n;b._$Yr._$B0=(1-E)*((1-d)*(f+(g-f)*l)+d*(e+(h-e)*l))+E*((1-d)*(N+(G-N)*l)+d*(z+(I-z)*l));f=k._$z0+(p._$z0-k._$z0)*n;g=r._$z0+(u._$z0-r._$z0)*n;e=t._$z0+(B._$z0-t._$z0)*n;h=w._$z0+(v._$z0-w._$z0)*n;N=C._$z0+(y._$z0-C._$z0)*n;G=K._$z0+(D._$z0-K._$z0)*n;z=F._$z0+(H._$z0-F._$z0)*n;I=xa._$z0+(J._$z0-xa._$z0)*n;b._$Yr._$z0=(1-E)*((1-d)*(f+(g-f)*l)+d*(e+(h-e)*l))+E*((1-d)*(N+(G-N)*l)+d*(z+(I-z)*l));f=k._$qT+(p._$qT-k._$qT)*n;g=r._$qT+(u._$qT-r._$qT)*n;e=t._$qT+(B._$qT-t._$qT)*n;h=w._$qT+(v._$qT-w._$qT)*n;N=C._$qT+(y._$qT-C._$qT)*n;G=K._$qT+(D._$qT-K._$qT)*n;z=F._$qT+(H._$qT-F._$qT)*n;I=xa._$qT+(J._$qT-xa._$qT)*n;b._$Yr._$qT=(1-E)*((1-d)*(f+(g-f)*l)+d*(e+(h-e)*l))+E*((1-d)*(N+(G-N)*l)+d*(z+(I-z)*l))}else{n=0|Math.pow(2,g);l=new Float32Array(n);for(d=0;d<n;d++){e=d;h=1;for(k=0;k<g;k++)h*=0==e%2?1-f[k]:f[k],e/=2;l[d]=h}f=[];for(g=0;g<n;g++)f[g]=this._$Y0[c[g]];for(g=p=k=h=e=d=0;g<n;g++)d+=l[g]*f[g]._$fL,e+=l[g]*f[g]._$gL,h+=l[g]*f[g]._$B0,k+=l[g]*f[g]._$z0,p+=l[g]*f[g]._$qT;b._$Yr._$fL=d;b._$Yr._$gL=e;b._$Yr._$B0=h;b._$Yr._$z0=k;b._$Yr._$qT=p}d=this._$Y0[c[0]];b._$Yr.reflectX=d.reflectX;b._$Yr.reflectY=d.reflectY}};ca.prototype._$2b=function(a,b){this!=b._$GT()&&console.log("### assert!! ### ");if(b._$hS(!0),this._$32()){var c=this.getTargetBaseDataID();if(b._$8r==E._$ur&&(b._$8r=a.getBaseDataIndex(c)),0>b._$8r)r._$so&&k._$li("_$L _$0P _$G :: %s",c),b._$hS(!1);else{var g=a.getBaseData(b._$8r);if(null!=g){var c=a._$q2(b._$8r),f=ca._$Xo;f[0]=b._$Yr._$fL;f[1]=b._$Yr._$gL;var d=ca._$io;d[0]=0;d[1]=-.1;c._$GT().getType()==E._$c2?d[1]=-10:d[1]=-.1;var e=ca._$0o;this._$Jr(a,g,c,f,d,e);d=da._$92(d,e);g._$nb(a,c,f,f,1,0,2);b._$Wr._$fL=f[0];b._$Wr._$gL=f[1];b._$Wr._$B0=b._$Yr._$B0;b._$Wr._$z0=b._$Yr._$z0;b._$Wr._$qT=b._$Yr._$qT-d*da._$NS;g=c.getTotalScale();b.setTotalScale_notForClient(g*b._$Wr._$B0);g=c.getTotalOpacity();b.setTotalOpacity(g*b.getInterpolatedOpacity());b._$Wr.reflectX=b._$Yr.reflectX;b._$Wr.reflectY=b._$Yr.reflectY;b._$hS(c._$yo())}else b._$hS(!1)}}else b.setTotalScale_notForClient(b._$Yr._$B0),b.setTotalOpacity(b.getInterpolatedOpacity())};ca.prototype._$nb=function(a,b,c,g,f,d,e){this!=b._$GT()&&console.log("### assert!! ### ");var h,q=null!=b._$Wr?b._$Wr:b._$Yr,k=Math.sin(da._$bS*q._$qT),l=Math.cos(da._$bS*q._$qT),A=b.getTotalScale(),p=q.reflectX?-1:1;h=q.reflectY?-1:1;b=l*A*p;a=-k*A*h;k=k*A*p;l=l*A*h;A=q._$fL;q=q._$gL;f*=e;for(p=d;p<f;p+=e)d=c[p],h=c[p+1],g[p]=b*d+a*h+A,g[p+1]=k*d+l*h+q};ca.prototype._$Jr=function(a,b,c,d,f,e){b!=c._$GT()&&console.log("### assert!! ### ");var g=ca._$Lo;ca._$Lo[0]=d[0];ca._$Lo[1]=d[1];b._$nb(a,c,g,g,1,0,2);for(var h=ca._$To,q=ca._$Po,k=1,l=0;10>l;l++){if(q[0]=d[0]+k*f[0],q[1]=d[1]+k*f[1],b._$nb(a,c,q,h,1,0,2),h[0]-=g[0],h[1]-=g[1],0!=h[0]||0!=h[1])return e[0]=h[0],void(e[1]=h[1]);if(q[0]=d[0]-k*f[0],q[1]=d[1]-k*f[1],b._$nb(a,c,q,h,1,0,2),h[0]-=g[0],h[1]-=g[1],0!=h[0]||0!=h[1])return h[0]=-h[0],h[0]=-h[0],e[0]=h[0],void(e[1]=h[1]);k*=.1}r._$so&&console.log("_$L0 to transform _$SP\n")};Va.prototype=new na;M.prototype=new I;M._$ur=-2;M._$ES=500;M._$wb=2;M._$8S=3;M._$os=4;M._$52=M._$ES;M._$R2=M._$ES;M._$Sb=function(a){for(var b=a.length-1;0<=b;--b){var c=a[b];c<M._$52?M._$52=c:c>M._$R2&&(M._$R2=c)}};M._$or=function(){return M._$52};M._$Pr=function(){return M._$R2};M.prototype._$F0=function(a){this._$gP=a._$nP();this._$dr=a._$nP();this._$GS=a._$nP();this._$qb=a._$6L();this._$Lb=a._$cS();this._$mS=a._$Tb();a.getFormatVersion()>=aa._$T7?(this.clipID=a._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=null;M._$Sb(this._$Lb)};M.prototype.getClipIDList=function(){return this.clipIDList};M.prototype._$Nr=function(a,b){if((b._$IS[0]=!1,b._$Us=ua._$Z2(a,this._$GS,b._$IS,this._$Lb),r._$Zs)||!b._$IS[0])b._$7s=ua._$br(a,this._$GS,b._$IS,this._$mS)};M.prototype._$2b=function(a){};M.prototype.getDrawDataID=function(){return this._$gP};M.prototype._$j2=function(a){this._$gP=a};M.prototype.getOpacity=function(a,b){return b._$7s};M.prototype._$zS=function(a,b){return b._$Us};M.prototype.getTargetBaseDataID=function(){return this._$dr};M.prototype._$gs=function(a){this._$dr=a};M.prototype._$32=function(){return null!=this._$dr&&this._$dr!=ba._$2o()};M.prototype.getType=function(){};Ga._$42=0;Ga.prototype._$1b=function(){return this._$3S};Ga.prototype.getDrawDataList=function(){return this._$aS};Ga.prototype._$F0=function(a){this._$NL=a._$nP();this._$aS=a._$nP();this._$3S=a._$nP()};Ga.prototype._$kr=function(a){a._$Zo(this._$3S);a._$xo(this._$aS);this._$aS=this._$3S=null};la.prototype=new l;la.loadModel=function(a){var b=new la;return l._$62(b,a),b};la.loadModel=function(a){var b=new la;return l._$62(b,a),b};la._$to=function(){return new la};la._$er=function(a){var b=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(0==b.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+b._$PL());for(var c=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],b=la.loadModel(b._$3b()),d=0;d<c.length;d++){var f=new _$5(c[d]);if(0==f.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+f._$PL());b.setTexture(d,_$nL._$_o(a,f._$3b()))}return b};la.prototype.setGL=function(a){this._$zo.setGL(a)};la.prototype.setTransform=function(a){this._$zo.setTransform(a)};la.prototype.draw=function(){this._$5S.draw(this._$zo)};la.prototype._$K2=function(){this._$zo._$K2()};la.prototype.setTexture=function(a,b){null==this._$zo&&k._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");this._$zo.setTexture(a,b)};la.prototype.setTexture=function(a,b){null==this._$zo&&k._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");this._$zo.setTexture(a,b)};la.prototype._$Rs=function(){return this._$zo._$Rs()};la.prototype._$Ds=function(a){this._$zo._$Ds(a)};la.prototype.getDrawParam=function(){return this._$zo};X.prototype=new d;X._$cs="VISIBLE:";X._$ar="LAYOUT:";X.MTN_PREFIX_FADEIN="FADEIN:";X.MTN_PREFIX_FADEOUT="FADEOUT:";X._$Co=0;X._$1T=1;X.loadMotion=function(a){a=La._$C(a);return X.loadMotion(a)};X.loadMotion=function(a){a instanceof ArrayBuffer&&(a=new DataView(a));for(var b=new X,c=[0],d=a.byteLength,f=b._$yT=0;f<d;++f){var e=za(a,f),h=e.charCodeAt(0);if("\n"!=e&&"\r"!=e)if("#"!=e)if("$"!=e){if(97<=h&&122>=h||65<=h&&90>=h||"_"==e){for(var k=f,l=-1;f<d&&"\r"!=(e=za(a,f))&&"\n"!=e;++f)if("\x3d"==e){l=f;break}if(0<=l){h=new P;U.startsWith(a,k,X._$cs)?(h._$RP=P._$hs,h._$4P=U.createString(a,k,l-k)):U.startsWith(a,k,X._$ar)?(h._$4P=U.createString(a,k+7,l-k-7),U.startsWith(a,k+7,"ANCHOR_X")?h._$RP=P._$xs:U.startsWith(a,k+7,"ANCHOR_Y")?h._$RP=P._$us:U.startsWith(a,k+7,"SCALE_X")?h._$RP=P._$qs:U.startsWith(a,k+7,"SCALE_Y")?h._$RP=P._$Ys:U.startsWith(a,k+7,"X")?h._$RP=P._$ws:U.startsWith(a,k+7,"Y")&&(h._$RP=P._$Ns)):(h._$RP=P._$Fr,h._$4P=U.createString(a,k,l-k));b.motions.push(h);for(var k=0,p=[],f=l+1;f<d&&"\r"!=(e=za(a,f))&&"\n"!=e;++f)if(","!=e&&" "!=e&&"\t"!=e&&(l=U._$LS(a,d,f,c),0<c[0])){p.push(l);k++;l=c[0];if(l<f){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\n");break}f=l-1}h._$I0=new Float32Array(p);k>b._$yT&&(b._$yT=k)}}}else{k=f;for(l=-1;f<d&&"\r"!=(e=za(a,f))&&"\n"!=e;++f)if("\x3d"==e){l=f;break}h=!1;if(0<=l)for(l==k+4&&"f"==za(a,k+1)&&"p"==za(a,k+2)&&"s"==za(a,k+3)&&(h=!0),f=l+1;f<d&&"\r"!=(e=za(a,f))&&"\n"!=e;++f)","!=e&&" "!=e&&"\t"!=e&&(l=U._$LS(a,d,f,c),0<c[0]&&h&&5<l&&121>l&&(b._$D0=l),f=c[0]);for(;f<d&&"\n"!=za(a,f)&&"\r"!=za(a,f);++f);}else for(;f<d&&"\n"!=za(a,f)&&"\r"!=za(a,f);++f);}return b._$rr=1E3*b._$yT/b._$D0|0,b};X.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr};X.prototype.getLoopDurationMSec=function(){return this._$rr};X.prototype.dump=function(){for(var a=0;a<this.motions.length;a++){var b=this.motions[a];console.log("_$wL[%s] [%d]. ",b._$4P,b._$I0.length);for(var c=0;c<b._$I0.length&&10>c;c++)console.log("%5.2f ,",b._$I0[c]);console.log("\n")}};X.prototype.updateParamExe=function(a,b,c,d){for(var f=(b-d._$z2)*this._$D0/1E3,g=0|f,f=f-g,e=0;e<this.motions.length;e++){var h=this.motions[e],k=h._$I0.length,l=h._$4P;if(h._$RP==P._$hs)a.setParamFloat(l,h._$I0[g>=k?k-1:g]);else if(!(P._$ws<=h._$RP&&h._$RP<=P._$Ys)){var p=a.getParamIndex(l),r=a.getModelContext(),t=r.getParamMax(p),u=r.getParamMin(p),t=.4*(t-u),p=r.getParamFloat(p),r=h._$I0[g>=k?k-1:g],h=h._$I0[g+1>=k?k-1:g+1];a.setParamFloat(l,p+((r<h&&h-r>t||r>h&&r-h>t?r:r+(h-r)*f)-p)*c)}}g>=this._$yT&&(this._$E?(d._$z2=b,this.loopFadeIn&&(d._$bs=b)):d._$9L=!0);this._$eP=c};X.prototype._$r0=function(){return this._$E};X.prototype._$aL=function(a){this._$E=a};X.prototype._$S0=function(){return this._$D0};X.prototype._$U0=function(a){this._$D0=a};X.prototype.isLoopFadeIn=function(){return this.loopFadeIn};X.prototype.setLoopFadeIn=function(a){this.loopFadeIn=a};Fa.prototype.clear=function(){this.size=0};Fa.prototype.add=function(a){if(this._$P.length<=this.size){var b=new Float32Array(2*this.size);F._$jT(this._$P,0,b,0,this.size);this._$P=b}this._$P[this.size++]=a};Fa.prototype._$BL=function(){var a=new Float32Array(this.size);return F._$jT(this._$P,0,a,0,this.size),a};P._$Fr=0;P._$hs=1;P._$ws=100;P._$Ns=101;P._$xs=102;P._$us=103;P._$qs=104;P._$Ys=105;sa.prototype=new E;sa._$gT=[];sa.prototype._$zP=function(){this._$GS=new wa;this._$GS._$zP()};sa.prototype._$F0=function(a){E.prototype._$F0.call(this,a);this._$A=a._$6L();this._$o=a._$6L();this._$GS=a._$nP();this._$Eo=a._$nP();E.prototype.readV2_opacity.call(this,a)};sa.prototype.init=function(a){a=new Wa(this);var b=(this._$o+1)*(this._$A+1);return null!=a._$Cr&&(a._$Cr=null),a._$Cr=new Float32Array(2*b),null!=a._$hr&&(a._$hr=null),this._$32()?a._$hr=new Float32Array(2*b):a._$hr=null,a};sa.prototype._$Nr=function(a,b){if(this._$GS._$Ur(a)){var c=this._$VT(),d=sa._$gT;d[0]=!1;ua._$Vr(a,this._$GS,d,c,this._$Eo,b._$Cr,0,2);b._$Ib(d[0]);this.interpolateOpacity(a,this._$GS,b,d)}};sa.prototype._$2b=function(a,b){if(b._$hS(!0),this._$32()){var c=this.getTargetBaseDataID();if(b._$8r==E._$ur&&(b._$8r=a.getBaseDataIndex(c)),0>b._$8r)r._$so&&k._$li("_$L _$0P _$G :: %s",c),b._$hS(!1);else{var c=a.getBaseData(b._$8r),d=a._$q2(b._$8r);if(null!=c&&d._$yo()){var f=d.getTotalScale();b.setTotalScale_notForClient(f);f=d.getTotalOpacity();b.setTotalOpacity(f*b.getInterpolatedOpacity());c._$nb(a,d,b._$Cr,b._$hr,this._$VT(),0,2);b._$hS(!0)}else b._$hS(!1)}}else b.setTotalOpacity(b.getInterpolatedOpacity())};sa.prototype._$nb=function(a,b,c,d,f,e,h){sa.transformPoints_sdk2(c,d,f,e,h,null!=b._$hr?b._$hr:b._$Cr,this._$o,this._$A)};sa.transformPoints_sdk2=function(a,b,c,d,f,h,k,l){var g,n,q;c*=f;for(var p=0,r=0,t=0,u=0,w=0,B=0,A=!1;d<c;d+=f){var v,C,y,K;if(y=a[d],K=a[d+1],v=y*k,C=K*l,0>v||0>C||k<=v||l<=C)if(g=k+1,A||(A=!0,p=.25*(h[2*(0+0*g)]+h[2*(k+0*g)]+h[2*(0+l*g)]+h[2*(k+l*g)]),r=.25*(h[2*(0+0*g)+1]+h[2*(k+0*g)+1]+h[2*(0+l*g)+1]+h[2*(k+l*g)+1]),w=h[2*(k+l*g)]-h[2*(0+0*g)],B=h[2*(k+l*g)+1]-h[2*(0+0*g)+1],q=h[2*(k+0*g)]-h[2*(0+l*g)],n=h[2*(k+0*g)+1]-h[2*(0+l*g)+1],t=.5*(w+q),u=.5*(B+n),w=.5*(w-q),B=.5*(B-n),p-=.5*(t+w),r-=.5*(u+B)),-2<y&&3>y&&-2<K&&3>K)if(0>=y){if(0>=K){n=h[2*(0+0*g)];g=h[2*(0+0*g)+1];q=p-2*t;var D=r-2*u,F=p-2*w,z=r-2*B,E=p-2*t-2*w,G=r-2*u-2*B,N=.5*(y- -2),H=.5*(K- -2)}else if(1<=K)F=h[2*(0+l*g)],z=h[2*(0+l*g)+1],E=p-2*t+1*w,G=r-2*u+1*B,n=p+3*w,g=r+3*B,q=p-2*t+3*w,D=r-2*u+3*B,N=.5*(y- -2),H=.5*(K-1);else{D=0|C;D==l&&(D=l-1);var N=.5*(y- -2),H=C-D,I=D/l,J=(D+1)/l,F=h[2*(0+D*g)],z=h[2*(0+D*g)+1];n=h[2*(0+(D+1)*g)];g=h[2*(0+(D+1)*g)+1];E=p-2*t+I*w;G=r-2*u+I*B;q=p-2*t+J*w;D=r-2*u+J*B}1>=N+H?(b[d]=E+(F-E)*N+(q-E)*H,b[d+1]=G+(z-G)*N+(D-G)*H):(b[d]=n+(q-n)*(1-N)+(F-n)*(1-H),b[d+1]=g+(D-g)*(1-N)+(z-g)*(1-H))}else 1<=y?(0>=K?(q=h[2*(k+0*g)],D=h[2*(k+0*g)+1],n=p+3*t,g=r+3*u,E=p+1*t-2*w,G=r+1*u-2*B,F=p+3*t-2*w,z=r+3*u-2*B,N=.5*(y-1),H=.5*(K- -2)):1<=K?(E=h[2*(k+l*g)],G=h[2*(k+l*g)+1],F=p+3*t+1*w,z=r+3*u+1*B,q=p+1*t+3*w,D=r+1*u+3*B,n=p+3*t+3*w,g=r+3*u+3*B,N=.5*(y-1),H=.5*(K-1)):(D=0|C,D==l&&(D=l-1),N=.5*(y-1),H=C-D,I=D/l,J=(D+1)/l,E=h[2*(k+D*g)],G=h[2*(k+D*g)+1],q=h[2*(k+(D+1)*g)],D=h[2*(k+(D+1)*g)+1],F=p+3*t+I*w,z=r+3*u+I*B,n=p+3*t+J*w,g=r+3*u+J*B),1>=N+H?(b[d]=E+(F-E)*N+(q-E)*H,b[d+1]=G+(z-G)*N+(D-G)*H):(b[d]=n+(q-n)*(1-N)+(F-n)*(1-H),b[d+1]=g+(D-g)*(1-N)+(z-g)*(1-H))):0>=K?(z=0|v,z==k&&(z=k-1),N=v-z,H=.5*(K- -2),I=z/k,J=(z+1)/k,q=h[2*(z+0*g)],D=h[2*(z+0*g)+1],n=h[2*(z+1+0*g)],g=h[2*(z+1+0*g)+1],E=p+I*t-2*w,G=r+I*u-2*B,F=p+J*t-2*w,z=r+J*u-2*B,1>=N+H?(b[d]=E+(F-E)*N+(q-E)*H,b[d+1]=G+(z-G)*N+(D-G)*H):(b[d]=n+(q-n)*(1-N)+(F-n)*(1-H),b[d+1]=g+(D-g)*(1-N)+(z-g)*(1-H))):1<=K?(z=0|v,z==k&&(z=k-1),N=v-z,H=.5*(K-1),I=z/k,J=(z+1)/k,E=h[2*(z+l*g)],G=h[2*(z+l*g)+1],F=h[2*(z+1+l*g)],z=h[2*(z+1+l*g)+1],q=p+I*t+3*w,D=r+I*u+3*B,n=p+J*t+3*w,g=r+J*u+3*B,1>=N+H?(b[d]=E+(F-E)*N+(q-E)*H,b[d+1]=G+(z-G)*N+(D-G)*H):(b[d]=n+(q-n)*(1-N)+(F-n)*(1-H),b[d+1]=g+(D-g)*(1-N)+(z-g)*(1-H))):e.err.printf("_$li calc : %.4f , %.4f\t\t\t\t\t@@BDBoxGrid\n",y,K);else b[d]=p+y*t+K*w,b[d+1]=r+y*u+K*B;else n=v-(0|v),q=C-(0|C),g=2*((0|v)+(0|C)*(k+1)),1>n+q?(b[d]=h[g]*(1-n-q)+h[g+2]*n+h[g+2*(k+1)]*q,b[d+1]=h[g+1]*(1-n-q)+h[g+3]*n+h[g+2*(k+1)+1]*q):(b[d]=h[g+2*(k+1)+2]*(n-1+q)+h[g+2*(k+1)]*(1-n)+h[g+2]*(1-q),b[d+1]=h[g+2*(k+1)+3]*(n-1+q)+h[g+2*(k+1)+1]*(1-n)+h[g+3]*(1-q))}};sa.prototype.transformPoints_sdk1=function(a,b,c,d,f,e,h){var g,k,l,q,p,t,u;a=this._$o;var w=this._$A;f*=h;for(b=null!=b._$hr?b._$hr:b._$Cr;e<f;e+=h)r._$ts?(g=c[e],k=c[e+1],0>g?g=0:1<g&&(g=1),0>k?k=0:1<k&&(k=1),g*=a,k*=w,l=0|g,q=0|k,l>a-1&&(l=a-1),q>w-1&&(q=w-1),t=g-l,u=k-q,p=2*(l+q*(a+1))):(g=c[e]*a,k=c[e+1]*w,t=g-(0|g),u=k-(0|k),p=2*((0|g)+(0|k)*(a+1))),1>t+u?(d[e]=b[p]*(1-t-u)+b[p+2]*t+b[p+2*(a+1)]*u,d[e+1]=b[p+1]*(1-t-u)+b[p+3]*t+b[p+2*(a+1)+1]*u):(d[e]=b[p+2*(a+1)+2]*(t-1+u)+b[p+2*(a+1)]*(1-t)+b[p+2]*(1-u),d[e+1]=b[p+2*(a+1)+3]*(t-1+u)+b[p+2*(a+1)+1]*(1-t)+b[p+3]*(1-u))};sa.prototype._$VT=function(){return(this._$o+1)*(this._$A+1)};sa.prototype.getType=function(){return E._$_b};Wa.prototype=new na;ka._$42=0;ka.prototype._$zP=function(){this._$3S=[];this._$aS=[]};ka.prototype._$F0=function(a){this._$g0=a._$8L();this.visible=a._$8L();this._$NL=a._$nP();this._$3S=a._$nP();this._$aS=a._$nP()};ka.prototype.init=function(a){a=new Pa(this);return a.setPartsOpacity(this.isVisible()?1:0),a};ka.prototype._$6o=function(a){if(null==this._$3S)throw Error("_$3S _$6 _$Wo@_$6o");this._$3S.push(a)};ka.prototype._$3o=function(a){if(null==this._$aS)throw Error("_$aS _$6 _$Wo@_$3o");this._$aS.push(a)};ka.prototype._$Zo=function(a){this._$3S=a};ka.prototype._$xo=function(a){this._$aS=a};ka.prototype.isVisible=function(){return this.visible};ka.prototype._$uL=function(){return this._$g0};ka.prototype._$KP=function(a){this.visible=a};ka.prototype._$ET=function(a){this._$g0=a};ka.prototype.getBaseData=function(){return this._$3S};ka.prototype.getDrawData=function(){return this._$aS};ka.prototype._$p2=function(){return this._$NL};ka.prototype._$ob=function(a){this._$NL=a};ka.prototype.getPartsID=function(){return this._$NL};ka.prototype._$MP=function(a){this._$NL=a};Pa.prototype=new function(){};Pa.prototype.getPartsOpacity=function(){return this._$VS};Pa.prototype.setPartsOpacity=function(a){this._$VS=a};Ca._$L7=function(){D._$27();ba._$27();ra._$27();H._$27()};Ca.prototype.toString=function(){return this.id};Ha.prototype._$1s=function(){return this._$4S};Ha.prototype._$zP=function(){this._$4S=[]};Ha.prototype._$F0=function(a){this._$4S=a._$nP()};Ha.prototype._$Ks=function(a){this._$4S.push(a)};fa.tr=new qa;fa._$50=new qa;fa._$Ti=[0,0];fa._$Pi=[0,0];fa._$B=[0,0];fa.prototype._$lP=function(a,b,c,d){this.viewport=[a,b,c,d]};fa.prototype._$bL=function(){this.context.save();var a=this.viewport;null!=a&&(this.context.beginPath(),this.context._$Li(a[0],a[1],a[2],a[3]),this.context.clip())};fa.prototype._$ei=function(){this.context.restore()};fa.prototype.drawElements=function(a,b,c,d,f,e,h,l){try{f!=this._$Qo&&(this._$Qo=f,this.context.globalAlpha=f);var g=b.length,n=a.width,q=a.height,p=this.context,t=this._$xP,u=this._$uP,w=this._$6r,B=this._$3r,v=fa.tr,A=fa._$Ti,C=fa._$Pi,y=fa._$B;for(f=0;f<g;f+=3){p.save();var D=b[f],z=b[f+1],K=b[f+2],H=t+w*c[2*D],E=u+B*c[2*D+1],F=t+w*c[2*z],G=u+B*c[2*z+1],I=t+w*c[2*K],J=u+B*c[2*K+1];h&&(h._$PS(H,E,y),H=y[0],E=y[1],h._$PS(F,G,y),F=y[0],G=y[1],h._$PS(I,J,y),I=y[0],J=y[1]);var L=n*d[2*D],M=q-q*d[2*D+1],O=n*d[2*z],P=q-q*d[2*z+1],Q=n*d[2*K],R=q-q*d[2*K+1],T=Math.atan2(P-M,O-L),V=Math.atan2(G-E,F-H),S=F-H,U=G-E,W=Math.sqrt(S*S+U*U),S=O-L,U=P-M,aa=W/Math.sqrt(S*S+U*U);Ua._$ni(Q,R,L,M,O-L,P-M,-(P-M),O-L,A);Ua._$ni(I,J,H,E,F-H,G-E,-(G-E),F-H,C);var ca=(C[0]-A[0])/A[1],X=Math.min(L,O,Q),Z=Math.max(L,O,Q),Y=Math.min(M,P,R),ba=Math.max(M,P,R),da=Math.floor(X),ea=Math.floor(Y),ga=Math.ceil(Z),ja=Math.ceil(ba);v.identity();v.translate(H,E);v.rotate(V);v.scale(1,C[1]/A[1]);v.shear(ca,0);v.scale(aa,aa);v.rotate(-T);v.translate(-L,-M);v.setContext(p);if(e||(e=1.2),r.IGNORE_EXPAND&&(e=0),r.USE_CACHED_POLYGON_IMAGE){var ha=l._$e0;if(ha.gl_cacheImage=ha.gl_cacheImage||{},!ha.gl_cacheImage[f]){var ka=fa.createCanvas(ga-da,ja-ea);r.DEBUG_DATA.LDGL_CANVAS_MB=r.DEBUG_DATA.LDGL_CANVAS_MB||0;r.DEBUG_DATA.LDGL_CANVAS_MB+=(ga-da)*(ja-ea)*4;var ia=ka.getContext("2d");ia.translate(-da,-ea);fa.clip(ia,v,e,W,L,M,O,P,Q,R,H,E,F,G,I,J);ia.drawImage(a,0,0);ha.gl_cacheImage[f]={cacheCanvas:ka,cacheContext:ia}}p.drawImage(ha.gl_cacheImage[f].cacheCanvas,da,ea)}else r.IGNORE_CLIP||fa.clip(p,v,e,W,L,M,O,P,Q,R,H,E,F,G,I,J),r.USE_ADJUST_TRANSLATION&&(X=0,Z=n,Y=0,ba=q),p.drawImage(a,X,Y,Z-X,ba-Y,X,Y,Z-X,ba-Y);p.restore()}}catch(Za){k._$Rb(Za)}};fa.clip=function(a,b,c,d,f,e,h,k,l,p,r,t,u,w,B,v){.02<c?fa.expandClip(a,b,c,d,r,t,u,w,B,v):fa.clipWithTransform(a,null,f,e,h,k,l,p)};fa.expandClip=function(a,b,c,d,f,e,h,k,l,p){var g=h-f,q=k-e,n=l-f,r=p-e;c=0<g*r-q*n?c:-c;var t=-q,u=l-h,q=p-k,w=-q,B=Math.sqrt(u*u+q*q),x=-r,v=Math.sqrt(n*n+r*r),r=f-c*t/d,q=e-c*g/d,t=h-c*t/d;d=k-c*g/d;h-=c*w/B;k-=c*u/B;w=l-c*w/B;u=p-c*u/B;f+=c*x/v;e+=c*n/v;l+=c*x/v;p+=c*n/v;n=fa._$50;return null!=b._$P2(n)&&(fa.clipWithTransform(a,n,r,q,t,d,h,k,w,u,l,p,f,e),!0)};fa.clipWithTransform=function(a,b,c,d,f,e,h,l){if(7>arguments.length)return void k._$li("err : @LDGL.clip()");if(!(arguments[1]instanceof qa))return void k._$li("err : a[0] is _$6 LDTransform @LDGL.clip()");var g=fa._$B,q=b,n=arguments;if(a.beginPath(),q){q._$PS(n[2],n[3],g);a.moveTo(g[0],g[1]);for(var p=4;p<n.length;p+=2)q._$PS(n[p],n[p+1],g),a.lineTo(g[0],g[1])}else for(a.moveTo(n[2],n[3]),p=4;p<n.length;p+=2)a.lineTo(n[p],n[p+1]);a.clip()};fa.createCanvas=function(a,b){var c=document.createElement("canvas");return c.setAttribute("width",a),c.setAttribute("height",b),c||k._$li("err : "+c),c};fa.dumpValues=function(){for(var a="",b=0;b<arguments.length;b++)a+="["+b+"]\x3d "+arguments[b].toFixed(3)+" , ";console.log(a)};Ia.prototype._$F0=function(a){this._$TT=a._$_T();this._$LT=a._$_T();this._$FS=a._$_T();this._$wL=a._$nP()};Ia.prototype.getMinValue=function(){return this._$TT};Ia.prototype.getMaxValue=function(){return this._$LT};Ia.prototype.getDefaultValue=function(){return this._$FS};Ia.prototype.getParamID=function(){return this._$wL};na.prototype._$yo=function(){return this._$AT&&!this._$JS};na.prototype._$hS=function(a){this._$AT=a};na.prototype._$GT=function(){return this._$e0};na.prototype._$l2=function(a){this._$IP=a};na.prototype.getPartsIndex=function(){return this._$IP};na.prototype._$x2=function(){return this._$JS};na.prototype._$Ib=function(a){this._$JS=a};na.prototype.getTotalScale=function(){return this.totalScale};na.prototype.setTotalScale_notForClient=function(a){this.totalScale=a};na.prototype.getInterpolatedOpacity=function(){return this._$7s};na.prototype.setInterpolatedOpacity=function(a){this._$7s=a};na.prototype.getTotalOpacity=function(a){return this.totalOpacity};na.prototype.setTotalOpacity=function(a){this.totalOpacity=a};r._$2s="2.1.00_1";r._$Kr=201001E3;r._$sP=!0;r._$so=!0;r._$cb=!1;r._$3T=!0;r._$Ts=!0;r._$fb=!0;r._$ts=!0;r.L2D_DEFORMER_EXTEND=!0;r._$Wb=!1;r._$yr=!1;r._$Zs=!1;r.L2D_NO_ERROR=0;r._$i7=1E3;r._$9s=1001;r._$es=1100;r._$r7=2E3;r._$07=2001;r._$b7=2002;r._$H7=4E3;r.L2D_COLOR_BLEND_MODE_MULT=0;r.L2D_COLOR_BLEND_MODE_ADD=1;r.L2D_COLOR_BLEND_MODE_INTERPOLATE=2;r._$6b=!0;r._$cT=0;r.clippingMaskBufferSize=256;r.glContext=[];r.frameBuffers=[];r.fTexture=[];r.IGNORE_CLIP=!1;r.IGNORE_EXPAND=!1;r.EXPAND_W=2;r.USE_ADJUST_TRANSLATION=!0;r.USE_CANVAS_TRANSFORM=!0;r.USE_CACHED_POLYGON_IMAGE=!1;r.DEBUG_DATA={};r.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4};r.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2};r.PROFILE_IOS_DEFAULT=r.PROFILE_IOS_QUALITY;r.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2};r.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2};r.initProfile=function(){W.isIOS()?r.setupProfile(r.PROFILE_IOS_DEFAULT):W.isAndroid()?r.setupProfile(r.PROFILE_ANDROID):r.setupProfile(r.PROFILE_DESKTOP)};r.setupProfile=function(a,b){if("number"==typeof a)switch(a){case 9901:a=r.PROFILE_IOS_SPEED;break;case 9902:a=r.PROFILE_IOS_QUALITY;break;case 9903:a=r.PROFILE_IOS_DEFAULT;break;case 9904:a=r.PROFILE_ANDROID;break;case 9905:a=r.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+a)}2>arguments.length&&(b=!0);b&&console.log("profile : "+a.PROFILE_NAME);for(var c in a)r[c]=a[c],b&&console.log("  ["+c+"] \x3d "+a[c])};r.init=function(){r._$6b&&(console.log("Live2D %s",r._$2s),r._$6b=!1,!0,r.initProfile())};r.getVersionStr=function(){return r._$2s};r.getVersionNo=function(){return r._$Kr};r._$sT=function(a){r._$cT=a};r.getError=function(){var a=r._$cT;return r._$cT=0,a};r.dispose=function(){r.glContext=[];r.frameBuffers=[];r.fTexture=[]};r.setGL=function(a,b){r.glContext[b||0]=a};r.getGL=function(a){return r.glContext[a]};r.setClippingMaskBufferSize=function(a){r.clippingMaskBufferSize=a};r.getClippingMaskBufferSize=function(){return r.clippingMaskBufferSize};r.deleteBuffer=function(a){r.getGL(a).deleteFramebuffer(r.frameBuffers[a].framebuffer);delete r.frameBuffers[a];delete r.glContext[a]};Ra._$r2=function(a){return 0>a?0:1<a?1:.5-.5*Math.cos(a*da.PI_F)};Ba._$fr=-1;Ba.prototype.toString=function(){return this._$ib};S.prototype=new M;S._$42=0;S._$Os=30;S._$ms=0;S._$ns=1;S._$_s=2;S._$gT=[];S.prototype._$_S=function(a){this._$LP=a};S.prototype.getTextureNo=function(){return this._$LP};S.prototype._$ZL=function(){return this._$Qi};S.prototype._$H2=function(){return this._$JP};S.prototype.getNumPoints=function(){return this._$d0};S.prototype.getType=function(){return M._$wb};S.prototype._$B2=function(a,b,c){a=null!=b._$hr?b._$hr:b._$Cr;switch(R._$do){default:case R._$Ms:throw Error("_$L _$ro ");case R._$Qs:for(b=this._$d0-1;0<=b;--b)a[b*R._$No+4]=c}};S.prototype._$zP=function(){this._$GS=new wa;this._$GS._$zP()};S.prototype._$F0=function(a){M.prototype._$F0.call(this,a);this._$LP=a._$6L();this._$d0=a._$6L();this._$Yo=a._$6L();var b=a._$nP();this._$BP=new Int16Array(3*this._$Yo);for(var c=3*this._$Yo-1;0<=c;--c)this._$BP[c]=b[c];if(this._$Eo=a._$nP(),this._$Qi=a._$nP(),a.getFormatVersion()>=aa._$s7){if(this._$JP=a._$6L(),0!=this._$JP)0!=(1&this._$JP)&&(a=a._$6L(),null==this._$5P&&(this._$5P={}),this._$5P._$Hb=parseInt(a)),0!=(this._$JP&S._$Os)?this._$6s=(this._$JP&S._$Os)>>1:this._$6s=S._$ms,0!=(32&this._$JP)&&(this.culling=!1)}else this._$JP=0};S.prototype.init=function(a){a=new Qa(this);var b=this._$d0*R._$No,c=this._$32();switch(null!=a._$Cr&&(a._$Cr=null),a._$Cr=new Float32Array(b),null!=a._$hr&&(a._$hr=null),a._$hr=c?new Float32Array(b):null,R._$do){default:case R._$Ms:if(R._$Ls)for(b=this._$d0-1;0<=b;--b){var d=b<<1;this._$Qi[d+1]=1-this._$Qi[d+1]}break;case R._$Qs:for(b=this._$d0-1;0<=b;--b){var d=b<<1,f=b*R._$No,e=this._$Qi[d],d=this._$Qi[d+1];a._$Cr[f]=e;a._$Cr[f+1]=d;a._$Cr[f+4]=0;c&&(a._$hr[f]=e,a._$hr[f+1]=d,a._$hr[f+4]=0)}}return a};S.prototype._$Nr=function(a,b){if(this!=b._$GT()&&console.log("### assert!! ### "),this._$GS._$Ur(a)&&(M.prototype._$Nr.call(this,a,b),!b._$IS[0])){var c=S._$gT;c[0]=!1;ua._$Vr(a,this._$GS,c,this._$d0,this._$Eo,b._$Cr,R._$i2,R._$No)}};S.prototype._$2b=function(a,b){try{this!=b._$GT()&&console.log("### assert!! ### ");var c=!1;b._$IS[0]&&(c=!0);if(!c&&(M.prototype._$2b.call(this,a),this._$32())){var d=this.getTargetBaseDataID();if(b._$8r==M._$ur&&(b._$8r=a.getBaseDataIndex(d)),0>b._$8r)r._$so&&k._$li("_$L _$0P _$G :: %s",d);else{var f=a.getBaseData(b._$8r),e=a._$q2(b._$8r);null==f||e._$x2()?b._$AT=!1:(f._$nb(a,e,b._$Cr,b._$hr,this._$d0,R._$i2,R._$No),b._$AT=!0);b.baseOpacity=e.getTotalOpacity()}}}catch(A){throw A;}};S.prototype.draw=function(a,b,c){if(this!=c._$GT()&&console.log("### assert!! ### "),!c._$IS[0]){var d=this._$LP;0>d&&(d=1);b=this.getOpacity(b,c)*c._$VS*c.baseOpacity;var f=null!=c._$hr?c._$hr:c._$Cr;a.setClipBufPre_clipContextForDraw(c.clipBufPre_clipContext);a._$WP(this.culling);a._$Uo(d,3*this._$Yo,this._$BP,f,this._$Qi,b,this._$6s,c)}};S.prototype.dump=function(){console.log("  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) \n",this._$LP,this._$d0,this._$Yo);console.log("  _$Oi _$di \x3d { ");for(var a=0;a<this._$BP.length;a++)console.log("%5d ,",this._$BP[a]);console.log("\n  _$5i _$30");for(a=0;a<this._$Eo.length;a++){console.log("\n    _$30[%d] \x3d ",a);for(var b=this._$Eo[a],c=0;c<b.length;c++)console.log("%6.2f, ",b[c])}console.log("\n")};S.prototype._$72=function(a){return null==this._$5P?null:this._$5P[a]};S.prototype.getIndexArray=function(){return this._$BP};Qa.prototype=new Ma;Qa.prototype.getTransformedPoints=function(){return null!=this._$hr?this._$hr:this._$Cr};Sa.prototype._$HT=function(a){this.x=a.x;this.y=a.y};Sa.prototype._$HT=function(a,b){this.x=a;this.y=b};Z.prototype=new l;Z.loadModel=function(a){var b=new Z;return l._$62(b,a),b};Z.loadModel=function(a,b){var c=new Z(b||0);return l._$62(c,a),c};Z._$to=function(){return new Z};Z._$er=function(a){var b=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(0==b.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+b._$PL());for(var c=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],b=Z.loadModel(b._$3b()),d=0;d<c.length;d++){var f=new _$5(c[d]);if(0==f.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+f._$PL());b.setTexture(d,_$nL._$_o(a,f._$3b()))}return b};Z.prototype.setGL=function(a){r.setGL(a)};Z.prototype.setTransform=function(a){this.drawParamWebGL.setTransform(a)};Z.prototype.update=function(){this._$5S.update();this._$5S.preDraw(this.drawParamWebGL)};Z.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL)};Z.prototype._$K2=function(){this.drawParamWebGL._$K2()};Z.prototype.setTexture=function(a,b){null==this.drawParamWebGL&&k._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");this.drawParamWebGL.setTexture(a,b)};Z.prototype.setTexture=function(a,b){null==this.drawParamWebGL&&k._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");this.drawParamWebGL.setTexture(a,b)};Z.prototype._$Rs=function(){return this.drawParamWebGL._$Rs()};Z.prototype._$Ds=function(a){this.drawParamWebGL._$Ds(a)};Z.prototype.getDrawParam=function(){return this.drawParamWebGL};Z.prototype.setMatrix=function(a){this.drawParamWebGL.setMatrix(a)};Z.prototype.setPremultipliedAlpha=function(a){this.drawParamWebGL.setPremultipliedAlpha(a)};Z.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha()};Z.prototype.setAnisotropy=function(a){this.drawParamWebGL.setAnisotropy(a)};Z.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy()};Ea.prototype._$tb=function(){return this.motions};Ea.prototype.startMotion=function(a,b){for(var c=null,d=this.motions.length,f=0;f<d;++f)null!=(c=this.motions[f])&&(c._$qS(c._$w0.getFadeOut()),this._$eb&&k._$Ji("MotionQueueManager[size:%2d]-\x3estartMotion() / start _$K _$3 (m%d)\n",d,c._$sr));if(null==a)return-1;c=new Ja;c._$w0=a;this.motions.push(c);c=c._$sr;return this._$eb&&k._$Ji("MotionQueueManager[size:%2d]-\x3estartMotion() / new _$w0 (m%d)\n",d,c),c};Ea.prototype.updateParam=function(a){try{for(var b=!1,c=0;c<this.motions.length;c++){var d=this.motions[c];if(null!=d){var f=d._$w0;null!=f?(f.updateParam(a,d),b=!0,d.isFinished()&&(this._$eb&&k._$Ji("MotionQueueManager[size:%2d]-\x3eupdateParam() / _$T0 _$w0 (m%d)\n",this.motions.length-1,d._$sr),this.motions.splice(c,1),c--)):(this.motions=this.motions.splice(c,1),c--)}else this.motions.splice(c,1),c--}return b}catch(q){return k._$li(q),!0}};Ea.prototype.isFinished=function(a){if(1<=arguments.length){for(var b=0;b<this.motions.length;b++){var c=this.motions[b];if(null!=c&&c._$sr==a&&!c.isFinished())return!1}return!0}for(b=0;b<this.motions.length;b++)if(c=this.motions[b],null!=c)if(null!=c._$w0){if(!c.isFinished())return!1}else this.motions.splice(b,1),b--;else this.motions.splice(b,1),b--;return!0};Ea.prototype.stopAllMotions=function(){for(var a=0;a<this.motions.length;a++){var b=this.motions[a];null!=b&&b._$w0;this.motions.splice(a,1);a--}};Ea.prototype._$Zr=function(a){this._$eb=a};Ea.prototype._$e=function(){console.log("-- _$R --\n");for(var a=0;a<this.motions.length;a++)console.log("MotionQueueEnt[%d] :: %s\n",this.motions.length,this.motions[a]._$w0.toString())};Ja._$Gs=0;Ja.prototype.isFinished=function(){return this._$9L};Ja.prototype._$qS=function(a){a=F.getUserTimeMSec()+a;(0>this._$Do||a<this._$Do)&&(this._$Do=a)};Ja.prototype._$Bs=function(){return this._$sr};qa.prototype.setContext=function(a){var b=this.m;a.transform(b[0],b[1],b[3],b[4],b[6],b[7])};qa.prototype.toString=function(){for(var a="LDTransform { ",b=0;9>b;b++)a+=this.m[b].toFixed(2)+" ,";return a+" }"};qa.prototype.identity=function(){var a=this.m;a[0]=a[4]=a[8]=1;a[1]=a[2]=a[3]=a[5]=a[6]=a[7]=0};qa.prototype._$PS=function(a,b,c){null==c&&(c=[0,0]);var d=this.m;return c[0]=d[0]*a+d[3]*b+d[6],c[1]=d[1]*a+d[4]*b+d[7],c};qa.prototype._$P2=function(a){a||(a=new qa);var b=this.m,c=b[0],d=b[1],f=b[2],e=b[3],h=b[4],k=b[5],l=b[6],p=b[7],b=b[8],r=c*h*b+d*k*l+f*e*p-c*k*p-f*h*l-d*e*b;if(0==r)return null;r=1/r;return a.m[0]=r*(h*b-p*k),a.m[1]=r*(p*f-d*b),a.m[2]=r*(d*k-h*f),a.m[3]=r*(l*k-e*b),a.m[4]=r*(c*b-l*f),a.m[5]=r*(e*f-c*k),a.m[6]=r*(e*p-l*h),a.m[7]=r*(l*d-c*p),a.m[8]=r*(c*h-e*d),a};qa.prototype.transform=function(a,b,c){null==c&&(c=[0,0]);var d=this.m;return c[0]=d[0]*a+d[3]*b+d[6],c[1]=d[1]*a+d[4]*b+d[7],c};qa.prototype.translate=function(a,b){var c=this.m;c[6]=c[0]*a+c[3]*b+c[6];c[7]=c[1]*a+c[4]*b+c[7];c[8]=c[2]*a+c[5]*b+c[8]};qa.prototype.scale=function(a,b){var c=this.m;c[0]*=a;c[1]*=a;c[2]*=a;c[3]*=b;c[4]*=b;c[5]*=b};qa.prototype.shear=function(a,b){var c=this.m,d=c[0]+c[3]*b,f=c[1]+c[4]*b,e=c[2]+c[5]*b;c[3]=c[0]*a+c[3];c[4]=c[1]*a+c[4];c[5]=c[2]*a+c[5];c[0]=d;c[1]=f;c[2]=e};qa.prototype.rotate=function(a){var b=this.m,c=Math.cos(a);a=Math.sin(a);var d=b[0]*c+b[3]*a,f=b[1]*c+b[4]*a,e=b[2]*c+b[5]*a;b[3]=-b[0]*a+b[3]*c;b[4]=-b[1]*a+b[4]*c;b[5]=-b[2]*a+b[5]*c;b[0]=d;b[1]=f;b[2]=e};qa.prototype.concatenate=function(a){var b=this.m;a=a.m;var c=b[1]*a[0]+b[4]*a[1]+b[7]*a[2],d=b[2]*a[0]+b[5]*a[1]+b[8]*a[2],f=b[0]*a[3]+b[3]*a[4]+b[6]*a[5],e=b[1]*a[3]+b[4]*a[4]+b[7]*a[5],h=b[2]*a[3]+b[5]*a[4]+b[8]*a[5],k=b[0]*a[6]+b[3]*a[7]+b[6]*a[8],l=b[1]*a[6]+b[4]*a[7]+b[7]*a[8],p=b[2]*a[6]+b[5]*a[7]+b[8]*a[8];m[0]=b[0]*a[0]+b[3]*a[1]+b[6]*a[2];m[1]=c;m[2]=d;m[3]=f;m[4]=e;m[5]=h;m[6]=k;m[7]=l;m[8]=p};ba.prototype=new Ca;ba._$eT=null;ba._$tP={};ba._$2o=function(){return null==ba._$eT&&(ba._$eT=ba.getID("DST_BASE")),ba._$eT};ba._$27=function(){ba._$tP.clear();ba._$eT=null};ba.getID=function(a){var b=ba._$tP[a];return null==b&&(b=new ba(a),ba._$tP[a]=b),b};ba.prototype._$3s=function(){return new ba};Y.prototype=new Q;Y._$9r=function(a){return new Float32Array(a)};Y._$vb=function(a){return new Int16Array(a)};Y._$cr=function(a,b){return null==a||a._$yL()<b.length?(a=Y._$9r(2*b.length),a.put(b),a._$oT(0)):(a.clear(),a.put(b),a._$oT(0)),a};Y._$mb=function(a,b){return null==a||a._$yL()<b.length?(a=Y._$vb(2*b.length),a.put(b),a._$oT(0)):(a.clear(),a.put(b),a._$oT(0)),a};Y._$Hs=function(){return this._$Gr};Y._$as=function(a){this._$Gr=a};Y.prototype.getGL=function(){return this.gl};Y.prototype.setGL=function(a){this.gl=a};Y.prototype.setTransform=function(a){this.transform=a};Y.prototype._$ZT=function(){var a=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=a.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)));a.disable(a.SCISSOR_TEST);a.disable(a.STENCIL_TEST);a.disable(a.DEPTH_TEST);a.frontFace(a.CW);a.enable(a.BLEND);a.colorMask(1,1,1,1);a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)};Y.prototype._$Uo=function(a,b,c,d,f,e,h,k){if(!(.01>e&&null==this.clipBufPre_clipContextMask)){b=(.9<e&&r.EXPAND_W,this.gl);if(null==this.gl)throw Error("gl is null");k=1*this._$C0*e;var g=1*this._$tT*e,l=1*this._$WL*e;e*=this._$lT;null!=this.clipBufPre_clipContextMask?(b.frontFace(b.CCW),b.useProgram(this.shaderProgram),this._$vS=Ka(b,this._$vS,d),this._$no=Ta(b,this._$no,c),b.enableVertexAttribArray(this.a_position_Loc),b.vertexAttribPointer(this.a_position_Loc,2,b.FLOAT,!1,0,0),this._$NT=Ka(b,this._$NT,f),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,this.textures[a]),b.uniform1i(this.s_texture0_Loc,1),b.enableVertexAttribArray(this.a_texCoord_Loc),b.vertexAttribPointer(this.a_texCoord_Loc,2,b.FLOAT,!1,0,0),b.uniformMatrix4fv(this.u_matrix_Loc,!1,this.getClipBufPre_clipContextMask().matrixForMask),a=this.getClipBufPre_clipContextMask().layoutChannelNo,a=this.getChannelFlagAsColor(a),b.uniform4f(this.u_channelFlag,a.r,a.g,a.b,a.a),a=this.getClipBufPre_clipContextMask().layoutBounds,b.uniform4f(this.u_baseColor_Loc,2*a.x-1,2*a.y-1,2*a._$EL()-1,2*a._$5T()-1),b.uniform1i(this.u_maskFlag_Loc,!0)):null!=this.getClipBufPre_clipContextDraw()?(b.useProgram(this.shaderProgramOff),this._$vS=Ka(b,this._$vS,d),this._$no=Ta(b,this._$no,c),b.enableVertexAttribArray(this.a_position_Loc_Off),b.vertexAttribPointer(this.a_position_Loc_Off,2,b.FLOAT,!1,0,0),this._$NT=Ka(b,this._$NT,f),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,this.textures[a]),b.uniform1i(this.s_texture0_Loc_Off,1),b.enableVertexAttribArray(this.a_texCoord_Loc_Off),b.vertexAttribPointer(this.a_texCoord_Loc_Off,2,b.FLOAT,!1,0,0),b.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,!1,this.getClipBufPre_clipContextDraw().matrixForDraw),b.uniformMatrix4fv(this.u_matrix_Loc_Off,!1,this.matrix4x4),b.activeTexture(b.TEXTURE2),b.bindTexture(b.TEXTURE_2D,r.fTexture[this.glno]),b.uniform1i(this.s_texture1_Loc_Off,2),a=this.getClipBufPre_clipContextDraw().layoutChannelNo,a=this.getChannelFlagAsColor(a),b.uniform4f(this.u_channelFlag_Loc_Off,a.r,a.g,a.b,a.a),b.uniform4f(this.u_baseColor_Loc_Off,k,g,l,e)):(b.useProgram(this.shaderProgram),this._$vS=Ka(b,this._$vS,d),this._$no=Ta(b,this._$no,c),b.enableVertexAttribArray(this.a_position_Loc),b.vertexAttribPointer(this.a_position_Loc,2,b.FLOAT,!1,0,0),this._$NT=Ka(b,this._$NT,f),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,this.textures[a]),b.uniform1i(this.s_texture0_Loc,1),b.enableVertexAttribArray(this.a_texCoord_Loc),b.vertexAttribPointer(this.a_texCoord_Loc,2,b.FLOAT,!1,0,0),b.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4),b.uniform4f(this.u_baseColor_Loc,k,g,l,e),b.uniform1i(this.u_maskFlag_Loc,!1));this.culling?this.gl.enable(b.CULL_FACE):this.gl.disable(b.CULL_FACE);this.gl.enable(b.BLEND);var n,p,q,t;if(null!=this.clipBufPre_clipContextMask)n=b.ONE,p=b.ONE_MINUS_SRC_ALPHA,q=b.ONE,t=b.ONE_MINUS_SRC_ALPHA;else switch(h){case S._$ms:n=b.ONE;p=b.ONE_MINUS_SRC_ALPHA;q=b.ONE;t=b.ONE_MINUS_SRC_ALPHA;break;case S._$ns:p=n=b.ONE;q=b.ZERO;t=b.ONE;break;case S._$_s:n=b.DST_COLOR,p=b.ONE_MINUS_SRC_ALPHA,q=b.ZERO,t=b.ONE}b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD);b.blendFuncSeparate(n,p,q,t);this.anisotropyExt&&b.texParameteri(b.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);b.drawElements(b.TRIANGLES,c.length,b.UNSIGNED_SHORT,0);b.bindTexture(b.TEXTURE_2D,null)}};Y.prototype._$Rs=function(){throw Error("_$Rs");};Y.prototype._$Ds=function(a){throw Error("_$Ds");};Y.prototype._$K2=function(){for(var a=0;a<this.textures.length;a++)0!=this.textures[a]&&(this.gl._$K2(1,this.textures,a),this.textures[a]=null)};Y.prototype.setTexture=function(a,b){this.textures[a]=b};Y.prototype.initShader=function(){var a=this.gl;this.loadShaders2();this.a_position_Loc=a.getAttribLocation(this.shaderProgram,"a_position");this.a_texCoord_Loc=a.getAttribLocation(this.shaderProgram,"a_texCoord");this.u_matrix_Loc=a.getUniformLocation(this.shaderProgram,"u_mvpMatrix");this.s_texture0_Loc=a.getUniformLocation(this.shaderProgram,"s_texture0");this.u_channelFlag=a.getUniformLocation(this.shaderProgram,"u_channelFlag");this.u_baseColor_Loc=a.getUniformLocation(this.shaderProgram,"u_baseColor");this.u_maskFlag_Loc=a.getUniformLocation(this.shaderProgram,"u_maskFlag");this.a_position_Loc_Off=a.getAttribLocation(this.shaderProgramOff,"a_position");this.a_texCoord_Loc_Off=a.getAttribLocation(this.shaderProgramOff,"a_texCoord");this.u_matrix_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix");this.u_clipMatrix_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix");this.s_texture0_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"s_texture0");this.s_texture1_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"s_texture1");this.u_channelFlag_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"u_channelFlag");this.u_baseColor_Loc_Off=a.getUniformLocation(this.shaderProgramOff,"u_baseColor")};Y.prototype.disposeShader=function(){var a=this.gl;this.shaderProgram&&(a.deleteProgram(this.shaderProgram),this.shaderProgram=null);this.shaderProgramOff&&(a.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=null)};Y.prototype.compileShader=function(a,b){var c=this.gl,d=c.createShader(a);if(null==d)return k._$Ji("_$L0 to create shader"),null;if(c.shaderSource(d,b),c.compileShader(d),!c.getShaderParameter(d,c.COMPILE_STATUS)){var f=c.getShaderInfoLog(d);return k._$Ji("_$L0 to compile shader : "+f),c.deleteShader(d),null}return d};Y.prototype.loadShaders2=function(){var a=this.gl;if((this.shaderProgram=a.createProgram(),!this.shaderProgram)||(this.shaderProgramOff=a.createProgram(),!this.shaderProgramOff))return!1;if(this.vertShader=this.compileShader(a.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position \x3d u_mvpMatrix * a_position;    v_ClipPos \x3d u_mvpMatrix * a_position;    v_texCoord \x3d a_texCoord;}"),!this.vertShader)return k._$Ji("Vertex shader compile _$li!"),!1;if(this.vertShaderOff=this.compileShader(a.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position \x3d u_mvpMatrix * a_position;    v_ClipPos \x3d u_ClipMatrix * a_position;    v_texCoord \x3d a_texCoord ;}"),!this.vertShaderOff)return k._$Ji("OffVertex shader compile _$li!"),!1;if(this.fragShader=this.compileShader(a.FRAGMENT_SHADER,"precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside \x3d             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor \x3d u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor \x3d texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor \x3d smpColor;}"),!this.fragShader)return k._$Ji("Fragment shader compile _$li!"),!1;if(this.fragShaderOff=this.compileShader(a.FRAGMENT_SHADER,"precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask \x3d texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask \x3d texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal \x3d clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask \x3d col_formask * maskVal;    gl_FragColor \x3d col_formask;}"),!this.fragShaderOff)return k._$Ji("OffFragment shader compile _$li!"),!1;if(a.attachShader(this.shaderProgram,this.vertShader),a.attachShader(this.shaderProgram,this.fragShader),a.attachShader(this.shaderProgramOff,this.vertShaderOff),a.attachShader(this.shaderProgramOff,this.fragShaderOff),a.linkProgram(this.shaderProgram),a.linkProgram(this.shaderProgramOff),!a.getProgramParameter(this.shaderProgram,a.LINK_STATUS)){var b=a.getProgramInfoLog(this.shaderProgram);return k._$Ji("_$L0 to link program: "+b),this.vertShader&&(a.deleteShader(this.vertShader),this.vertShader=0),this.fragShader&&(a.deleteShader(this.fragShader),this.fragShader=0),this.shaderProgram&&(a.deleteProgram(this.shaderProgram),this.shaderProgram=0),this.vertShaderOff&&(a.deleteShader(this.vertShaderOff),this.vertShaderOff=0),this.fragShaderOff&&(a.deleteShader(this.fragShaderOff),this.fragShaderOff=0),this.shaderProgramOff&&(a.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=0),!1}return!0};Y.prototype.createFramebuffer=function(){var a=this.gl,b=r.clippingMaskBufferSize,c=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,c);var d=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,d);a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,b,b);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,d);var f=a.createTexture();return a.bindTexture(a.TEXTURE_2D,f),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,b,0,a.RGBA,a.UNSIGNED_BYTE,null),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,f,0),a.bindTexture(a.TEXTURE_2D,null),a.bindRenderbuffer(a.RENDERBUFFER,null),a.bindFramebuffer(a.FRAMEBUFFER,null),r.fTexture[this.glno]=f,{framebuffer:c,renderbuffer:d,texture:r.fTexture[this.glno]}};ja.prototype._$fP=function(){var a,b,c,d=this._$ST();if(0==(128&d))return 255&d;if(0==(128&(a=this._$ST())))return(127&d)<<7|127&a;if(0==(128&(b=this._$ST())))return(127&d)<<14|(127&a)<<7|255&b;if(0==(128&(c=this._$ST())))return(127&d)<<21|(127&a)<<14|(127&b)<<7|255&c;throw new Ba("_$L _$0P  _");};ja.prototype.getFormatVersion=function(){return this._$S2};ja.prototype._$gr=function(a){this._$S2=a};ja.prototype._$3L=function(){return this._$fP()};ja.prototype._$mP=function(){return this._$zT(),this._$F+=8,this._$T.getFloat64(this._$F-8)};ja.prototype._$_T=function(){return this._$zT(),this._$F+=4,this._$T.getFloat32(this._$F-4)};ja.prototype._$6L=function(){return this._$zT(),this._$F+=4,this._$T.getInt32(this._$F-4)};ja.prototype._$ST=function(){return this._$zT(),this._$T.getInt8(this._$F++)};ja.prototype._$9T=function(){return this._$zT(),this._$F+=2,this._$T.getInt16(this._$F-2)};ja.prototype._$2T=function(){throw this._$zT(),this._$F+=8,new Ba("_$L _$q read long");};ja.prototype._$po=function(){return this._$zT(),0!=this._$T.getInt8(this._$F++)};var Xa=!0;ja.prototype._$bT=function(){this._$zT();var a=this._$3L(),b=null;if(Xa)try{for(var c=new ArrayBuffer(2*a),b=new Uint16Array(c),d=0;d<a;++d)b[d]=this._$T.getUint8(this._$F++);return String.fromCharCode.apply(null,b)}catch(f){Xa=!1}try{c=[];if(null==b)for(d=0;d<a;++d)c[d]=this._$T.getUint8(this._$F++);else for(d=0;d<a;++d)c[d]=b[d];return String.fromCharCode.apply(null,c)}catch(f){console.log("read utf8 / _$rT _$L0 !! : "+f)}};ja.prototype._$cS=function(){this._$zT();for(var a=this._$3L(),b=new Int32Array(a),c=0;c<a;c++)b[c]=this._$T.getInt32(this._$F),this._$F+=4;return b};ja.prototype._$Tb=function(){this._$zT();for(var a=this._$3L(),b=new Float32Array(a),c=0;c<a;c++)b[c]=this._$T.getFloat32(this._$F),this._$F+=4;return b};ja.prototype._$5b=function(){this._$zT();for(var a=this._$3L(),b=new Float64Array(a),c=0;c<a;c++)b[c]=this._$T.getFloat64(this._$F),this._$F+=8;return b};ja.prototype._$nP=function(){return this._$Jb(-1)};ja.prototype._$Jb=function(a){if(this._$zT(),0>a&&(a=this._$3L()),a==aa._$7P){a=this._$6L();if(0<=a&&a<this._$Ko.length)return this._$Ko[a];throw new Ba("_$sL _$4i @_$m0");}a=this._$4b(a);return this._$Ko.push(a),a};ja.prototype._$4b=function(a){if(0==a)return null;if(50==a)return a=this._$bT(),a=ra.getID(a);if(51==a)return a=this._$bT(),a=ba.getID(a);if(134==a)return a=this._$bT(),a=H.getID(a);if(60==a)return a=this._$bT(),a=D.getID(a);if(48<=a)return a=aa._$9o(a),null!=a?(a._$F0(this),a):null;switch(a){case 1:return this._$bT();case 10:return new C(this._$6L(),!0);case 11:return new ea(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new ea(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new oa(this._$mP(),this._$mP());case 14:return new oa(this._$_T(),this._$_T());case 15:var b=this._$3L();a=Array(b);for(var c=0;c<b;c++)a[c]=this._$nP();return a;case 17:return a=new J(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());case 21:return new B(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new Sa(this._$6L(),this._$6L());case 23:throw Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new Ba("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+a);default:throw new Ba("_$6 _$q : _$nP() NO _$i : "+a);}};ja.prototype._$8L=function(){return 0==this._$hL?this._$v0=this._$ST():8==this._$hL&&(this._$v0=this._$ST(),this._$hL=0),1==(this._$v0>>7-this._$hL++&1)};ja.prototype._$zT=function(){0!=this._$hL&&(this._$hL=0)};da._$2S=Math.PI/180;da._$bS=Math.PI/180;da._$wS=180/Math.PI;da._$NS=180/Math.PI;da.PI_F=Math.PI;da._$kT=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1];da._$92=function(a,b){return da._$tS(Math.atan2(a[1],a[0]),Math.atan2(b[1],b[0]))};da._$tS=function(a,b){for(var c=a-b;c<-Math.PI;)c+=2*Math.PI;for(;c>Math.PI;)c-=2*Math.PI;return c};da._$9=function(a){return Math.sin(a)};da.fcos=function(a){return Math.cos(a)};Ma.prototype._$u2=function(){return this._$IS[0]};Ma.prototype._$yo=function(){return this._$AT&&!this._$IS[0]};Ma.prototype._$GT=function(){return this._$e0};W._$W2=0;W.SYSTEM_INFO=null;W.USER_AGENT=navigator.userAgent;W.isIPhone=function(){return W.SYSTEM_INFO||W.setup(),W.SYSTEM_INFO._isIPhone};W.isIOS=function(){return W.SYSTEM_INFO||W.setup(),W.SYSTEM_INFO._isIPhone||W.SYSTEM_INFO._isIPad};W.isAndroid=function(){return W.SYSTEM_INFO||W.setup(),W.SYSTEM_INFO._isAndroid};W.getOSVersion=function(){return W.SYSTEM_INFO||W.setup(),W.SYSTEM_INFO.version};W.getOS=function(){return W.SYSTEM_INFO||W.setup(),W.SYSTEM_INFO._isIPhone||W.SYSTEM_INFO._isIPad?"iOS":W.SYSTEM_INFO._isAndroid?"Android":"_$Q0 OS"};W.setup=function(){function a(a,b){for(var c=a.substring(b).split(/[ _,;\.]/),d=0,f=0;2>=f&&!isNaN(c[f]);f++){var e=parseInt(c[f]);if(0>e||999<e){k._$li("err : "+e+" @UtHtml5.setup()");d=0;break}d+=e*Math.pow(1E3,2-f)}return d}var b,c=W.USER_AGENT,d=W.SYSTEM_INFO={userAgent:c};if(0<=(b=c.indexOf("iPhone OS ")))d.os="iPhone",d._isIPhone=!0,d.version=a(c,b+10);else if(0<=(b=c.indexOf("iPad"))){if(0>(b=c.indexOf("CPU OS")))return void k._$li(" err : "+c+" @UtHtml5.setup()");d.os="iPad";d._isIPad=!0;d.version=a(c,b+7)}else 0<=(b=c.indexOf("Android"))?(d.os="Android",d._isAndroid=!0,d.version=a(c,b+8)):(d.os="-",d.version=-1)};window.UtSystem=F;window.UtDebug=k;window.LDTransform=qa;window.LDGL=fa;window.Live2D=r;window.Live2DModelWebGL=Z;window.Live2DModelJS=la;window.Live2DMotion=X;window.MotionQueueManager=Ea;window.PhysicsHair=w;window.AMotion=d;window.PartsDataID=H;window.DrawDataID=ra;window.BaseDataID=ba;window.ParamID=D;r.init();z=!1}()}).call(L,O(7))},function(T,L){T.exports={"import":function(){throw Error("System.import cannot be used indirectly");}}},function(T,L,O){function e(d){return d&&d.__esModule?d:{"default":d}}function l(){this.models=[];this.count=-1;this.reloadFlg=!1;Live2D.init();t.Live2DFramework.setPlatformManager(new K["default"])}Object.defineProperty(L,"__esModule",{value:!0});L["default"]=l;var t=O(0);T=O(9);var K=e(T);T=O(10);var v=e(T);O=O(1);var C=e(O);l.prototype.createModel=function(){var d=new v["default"];return this.models.push(d),d};l.prototype.changeModel=function(d,e){this.reloadFlg&&(this.reloadFlg=!1,this.releaseModel(0,d),this.createModel(),this.models[0].load(d,e))};l.prototype.getModel=function(d){return d>=this.models.length?null:this.models[d]};l.prototype.releaseModel=function(d,e){this.models.length<=d||(this.models[d].release(e),delete this.models[d],this.models.splice(d,1))};l.prototype.numModels=function(){return this.models.length};l.prototype.setDrag=function(d,e){for(var k=0;k<this.models.length;k++)this.models[k].setDrag(d,e)};l.prototype.maxScaleEvent=function(){C["default"].DEBUG_LOG&&console.log("Max scale event.");for(var d=0;d<this.models.length;d++)this.models[d].startRandomMotion(C["default"].MOTION_GROUP_PINCH_IN,C["default"].PRIORITY_NORMAL)};l.prototype.minScaleEvent=function(){C["default"].DEBUG_LOG&&console.log("Min scale event.");for(var d=0;d<this.models.length;d++)this.models[d].startRandomMotion(C["default"].MOTION_GROUP_PINCH_OUT,C["default"].PRIORITY_NORMAL)};l.prototype.tapEvent=function(d,e){C["default"].DEBUG_LOG&&console.log("tapEvent view x:"+d+" y:"+e);for(var k=0;k<this.models.length;k++)this.models[k].hitTest(C["default"].HIT_AREA_HEAD,d,e)?(C["default"].DEBUG_LOG&&console.log("Tap face."),this.models[k].setRandomExpression()):this.models[k].hitTest(C["default"].HIT_AREA_BODY,d,e)?(C["default"].DEBUG_LOG&&console.log("Tap body. models["+k+"]"),this.models[k].startRandomMotion(C["default"].MOTION_GROUP_TAP_BODY,C["default"].PRIORITY_NORMAL)):this.models[k].hitTestCustom("head",d,e)?(C["default"].DEBUG_LOG&&console.log("Tap face."),this.models[k].startRandomMotion(C["default"].MOTION_GROUP_FLICK_HEAD,C["default"].PRIORITY_NORMAL)):this.models[k].hitTestCustom("body",d,e)&&(C["default"].DEBUG_LOG&&console.log("Tap body. models["+k+"]"),this.models[k].startRandomMotion(C["default"].MOTION_GROUP_TAP_BODY,C["default"].PRIORITY_NORMAL));return!0}},function(T,L,O){function e(){}Object.defineProperty(L,"__esModule",{value:!0});L["default"]=e;var l=O(2),t={};e.prototype.loadBytes=function(e,l){if(void 0!==t[e])l(t[e]);else{var v=new XMLHttpRequest;v.open("GET",e,!0);v.responseType="arraybuffer";v.onload=function(){switch(v.status){case 200:t[e]=v.response;l(v.response);break;default:console.error("Failed to load ("+v.status+") : "+e)}};v.send(null)}};e.prototype.loadString=function(e){this.loadBytes(e,function(e){return e})};e.prototype.loadLive2DModel=function(e,l){var t=null;this.loadBytes(e,function(d){t=Live2DModelWebGL.loadModel(d);l(t)})};e.prototype.loadTexture=function(e,t,C,d){var k=new Image;k.crossOrigin="Anonymous";k.src=C;k.onload=function(){var u=(0,l.getContext)(),B=u.createTexture();if(!B)return console.error("Failed to generate gl texture name."),-1;0==e.isPremultipliedAlpha()&&u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,1);u.activeTexture(u.TEXTURE0);u.bindTexture(u.TEXTURE_2D,B);u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,k);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR_MIPMAP_NEAREST);u.generateMipmap(u.TEXTURE_2D);e.setTexture(t,B);"function"==typeof d&&d()};k.onerror=function(){console.error("Failed to load image : "+C)}};e.prototype.jsonParseFromBytes=function(e){var l,t=new Uint8Array(e,0,3);return l=239==t[0]&&187==t[1]&&191==t[2]?String.fromCharCode.apply(null,new Uint8Array(e,3)):String.fromCharCode.apply(null,new Uint8Array(e)),JSON.parse(l)};e.prototype.log=function(e){}},function(T,L,O){function e(d){return d&&d.__esModule?d:{"default":d}}function l(){t.L2DBaseModel.prototype.constructor.call(this);this.modelHomeDir="";this.modelSetting=null;this.tmpMatrix=[]}Object.defineProperty(L,"__esModule",{value:!0});L["default"]=l;var t=O(0);T=O(11);var K=e(T);T=O(1);var v=e(T);O=O(3);var C=e(O);l.prototype=new t.L2DBaseModel;l.prototype.load=function(d,e,l){this.setUpdating(!0);this.setInitialized(!1);this.modelHomeDir=e.substring(0,e.lastIndexOf("/")+1);this.modelSetting=new K["default"];var k=this;this.modelSetting.loadModelSetting(e,function(){var d=k.modelHomeDir+k.modelSetting.getModelFile();k.loadModelData(d,function(d){for(d=0;d<k.modelSetting.getTextureNum();d++){var e=/^https?:\/\/|^\/\//i.test(k.modelSetting.getTextureFile(d))?k.modelSetting.getTextureFile(d):k.modelHomeDir+k.modelSetting.getTextureFile(d);k.loadTexture(d,e,function(){if(k.isTexLoaded){if(0<k.modelSetting.getExpressionNum()){k.expressions={};for(var d=0;d<k.modelSetting.getExpressionNum();d++){var e=k.modelSetting.getExpressionName(d),h=k.modelHomeDir+k.modelSetting.getExpressionFile(d);k.loadExpression(e,h)}}else k.expressionManager=null,k.expressions={};if(k.eyeBlink,null!=k.modelSetting.getPhysicsFile()?k.loadPhysics(k.modelHomeDir+k.modelSetting.getPhysicsFile()):k.physics=null,null!=k.modelSetting.getPoseFile()?k.loadPose(k.modelHomeDir+k.modelSetting.getPoseFile(),function(){k.pose.updateParam(k.live2DModel)}):k.pose=null,null!=k.modelSetting.getLayout())d=k.modelSetting.getLayout(),null!=d.width&&k.modelMatrix.setWidth(d.width),null!=d.height&&k.modelMatrix.setHeight(d.height),null!=d.x&&k.modelMatrix.setX(d.x),null!=d.y&&k.modelMatrix.setY(d.y),null!=d.center_x&&k.modelMatrix.centerX(d.center_x),null!=d.center_y&&k.modelMatrix.centerY(d.center_y),null!=d.top&&k.modelMatrix.top(d.top),null!=d.bottom&&k.modelMatrix.bottom(d.bottom),null!=d.left&&k.modelMatrix.left(d.left),null!=d.right&&k.modelMatrix.right(d.right);null!=k.modelSetting.getHitAreasCustom()&&(d=k.modelSetting.getHitAreasCustom(),null!=d.head_x&&(v["default"].hit_areas_custom_head_x=d.head_x),null!=d.head_y&&(v["default"].hit_areas_custom_head_y=d.head_y),null!=d.body_x&&(v["default"].hit_areas_custom_body_x=d.body_x),null!=d.body_y&&(v["default"].hit_areas_custom_body_y=d.body_y));for(d=0;d<k.modelSetting.getInitParamNum();d++)k.live2DModel.setParamFloat(k.modelSetting.getInitParamID(d),k.modelSetting.getInitParamValue(d));for(d=0;d<k.modelSetting.getInitPartsVisibleNum();d++)k.live2DModel.setPartsOpacity(k.modelSetting.getInitPartsVisibleID(d),k.modelSetting.getInitPartsVisibleValue(d));k.live2DModel.saveParam();k.preloadMotionGroup(v["default"].MOTION_GROUP_IDLE);k.preloadMotionGroup(v["default"].MOTION_GROUP_SLEEPY);k.mainMotionManager.stopAllMotions();k.setUpdating(!1);k.setInitialized(!0);"function"==typeof l&&l()}})}})})};l.prototype.release=function(d){var e=t.Live2DFramework.getPlatformManager();d.deleteTexture(e.texture)};l.prototype.preloadMotionGroup=function(d){for(var e=this,l=0;l<this.modelSetting.getMotionNum(d);l++){var t=this.modelSetting.getMotionFile(d,l);this.loadMotion(t,this.modelHomeDir+t,function(k){k.setFadeIn(e.modelSetting.getMotionFadeIn(d,l));k.setFadeOut(e.modelSetting.getMotionFadeOut(d,l))})}};l.prototype.update=function(){if(null==this.live2DModel)return void(v["default"].DEBUG_LOG&&console.error("Failed to update."));var d=2*((UtSystem.getUserTimeMSec()-this.startTimeMSec)/1E3)*Math.PI;this.mainMotionManager.isFinished()&&("1"===sessionStorage.getItem("Sleepy")?this.startRandomMotion(v["default"].MOTION_GROUP_SLEEPY,v["default"].PRIORITY_SLEEPY):this.startRandomMotion(v["default"].MOTION_GROUP_IDLE,v["default"].PRIORITY_IDLE));this.live2DModel.loadParam();this.mainMotionManager.updateParam(this.live2DModel)||null!=this.eyeBlink&&this.eyeBlink.updateParam(this.live2DModel);this.live2DModel.saveParam();null==this.expressionManager||null==this.expressions||this.expressionManager.isFinished()||this.expressionManager.updateParam(this.live2DModel);this.live2DModel.addToParamFloat("PARAM_ANGLE_X",30*this.dragX,1);this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",30*this.dragY,1);this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",this.dragX*this.dragY*-30,1);this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",10*this.dragX,1);this.live2DModel.addToParamFloat("PARAM_EYE_BALL_X",this.dragX,1);this.live2DModel.addToParamFloat("PARAM_EYE_BALL_Y",this.dragY,1);this.live2DModel.addToParamFloat("PARAM_ANGLE_X",Number(15*Math.sin(d/6.5345)),.5);this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",Number(8*Math.sin(d/3.5345)),.5);this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",Number(10*Math.sin(d/5.5345)),.5);this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",Number(4*Math.sin(d/15.5345)),.5);this.live2DModel.setParamFloat("PARAM_BREATH",Number(.5+.5*Math.sin(d/3.2345)),1);null!=this.physics&&this.physics.updateParam(this.live2DModel);null==this.lipSync&&this.live2DModel.setParamFloat("PARAM_MOUTH_OPEN_Y",this.lipSyncValue);null!=this.pose&&this.pose.updateParam(this.live2DModel);this.live2DModel.update()};l.prototype.setRandomExpression=function(){var d=[],e;for(e in this.expressions)d.push(e);e=parseInt(Math.random()*d.length);this.setExpression(d[e])};l.prototype.startRandomMotion=function(d,e){var k=this.modelSetting.getMotionNum(d),k=parseInt(Math.random()*k);this.startMotion(d,k,e)};l.prototype.startMotion=function(d,e,l){var k=this.modelSetting.getMotionFile(d,e);if(null==k||""==k)return void(v["default"].DEBUG_LOG&&console.error("Failed to motion."));if(l==v["default"].PRIORITY_FORCE)this.mainMotionManager.setReservePriority(l);else if(!this.mainMotionManager.reserveMotion(l))return void(v["default"].DEBUG_LOG&&console.log("Motion is running."));var t,u=this;null==this.motions[d]?this.loadMotion(null,this.modelHomeDir+k,function(k){t=k;u.setFadeInFadeOut(d,e,l,t)}):(t=this.motions[d],u.setFadeInFadeOut(d,e,l,t))};l.prototype.setFadeInFadeOut=function(d,e,l,t){var k=this.modelSetting.getMotionFile(d,e);if(t.setFadeIn(this.modelSetting.getMotionFadeIn(d,e)),t.setFadeOut(this.modelSetting.getMotionFadeOut(d,e)),v["default"].DEBUG_LOG&&console.log("Start motion : "+k),null!=this.modelSetting.getMotionSound(d,e))d=this.modelSetting.getMotionSound(d,e),e=document.createElement("audio"),e.src=this.modelHomeDir+d,v["default"].DEBUG_LOG&&console.log("Start sound : "+d),e.play();this.mainMotionManager.startMotionPrio(t,l)};l.prototype.setExpression=function(d){var e=this.expressions[d];v["default"].DEBUG_LOG&&console.log("Expression : "+d);this.expressionManager.startMotion(e,!1)};l.prototype.draw=function(d){C["default"].push();C["default"].multMatrix(this.modelMatrix.getArray());this.tmpMatrix=C["default"].getMatrix();this.live2DModel.setMatrix(this.tmpMatrix);this.live2DModel.draw();C["default"].pop()};l.prototype.hitTest=function(d,e,l){for(var k=this.modelSetting.getHitAreaNum(),t=0;t<k;t++)if(d==this.modelSetting.getHitAreaName(t))return d=this.modelSetting.getHitAreaID(t),this.hitTestSimple(d,e,l);return!1};l.prototype.hitTestCustom=function(d,e,l){return"head"==d?this.hitTestSimpleCustom(v["default"].hit_areas_custom_head_x,v["default"].hit_areas_custom_head_y,e,l):"body"==d&&this.hitTestSimpleCustom(v["default"].hit_areas_custom_body_x,v["default"].hit_areas_custom_body_y,e,l)}},function(T,L,O){function e(){this.NAME="name";this.ID="id";this.MODEL="model";this.TEXTURES="textures";this.HIT_AREAS="hit_areas";this.PHYSICS="physics";this.POSE="pose";this.EXPRESSIONS="expressions";this.MOTION_GROUPS="motions";this.SOUND="sound";this.FADE_IN="fade_in";this.FADE_OUT="fade_out";this.LAYOUT="layout";this.HIT_AREAS_CUSTOM="hit_areas_custom";this.INIT_PARAM="init_param";this.INIT_PARTS_VISIBLE="init_parts_visible";this.VALUE="val";this.FILE="file";this.json={}}Object.defineProperty(L,"__esModule",{value:!0});L["default"]=e;var l=O(0);e.prototype.loadModelSetting=function(e,K){var t=this;l.Live2DFramework.getPlatformManager().loadBytes(e,function(e){e=String.fromCharCode.apply(null,new Uint8Array(e));t.json=JSON.parse(e);K()})};e.prototype.getTextureFile=function(e){return null==this.json[this.TEXTURES]||null==this.json[this.TEXTURES][e]?null:this.json[this.TEXTURES][e]};e.prototype.getModelFile=function(){return this.json[this.MODEL]};e.prototype.getTextureNum=function(){return null==this.json[this.TEXTURES]?0:this.json[this.TEXTURES].length};e.prototype.getHitAreaNum=function(){return null==this.json[this.HIT_AREAS]?0:this.json[this.HIT_AREAS].length};e.prototype.getHitAreaID=function(e){return null==this.json[this.HIT_AREAS]||null==this.json[this.HIT_AREAS][e]?null:this.json[this.HIT_AREAS][e][this.ID]};e.prototype.getHitAreaName=function(e){return null==this.json[this.HIT_AREAS]||null==this.json[this.HIT_AREAS][e]?null:this.json[this.HIT_AREAS][e][this.NAME]};e.prototype.getPhysicsFile=function(){return this.json[this.PHYSICS]};e.prototype.getPoseFile=function(){return this.json[this.POSE]};e.prototype.getExpressionNum=function(){return null==this.json[this.EXPRESSIONS]?0:this.json[this.EXPRESSIONS].length};e.prototype.getExpressionFile=function(e){return null==this.json[this.EXPRESSIONS]?null:this.json[this.EXPRESSIONS][e][this.FILE]};e.prototype.getExpressionName=function(e){return null==this.json[this.EXPRESSIONS]?null:this.json[this.EXPRESSIONS][e][this.NAME]};e.prototype.getLayout=function(){return this.json[this.LAYOUT]};e.prototype.getHitAreasCustom=function(){return this.json[this.HIT_AREAS_CUSTOM]};e.prototype.getInitParamNum=function(){return null==this.json[this.INIT_PARAM]?0:this.json[this.INIT_PARAM].length};e.prototype.getMotionNum=function(e){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][e]?0:this.json[this.MOTION_GROUPS][e].length};e.prototype.getMotionFile=function(e,l){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][e]||null==this.json[this.MOTION_GROUPS][e][l]?null:this.json[this.MOTION_GROUPS][e][l][this.FILE]};e.prototype.getMotionSound=function(e,l){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][e]||null==this.json[this.MOTION_GROUPS][e][l]||null==this.json[this.MOTION_GROUPS][e][l][this.SOUND]?null:this.json[this.MOTION_GROUPS][e][l][this.SOUND]};e.prototype.getMotionFadeIn=function(e,l){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][e]||null==this.json[this.MOTION_GROUPS][e][l]||null==this.json[this.MOTION_GROUPS][e][l][this.FADE_IN]?1E3:this.json[this.MOTION_GROUPS][e][l][this.FADE_IN]};e.prototype.getMotionFadeOut=function(e,l){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][e]||null==this.json[this.MOTION_GROUPS][e][l]||null==this.json[this.MOTION_GROUPS][e][l][this.FADE_OUT]?1E3:this.json[this.MOTION_GROUPS][e][l][this.FADE_OUT]};e.prototype.getInitParamID=function(e){return null==this.json[this.INIT_PARAM]||null==this.json[this.INIT_PARAM][e]?null:this.json[this.INIT_PARAM][e][this.ID]};e.prototype.getInitParamValue=function(e){return null==this.json[this.INIT_PARAM]||null==this.json[this.INIT_PARAM][e]?NaN:this.json[this.INIT_PARAM][e][this.VALUE]};e.prototype.getInitPartsVisibleNum=function(){return null==this.json[this.INIT_PARTS_VISIBLE]?0:this.json[this.INIT_PARTS_VISIBLE].length};e.prototype.getInitPartsVisibleID=function(e){return null==this.json[this.INIT_PARTS_VISIBLE]||null==this.json[this.INIT_PARTS_VISIBLE][e]?null:this.json[this.INIT_PARTS_VISIBLE][e][this.ID]};e.prototype.getInitPartsVisibleValue=function(e){return null==this.json[this.INIT_PARTS_VISIBLE]||null==this.json[this.INIT_PARTS_VISIBLE][e]?NaN:this.json[this.INIT_PARTS_VISIBLE][e][this.VALUE]}}]);